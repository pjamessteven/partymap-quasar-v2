import{_ as z,ah as D,E as P,ai as U,aj as C,G as I,S as R,ak as F,H as B,a8 as G,al as w,am as q,an as j,ao as N,I as h,$ as f,Z as b,J as r,K as d,U as c,V as a,L as e,a4 as p,M as n,N as m,z as g,X as _,ap as x,ae as Q,aq as W,Q as H,a5 as Z,a6 as J}from"./index.458653eb.js";const K={components:{SolidPage:D,DateTimePicker:P,RrulePicker:U,MultipleMediaSelector:C,GoogleLocationComponent:I,SelectTagsComponent:R,SelectArtistsComponent:F},props:{host:{type:Boolean,default:!1}},data(){return{showValidationErrors:!1,descriptionAttribute:null,fullDescriptionAttribute:null,existingEvents:null,descriptionAttributeOption:"self",FullDescriptionAttributeOption:"self",attributeOptions:[{label:"I wrote this myself",value:"self"},{label:"This is from the linked event page",value:"official"},{label:"This is from somewhere else",value:"other"}],event:{host:this.host!==void 0?this.host:!1,name:"",description:"",description_attribute:null,full_description:"",full_description_attribute:null,next_event_date_size:null,next_event_date_artists:null,media_items:[],url:"",ticket_url:null,tags:[],location:null,date_time:null,rrule:{recurringType:1,separationCount:0,weekOfMonth:null,dayOfMonth:null,dayOfWeek:null,monthOfYear:null}},mainContentScrollPosition:0,map:null,tileLayer:null,labelLayer:null,mapMarkers:null}},methods:{onScrollPercentage(t){t===1&&(this.showValidationErrors=!0)},findExistingEvent(){B({query:this.event.name,per_page:1}).then(t=>{this.existingEvents=t.data.items})},selectHostMode(){this.currentUser?this.event.host=!0:this.$router.push({path:"/login",query:{from:this.$route.path}})},async submitEvent(){const t=this.$q.dialog({title:this.$t("add.uploading_event"),color:"primary",progress:!0,cancel:!1,persistent:!0,ok:!1});this.descriptionAttributeOption==="official"?this.event.description_attribute=this.event.url:this.descriptionAttributeOption==="other"&&(this.event.description_attribute=this.descriptionAttribute),this.FullDescriptionAttributeOption==="official"?this.event.full_description_attribute=this.event.url:this.FullDescriptionAttributeOption==="other"&&(this.event.full_description_attribute=this.fullDescriptionAttribute);try{const i=await G(this.event);this.$q.dialog({title:this.$t("add.pending_moderation"),message:this.$t("add.pending_moderation_msg"),color:"primary",persistent:!1}).onDismiss(()=>{this.$emit("closeDialog"),this.$router.push({name:"EventPage",params:{id:i.data.id},query:{name:i.data.name.replace(/ /g,"_")}})})}catch{}t.hide()},initMap(){this.map=null,this.map=L.map(this.$refs.map,this.mapOptions),this.map.on("click",()=>{this.map.scrollWheelZoom.enable()}),this.map.on("mouseout",()=>{this.map.scrollWheelZoom.disable()});const t=this.mapStyle==="satellite";let i=1;this.mapStyle==="toner"&&(i=.68);let v=[];this.mapStyle==="transport"&&this.$q.dark.isActive&&(v=["saturate:150%","brightness:100%"]),this.tileLayer=L.tileLayer(this.currentMapTileUrl,{attribution:this.currentMapTileAttribution,detectRetina:t,filter:v}),this.tileLayer.setOpacity(i),this.tileLayer.addTo(this.map),this.mapStyle==="satellite"&&(this.labelLayer=L.tileLayer(this.labelsMapTileUrl,{detectRetina:!1}),this.labelLayer.addTo(this.map),this.labelLayer.setOpacity(.68))}},watch:{eventLocation:{handler(t){t&&setTimeout(()=>{this.map.invalidateSize();const i=t.geometry.location.lat(),v=t.geometry.location.lng();this.markers&&this.map.hasLayer(this.markers)&&w(this.map).removeLayer(this.markers),this.map.setView([i,v],12);let y=L.marker([i,v],{icon:this.defaultIcon,zIndexOffset:5e3});this.mapMarkers=L.featureGroup([y]),this.mapMarkers.addTo(w(this.map))},100)},deep:!0}},computed:{...q(j,["currentMapTileAttribution","currentMapTileUrl","labelsMapTileUrl","defaultIcon","mapStyle"]),...q(N,["currentUser"]),eventLocation(){return this.event.location},validationErrors(){let t={};return(!this.event.name||this.event.name.length===0)&&(t.name="Event name is required"),(!this.event.description||this.event.description.length===0)&&(t.description="Summary is required"),(!this.event.location||!this.event.location.name)&&(t.location="Location is required"),!this.event.date_time||!this.event.date_time.start?t.date_time="Date is required":this.event.date_time.end||(t.date_time="End date is required"),(!this.event.media_items||this.event.media_items.length===0)&&(t.media_items="Event poster is required"),this.event.host||(!this.event.url||this.event.url.length==0)&&(t.url="URL is required"),t}},mounted(){this.initMap()}},o=t=>(Z("data-v-78eeb03f"),t=t(),J(),t),X={key:0},Y=o(()=>e("i",{class:"mdi mdi-check-decagram-outline"},null,-1)),$={key:1},ee={class:"flex column"},te={class:"t2"},se=o(()=>e("a",{href:"https://www.facebook.com/partymap.official",target:"_blank",class:"link-hover underline"},"Facebook",-1)),le=o(()=>e("a",{href:"https://www.instagram.com/partymap.official",class:"link-hover underline",target:"_blank"},"Instagram",-1)),ie={class:"t2 q-mt-md"},oe={class:"t2"},ne=o(()=>e("p",null,null,-1)),ae=o(()=>e("p",{class:"t2"}," Please do not upload copyrighted content to Partymap. If you do it will be removed from the website. ",-1)),re={class:"flex column"},de=o(()=>e("div",{class:"sticky-header flex column"},[e("p",{class:"text-large inter bolder t1 q-mb-md q-mt-md"}," Event Details: ")],-1)),me=o(()=>e("p",null,null,-1)),ue={class:"flex row grow no-wrap items-baseline"},ce={class:"flex column grow q-ml-lg"},pe=o(()=>e("p",{class:"text-large inter bold"},"Event name",-1)),_e=o(()=>e("p",null,null,-1)),he={key:0,class:"flex column"},ge={class:"t2 flex row items-baseline no-wrap"},ve={class:"q-ml-sm"},be=o(()=>e("br",null,null,-1)),fe=o(()=>e("br",null,null,-1)),ye={class:"flex row grow no-wrap items-baseline q-mt-md"},we={class:"flex column grow q-ml-lg"},qe=o(()=>e("span",{class:"text-large inter bold"},"Event poster",-1)),xe=o(()=>e("span",{class:"t2"},"Upload an image for this event",-1)),ke={key:0,class:"inter no-wrap flex items-center q-mt-md text-negative"},Ee={class:"q-ml-sm"},Ve=o(()=>e("p",null,null,-1)),Se={class:"flex row grow no-wrap items-baseline q-mt-md"},Ae={class:"flex column grow q-ml-lg"},Oe={class:"text-large inter bold"},Le={class:"t2 q-mb-md"},Me={key:0,class:"flex row q-mt-sm"},Te=o(()=>e("p",null,null,-1)),ze=o(()=>e("p",null,null,-1)),De={class:"flex row grow no-wrap items-baseline q-mt-md"},Pe={class:"flex column grow q-ml-lg"},Ue={class:"text-large inter bold"},Ce=o(()=>e("span",{class:"t2 q-mb-sm"},[c(" Here you can tell people what they can expect in detail. Please also provide an "),e("u",null," English translation"),c(" if the description is in another languge. ")],-1)),Ie={key:0},Re=o(()=>e("p",null,null,-1)),Fe=o(()=>e("p",null,null,-1)),Be=o(()=>e("p",null,null,-1)),Ge={key:0,class:"flex row grow no-wrap items-baseline"},je={class:"flex column grow q-ml-lg"},Ne={class:"text-large inter bold"},Qe={class:"t2 q-mb-md"},We=o(()=>e("p",null,null,-1)),He={class:"flex row grow no-wrap items-baseline q-mt-md"},Ze={class:"flex column grow q-ml-lg"},Je={class:"text-large inter bold"},Ke={class:"t2 q-mb-md"},Xe={class:"location-map-wrapper satellite-enabled q-mt-md q-mb-lg"},Ye={class:"map",ref:"map"},$e=o(()=>e("div",{class:"location-map-select-msg flex justify-center items-center"},[e("div",{class:"inter bold o-o50"},"Location preview")],-1)),et=o(()=>e("p",null,null,-1)),tt={class:"flex row grow no-wrap items-baseline q-mt-"},st={class:"flex column grow q-ml-lg"},lt=o(()=>e("span",{class:"text-large inter bold"},"Date and Time",-1)),it={class:"t2 q-mb-md"},ot={key:0,class:"inter no-wrap flex items-center q-mb-md text-negative"},nt={class:"q-ml-sm"},at=o(()=>e("p",null,null,-1)),rt={class:"flex row grow no-wrap items-baseline q-mt-md"},dt={class:"flex column grow q-ml-lg"},mt={class:"text-large inter bold"},ut=o(()=>e("span",{class:"t2"}," Will this event happen again, or is it a one-off? ",-1)),ct={key:0},pt=o(()=>e("p",null,null,-1)),_t={key:1,class:"t2 q-mt-sm"},ht={class:"sticky-header flex column"},gt={class:"flex row grow no-wrap items-baseline q-mt-md"},vt={class:"flex column grow q-ml-lg"},bt=o(()=>e("span",{class:"text-large inter bold"},"Tags",-1)),ft=o(()=>e("span",{class:"t2 q-mb-md"}," What makes this event stand out, and what music can one expect? ",-1)),yt=o(()=>e("p",null,null,-1)),wt={key:0,class:"flex row grow no-wrap items-baseline q-mt-md"},qt={class:"flex column grow q-ml-lg"},xt={class:"text-large inter bold"},kt={class:"t2 q-mb-md"},Et=o(()=>e("p",null,null,-1)),Vt={class:"flex row grow no-wrap items-baseline"},St={class:"flex column grow q-ml-lg"},At={class:"text-large inter bold"},Ot={key:0,class:"flex column"},Lt=o(()=>e("span",{class:"t2 q-mb-md"}," Search for the talented artists that are playing at this event. ",-1)),Mt={key:1,class:"t2 q-mb-md q-mt-sm"},Tt={class:"flex row grow no-wrap items-baseline q-mt-md"},zt={class:"flex column grow q-ml-lg"},Dt={class:"text-large inter bold"},Pt=o(()=>e("span",{class:"t2 q-mb-md"}," Give a rough estimate of how many people will be attending this event. ",-1)),Ut=o(()=>e("p",null,null,-1)),Ct=o(()=>e("div",{class:"q-ml-md t1"},"Missing required information...",-1)),It=o(()=>e("div",{class:"q-ml-md t1"}," Looks good! Thank you for contributing! ",-1));function Rt(t,i,v,y,s,u){const k=h("router-link"),E=h("MultipleMediaSelector"),V=h("GoogleLocationComponent"),S=h("DateTimePicker"),A=h("RrulePicker"),O=h("SelectTagsComponent"),M=h("SelectArtistsComponent"),T=h("SolidPage");return r(),f(T,{onScrollPercentage:i[16]||(i[16]=l=>u.onScrollPercentage(l))},{title:b(()=>[s.event.host?(r(),d("div",X,[c(a(t.$t("add_event.add_your_event"))+" \xA0",1),Y])):(r(),d("div",$,a(t.$t("add_event.add_public_event")),1))]),default:b(()=>[e("div",ee,[s.event.host?(r(),d("div",{key:0,class:p(t.$q.screen.lt.sm?" q-mt-md":"q-pt-lg")},[e("div",te,[c(a(t.$t("report.claim_message"))+" ",1),se,c(" "+a(t.$t("report.or"))+" ",1),le,c("\xA0"+a(t.$t("report.or_from_your_email")),1)]),e("div",ie,a(t.$t("report.claim_message_2")),1)],2)):(r(),d("div",{key:1,class:p(t.$q.screen.lt.sm?" q-mt-sm":"q-pt-lg")},[e("p",oe,a(t.$t("add_event.event_i_know_about_msg_long")),1),ne,ae],2)),e("div",re,[de,e("div",{class:p(["flex column",{"q-pa-sm q-pb-md":t.$q.screen.lt.sm,"q-px-lg q-pb-lg q-pt-sm":t.$q.screen.gt.xs}])},[me,e("div",ue,[n(m,{size:"xs",name:"las la-bullhorn"}),e("div",ce,[pe,n(g,{class:"grow",error:!!u.validationErrors.name&&s.showValidationErrors,errorMessage:u.validationErrors.name,style:{"padding-bottom":"0px"},outlined:"",debounce:"500",onInput:u.findExistingEvent,modelValue:s.event.name,"onUpdate:modelValue":i[0]||(i[0]=l=>s.event.name=l),label:t.$t("add.name"),color:"bg-grey-7",rules:[l=>!!l]},null,8,["error","errorMessage","onInput","modelValue","label","rules"]),_e,s.existingEvents&&s.existingEvents.length>0?(r(),d("div",he,[e("div",ge,[n(m,{name:"mdi-alert-circle-outline"}),e("div",null,[e("p",ve,[c(a(t.$t("add.an_event_already_exists"))+"( ",1),n(k,{to:{name:"EventPage",params:{id:s.existingEvents[0].id}}},{default:b(()=>[c(a(s.existingEvents[0].name),1)]),_:1},8,["to"]),c("). "),be,c(" "+a(t.$t("add.dont_add_same_twice"))+" ",1),fe,c(" "+a(t.$t("add.dont_add_same_twice2")),1)])])])])):_("",!0)])]),e("div",ye,[n(m,{size:"xs",name:"las la-images"}),e("div",we,[qe,xe,n(E,{singleSelectMode:s.event.host===!1,showUploadButton:!1,disableCaption:!0,onFilesSelected:i[1]||(i[1]=l=>s.event.media_items=l)},null,8,["singleSelectMode"]),!!u.validationErrors.media_items&&s.showValidationErrors?(r(),d("div",ke,[n(m,{name:"mdi-alert-circle",size:"1.5em"}),e("div",Ee,a(u.validationErrors.media_items),1)])):_("",!0),Ve])]),e("div",Se,[n(m,{size:"xs",name:"las la-align-left"}),e("div",Ae,[e("span",Oe,a(t.$t("description.summary")),1),e("span",Le,a(t.$t("description.summary_msg")),1),n(g,{outlined:"",autogrow:"",counter:"",error:!!u.validationErrors.description&&s.showValidationErrors,maxlength:"400","input-style":{"min-height":"50px"},color:"bg-grey-7",rules:[l=>!!l],modelValue:s.event.description,"onUpdate:modelValue":i[2]||(i[2]=l=>s.event.description=l),label:t.$t("description.summary"),style:{"padding-bottom":"0px"}},null,8,["error","rules","modelValue","label"]),s.event.host===!1?(r(),d("div",Me,[Te,n(x,{modelValue:s.descriptionAttributeOption,"onUpdate:modelValue":i[3]||(i[3]=l=>s.descriptionAttributeOption=l),options:s.attributeOptions,color:"primary"},null,8,["modelValue","options"])])):_("",!0),s.descriptionAttributeOption==="other"?(r(),f(g,{key:1,dense:"",outlined:"",maxlength:"200",class:"q-mt-sm","input-style":{"min-height":"50px"},color:"bg-grey-7",modelValue:s.descriptionAttribute,"onUpdate:modelValue":i[4]||(i[4]=l=>s.descriptionAttribute=l),label:t.$t("description.attribute_msg"),rules:[l=>!!l],style:{"padding-bottom":"0px"}},null,8,["modelValue","label","rules"])):_("",!0),ze])]),e("div",De,[n(m,{size:"xs",name:"las la-align-left"}),e("div",Pe,[e("span",Ue,a(t.$t("description.detailed_description"))+"\xA0(Optional) ",1),Ce,n(g,{outlined:"",autogrow:"",counter:"","input-style":{"min-height":"100px"},color:"bg-grey-7",maxlength:"10000",modelValue:s.event.full_description,"onUpdate:modelValue":i[5]||(i[5]=l=>s.event.full_description=l),label:t.$t("description.detailed_description"),style:{"padding-bottom":"0px"}},null,8,["modelValue","label"]),s.event.host===!1?(r(),d("div",Ie,[Re,n(x,{modelValue:s.FullDescriptionAttributeOption,"onUpdate:modelValue":i[6]||(i[6]=l=>s.FullDescriptionAttributeOption=l),options:s.attributeOptions,color:"primary"},null,8,["modelValue","options"])])):_("",!0),Fe,s.FullDescriptionAttributeOption==="other"?(r(),f(g,{key:1,dense:"",outlined:"",maxlength:"200","input-style":{"min-height":"50px"},color:"bg-grey-7",modelValue:s.fullDescriptionAttribute,"onUpdate:modelValue":i[7]||(i[7]=l=>s.fullDescriptionAttribute=l),label:t.$t("description.attribute_msg"),rules:[l=>!!l],style:{"padding-bottom":"0px"}},null,8,["modelValue","label","rules"])):_("",!0),Be])]),s.event.host?_("",!0):(r(),d("div",Ge,[n(m,{size:"xs",name:"las la-external-link-alt"}),e("div",je,[e("span",Ne,a(t.$t("add.url")),1),e("span",Qe,a(t.$t("add.url_msg")),1),n(g,{error:!!u.validationErrors.url&&s.showValidationErrors,"error-message":u.validationErrors.url,outlined:"",rules:[l=>!!l],color:"bg-grey-7",modelValue:s.event.url,"onUpdate:modelValue":i[8]||(i[8]=l=>s.event.url=l),label:t.$t("add.url"),style:{"padding-bottom":"0px"}},null,8,["error","error-message","rules","modelValue","label"]),We])])),e("div",He,[n(m,{size:"xs",name:"las la-map-marker"}),e("div",Ze,[e("span",Je,a(t.$t("add.location")),1),e("span",Ke,a(t.$t("add.location_caption")),1),n(V,{onLocation:i[9]||(i[9]=l=>s.event.location=l),locationProp:s.event.location,"error-message":s.showValidationErrors?u.validationErrors.location:void 0},null,8,["locationProp","error-message"]),Q(e("div",Xe,[e("div",Ye,null,512),$e],512),[[W,!!s.event.location]]),et])]),e("div",tt,[n(m,{size:"xs",name:"las la-calendar-day"}),e("div",st,[lt,e("span",it," Select a date range. "+a(t.$t("add.please_select_date_msg_2")),1),!!u.validationErrors.date_time&&s.showValidationErrors?(r(),d("div",ot,[n(m,{name:"mdi-alert-circle",size:"1.5em"}),e("div",nt,a(u.validationErrors.date_time),1)])):_("",!0),n(S,{onDateRange:i[10]||(i[10]=l=>s.event.date_time=l),inlineCalendar:!0,isRange:!0}),at])]),e("div",rt,[n(m,{size:"xs",name:"las la-external-link-alt"}),e("div",dt,[e("span",mt,a(t.$t("add.recurrence")),1),ut,s.event.date_time&&s.event.date_time.start&&s.event.date_time.end?(r(),d("div",ct,[pt,n(A,{onUpdateRrule:i[11]||(i[11]=l=>s.event.rrule=l),dateTime:s.event.date_time,disableOneOff:!1},null,8,["dateTime"])])):(r(),d("p",_t,[e("u",null,a(t.$t("add.please_select_date_first")),1)]))])])],2),e("div",ht,[e("p",{class:p(["text-large inter bolder t1 q-mb-md q-mt-md",{}])},a(t.$t("add.additional_information"))+": ",1)]),e("div",{class:p(["flex column",{"card-disabled":s.event.host===null,"q-pa-sm q-pb-md":t.$q.screen.lt.sm,"q-px-lg q-pb-lg q-pt-sm":t.$q.screen.gt.xs}])},[e("div",gt,[n(m,{size:"xs",name:"las la-tags"}),e("div",vt,[bt,ft,n(O,{showTopTags:!0,onValueUpdated:i[12]||(i[12]=l=>s.event.tags=l),mode:"emit"}),yt])]),s.event.host?(r(),d("div",wt,[n(m,{size:"xs",name:"las la-external-link-alt"}),e("div",qt,[e("span",xt,a(t.$t("add.url")),1),e("span",kt,a(t.$t("add.url_msg")),1),n(g,{outlined:"",autogrow:"",color:"bg-grey-7",modelValue:s.event.url,"onUpdate:modelValue":i[13]||(i[13]=l=>s.event.url=l),label:t.$t("add.url")},null,8,["modelValue","label"]),Et])])):_("",!0),e("div",Vt,[n(m,{size:"xs",name:"las la-align-left"}),e("div",St,[e("span",At,a(t.$t("add.lineup")),1),s.event.date_time&&s.event.date_time.start&&s.event.date_time.end?(r(),d("div",Ot,[Lt,n(M,{mode:"emit",onUpdated:i[14]||(i[14]=l=>s.event.next_event_date_artists=l),defaultDate:s.event.date_time.start,class:"q-mb-md"},null,8,["defaultDate"])])):(r(),d("span",Mt,[e("u",null,a(t.$t("add.please_select_date_first")),1)]))])]),e("div",Tt,[n(m,{size:"xs",name:"las la-user-friends"}),e("div",zt,[e("span",Dt,a(t.$t("add.size_how_many")),1),Pt,n(g,{outlined:"","hide-bottom-space":"",color:"bg-grey-7",style:{"max-width":"300px"},modelValue:s.event.next_event_date_size,"onUpdate:modelValue":i[15]||(i[15]=l=>s.event.next_event_date_size=l),label:t.$t("add.size"),type:"number",rules:[l=>!l||l.length==0||Number.isInteger(parseInt(l))||"Please input a number"]},null,8,["modelValue","label","rules"]),Ut])])],2)])])]),footer:b(()=>[e("div",{class:p(["flex solid-page-footer-content items-center",t.$q.screen.lt.sm?"column justify-center ":"row justify-between"])},[e("div",null,[Object.keys(u.validationErrors).length>0?(r(),d("div",{key:0,class:p(["t1 inter bold text-large no-wrap flex items-center",t.$q.screen.gt.xs?"q-ml-lg":"q-mt-lg"])},[n(m,{name:"mdi-alert-circle",size:"2em",style:{color:"red"}}),Ct],2)):(r(),d("div",{key:1,class:p(["t1 inter bold text-large no-wrap flex items-center",t.$q.screen.gt.xs?"q-ml-lg":"q-mt-lg"])},[n(m,{name:"mdi-check",size:"2em",style:{color:"green"}}),It],2))]),n(H,{class:p([s.event.host===null?"card-disabled":"","soft-button-shadow inter bold q-ma-lg"]),"icon-right":"mdi-chevron-right",color:"primary",label:"Submit Event",disable:Object.keys(u.validationErrors).length>0,onClick:u.submitEvent},null,8,["class","disable","onClick"])],2)]),_:1})}var Bt=z(K,[["render",Rt],["__scopeId","data-v-78eeb03f"]]);export{Bt as default};
