import{h as p,b as d}from"./index.458653eb.js";function o(t){typeof console!="undefined"&&console.error(`[vue-apple-signin] ${t}`)}var u={install(t,s){t.component("vue-apple-login",{name:"VueAppleLogin",props:{mode:{type:String,default:"center-align",validator(e){return["center-align","left-align","logo-only"].indexOf(e)>-1}},type:{type:String,default:"sign in",validator(e){return["sign in","sign up","apple","continue"].indexOf(e)>-1}},color:{type:String,default:"black",validator(e){return["white","black"].indexOf(e)>-1}},border:{type:Boolean,default:!0},radius:{type:Number,default:15,validator(e){return e>=0&&e<=50}},width:{type:String,default:"100%"},height:{type:String,default:"100%"},logoSize:{type:String,default:"medium",validator(e){return["small","medium","large"].indexOf(e)>-1}},logoPosition:{type:Number,default:0},labelPosition:{type:Number,default:0},className:{type:String,default:"vue-apple-signin"},onSuccess:{type:Function,default:null},onFailure:{type:Function,default:null}},computed:{dataBorder(){return this.border.toString()}},mounted(){if(!window.AppleID){o('"https://appleid.cdn-apple.com/appleauth/static/jsapi/appleid/1/en_US/appleid.auth.js" needs to be included as a <script>');return}const{clientId:e,scope:i="",redirectURI:a,state:n,usePopup:r}=s;if(!e){o("options.clientId must be specified.");return}if(!a){o("options.redirectURI must be specified.");return}if(!n){o("options.state must be specified.");return}window.AppleID.auth.init({clientId:e,scope:i,redirectURI:a,state:n,usePopup:r});const l=this;document.addEventListener("AppleIDSignInOnSuccess",l.callOnSuccess),document.addEventListener("AppleIDSignInOnFailure",l.callOnFailure)},beforeDestroy(){const e=this;document.removeEventListener("AppleIDSignInOnSuccess",e.callOnSuccess),document.removeEventListener("AppleIDSignInOnFailure",e.callOnFailure)},methods:{callOnSuccess(e){if(this.onSuccess){const i=this.getAppleDataFromToken(e.detail.authorization.id_token);this.onSuccess({authorization:e.detail.authorization,userData:i})}},callOnFailure(e){this.onFailure&&this.onFailure(e)},getAppleDataFromToken(e){var i=e.split(".")[1],a=i.replace(/-/g,"+").replace(/_/g,"/"),n=decodeURIComponent(atob(a).split("").map(function(r){return"%"+("00"+r.charCodeAt(0).toString(16)).slice(-2)}).join(""));return JSON.parse(n)}},render(){return p("div",{id:"appleid-signin","data-mode":this.mode,"data-type":this.type,"data-color":this.color,"data-border":this.dataBorder,"data-radius":this.radius,"data-width":this.width,"data-height":this.height,"data-logo-size":this.logoSize,"data-logo-position":this.logoPosition,"data-label-position":this.labelPosition,class:this.className})}})}},g=d(({app:t})=>{t.use(u,{clientId:"com.partymap.web",scope:"name email",redirectURI:"https://partymap.com",state:Date.now().toString(),usePopup:!0})});export{g as default};
