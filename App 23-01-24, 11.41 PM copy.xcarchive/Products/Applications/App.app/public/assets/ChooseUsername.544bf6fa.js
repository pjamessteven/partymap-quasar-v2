import{_ as c,a7 as f,aE as p,ao as i,am as _,I as g,K as b,M as a,Z as r,au as U,J as m,aN as d,L as l,V as o,z as y,aI as V,U as k,bz as C,Q as $,$ as q,X as w}from"./index.458653eb.js";const N={name:"SetUsername",components:{InnerLoading:f},data(){return{username:"",username_taken:!1,loading:!1}},methods:{...p(i,["editUser"]),async setUsername(){this.loading=!0;try{await this.editUser({username:this.username}),this.$q.notify("You're all set, "+this.username+"!"),this.loading=!1,this.$router.push("/")}catch(e){this.loading=!1,e.response.data.error.code==="USERNAME_TAKEN"&&(this.username_taken=!0)}}},watch:{username(e,s){this.username_taken&&(this.username_taken=!1),e!==s&&(this.username=this.username.toLowerCase())}},computed:{..._(i,["currentUser"]),usernameValidation(){return this.username_taken?"Username already taken":this.username.length>25?"Username too long":this.username.length<3?"Username too short":/^[A-Za-z0-9_-]+$/.test(this.username)?!0:this.$t("auth.username_letters_and_numbers")}}},A={class:"dialog-page",style:{"padding-bottom":"60px"}},I={class:"text-large bold"},Q=l("p",null,null,-1),S={class:"t3"},v={class:"t1 inter bold"};function B(e,s,E,L,t,n){const h=g("InnerLoading");return m(),b("div",A,[a(U,{bordered:e.$q.screen.gt.sm,class:"q-pa-md auth-card"},{default:r(()=>[a(d,{class:"title flex justify-center column"},{default:r(()=>[l("b",I,o(e.$t("auth.choose_username")),1),Q,l("p",S,o(e.$t("auth.choose_username_message")),1),l("p",v,o(e.$t("auth.choose_username_requirements")),1)]),_:1}),a(d,{class:"flex grow q-pt-none"},{default:r(()=>[a(y,{autocapitalize:"off",filled:"",class:"flex grow",label:e.$t("auth.username"),modelValue:t.username,"onUpdate:modelValue":s[0]||(s[0]=u=>t.username=u),onKeyup:s[1]||(s[1]=V(u=>e.prompt=!1,["enter"])),"bottom-slots":"",error:n.usernameValidation!=!0&&t.username.length>0},{error:r(()=>[k(o(n.usernameValidation),1)]),_:1},8,["label","modelValue","error"])]),_:1}),a(C,{align:"right",class:"text-primary q-pa-md q-pt-md"},{default:r(()=>[a($,{disable:n.usernameValidation!=!0||t.username.length==0,color:"primary",label:e.$t("auth.continue"),onClick:s[2]||(s[2]=u=>n.setUsername())},null,8,["disable","label"])]),_:1}),t.loading?(m(),q(h,{key:0,solid:!0})):w("",!0)]),_:1},8,["bordered"])])}var z=c(N,[["render",B]]);export{z as default};
