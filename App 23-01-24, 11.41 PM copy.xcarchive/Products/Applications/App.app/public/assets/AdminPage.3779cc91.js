import{H as V,bE as $,bF as ee,am as J,ao as W,ab as q,_ as N,I as y,J as n,$ as l,Z as s,M as o,U as _,aN as D,at as R,K as r,R as E,a3 as x,a1 as C,L as u,a2 as k,V as c,N as P,aW as X,X as f,Q as w,O as A,aJ as j,bG as L,au as K,bH as te,bI as F,ae as I,af as Y,av as H,a5 as M,a6 as O,bJ as se,aE as ne,bK as oe,bL as z,a4 as ae,Y as ie,bM as le,bN as G,ag as T,ah as re}from"./index.458653eb.js";import{Q as Z}from"./QBtnDropdown.36e88f67.js";const de={components:{},props:{id:{default:null,loading:!1}},data(){return{events:null,page:1,perPage:10,hasNext:!1,loading:!1}},mounted(){this.loading=!0,V({hidden:!0,page:this.page,sort:"created_at",desc:!0,per_page:this.perPage}).then(e=>{this.events=e.data.items,this.loading=!1,this.hasNext=e.data.has_next})},methods:{deleteEvent(e){this.$q.dialog({title:"Delete event",message:"Are you sure?",color:"primary",persistent:!1}).onOk(()=>{const i=this.$q.dialog({title:"Doo do doo..",color:"primary",progress:!0,cancel:!1,persistent:!0,ok:!1});$(e).then(()=>{i.hide();var h=this.events.findIndex(m=>m.id===e);this.events.splice(h,1)},()=>{i.hide()})})},approveEvent(e){ee(e,{hidden:!1}).then(()=>{var i=this.events.findIndex(h=>h.id===e);this.events.splice(i,1)},()=>{})},loadMore(){this.page+=1,this.loading=!0,V({hidden:!0,page:this.page,sort:"created_at",desc:!0,per_page:10}).then(e=>{this.loading=!1,this.events=[...this.events,...e.data.items],this.hasNext=e.data.has_next})}},watch:{},computed:{...J(W,["currentUser"])},created(){this.timeAgo=q.timeAgo}},ue={class:"flex row grow justify-between no-wrap items-center"},ce={class:"flex column no-wrap"},ge={class:"controls"},_e={class:"flex grow justify-center"},pe={key:1,class:"t3 flex grow justify-center"};function he(e,i,h,m,t,d){const p=y("router-link");return n(),l(K,null,{default:s(()=>[o(D,{class:"text-h6"},{default:s(()=>[_(" Pending events: ")]),_:1}),o(D,{class:""},{default:s(()=>[t.events&&t.events.length>0?(n(),l(R,{key:0},{default:s(()=>[(n(!0),r(A,null,E(t.events,(a,g)=>(n(),l(x,{key:g},{default:s(()=>[o(C,null,{default:s(()=>[u("div",ue,[u("div",ce,[o(k,{class:"flex row items-center"},{default:s(()=>[o(p,{class:"link-hover",to:{name:"EventPage",params:{id:a.id}}},{default:s(()=>[_(c(a.name),1)]),_:2},1032,["to"]),a.host?(n(),l(P,{key:0,class:"q-ml-sm",name:"mdi-check-decagram"},{default:s(()=>[o(X,{"content-class":e.$q.dark.isActive?"bg-black text-white":"bg-white text-black",offset:[10,10],"content-style":"font-size: 16px"},{default:s(()=>[_(c(e.$t("event.official_page")),1)]),_:1},8,["content-class"])]),_:1})):f("",!0)]),_:2},1024),o(k,{caption:""},{default:s(()=>{var v;return[_(" created "+c(e.timeAgo(a.created_at))+" by ",1),a.creator?(n(),l(p,{key:0,class:"link-hover",to:{name:"UserPage",params:{username:(v=a.creator)==null?void 0:v.username}}},{default:s(()=>{var b;return[_(c((b=a.creator)==null?void 0:b.username),1)]}),_:2},1032,["to"])):f("",!0)]}),_:2},1024)]),u("div",ge,[o(w,{color:"red",round:"",size:"sm",flat:"",onClick:v=>d.deleteEvent(a.id)},{default:s(()=>[o(P,{name:"las la-trash"})]),_:2},1032,["onClick"]),o(w,{color:"green",round:"",size:"sm",flat:"",onClick:v=>d.approveEvent(a.id)},{default:s(()=>[o(P,{name:"las la-check"})]),_:2},1032,["onClick"])])])]),_:2},1024)]),_:2},1024))),128)),u("div",_e,[t.hasNext?(n(),l(w,{key:0,label:e.$t("activity.load_more"),icon:"mdi-chevron-down",onClick:d.loadMore,flat:""},null,8,["label","onClick"])):f("",!0)])]),_:1})):(n(),r("div",pe,"No pending events :("))]),_:1}),o(L,{showing:t.loading},{default:s(()=>[o(j,{color:e.$q.dark.isActive?"white":"black",size:"2em"},null,8,["color"])]),_:1},8,["showing"])]),_:1})}var fe=N(de,[["render",he],["__scopeId","data-v-7e5ee20c"]]);const me={components:{},props:{id:{default:null,loading:!1}},data(){return{open:!0,reports:null,page:1,perPage:10,hasNext:!1,loading:!1}},mounted(){this.loadInitialList()},methods:{toggleShowRead(){this.open=!this.open,this.loadInitialList()},updateReport(e,i){const h=this.$q.dialog({title:"Doo do doo..",color:"primary",progress:!0,cancel:!1,persistent:!0,ok:!1});te(e,{open:i}).then(m=>{if(h.hide(),i===!1){var t=this.reports.findIndex(p=>p.id===e);this.reports.splice(t,1)}else{var d=this.reports.findIndex(p=>p.id===e);this.reports[d]=m.data,this.reports=[...this.reports]}},()=>{h.hide()})},loadInitialList(){this.loading=!0,F({open:this.open,page:this.page,sort:"created_at",desc:!0,per_page:this.perPage}).then(e=>{this.reports=e.data.items,this.loading=!1,this.hasNext=e.data.has_next})},loadMore(){this.page+=1,this.loading=!0,F({open:this.open,page:this.page,sort:"created_at",desc:!0,per_page:10}).then(e=>{this.loading=!1,this.reports=[...this.reports,...e.data.items],this.hasNext=e.data.has_next})}},watch:{},computed:{},created(){this.timeAgo=q.timeAgo}},ve=e=>(M("data-v-9ed66628"),e=e(),O(),e),ke=ve(()=>u("div",{class:"text-h6"},"Pending reports and claims:",-1)),ye={class:"flex row grow justify-between no-wrap items-center"},we={class:"flex row no-wrap items-center"},be={class:"flex column no-wrap q-ml-md"},xe=["href"],Ce={class:"controls"},Se={class:"flex grow justify-center q-mt-md"},Pe={key:1,class:"t3 flex grow justify-center"};function Ie(e,i,h,m,t,d){const p=y("router-link");return n(),l(K,null,{default:s(()=>[o(D,{class:"flex row grow justify-between"},{default:s(()=>[ke,o(Z,{label:t.open?"unread":"read"},{default:s(()=>[o(R,null,{default:s(()=>[t.open?I((n(),l(x,{key:0,onClick:d.toggleShowRead,clickable:""},{default:s(()=>[o(C,null,{default:s(()=>[o(k,null,{default:s(()=>[_("Show read reports")]),_:1})]),_:1})]),_:1},8,["onClick"])),[[H]]):f("",!0),t.open?f("",!0):I((n(),l(x,{key:1,onClick:d.toggleShowRead,clickable:""},{default:s(()=>[o(C,null,{default:s(()=>[o(k,null,{default:s(()=>[_("Show unread reports")]),_:1})]),_:1})]),_:1},8,["onClick"])),[[H]])]),_:1})]),_:1},8,["label"])]),_:1}),o(D,{class:""},{default:s(()=>[t.reports&&t.reports.length>0?(n(),l(R,{key:0},{default:s(()=>[(n(!0),r(A,null,E(t.reports,(a,g)=>(n(),r("div",{class:"flex column",key:g},[g!==0?(n(),l(Y,{key:0,spaced:""})):f("",!0),o(x,null,{default:s(()=>[o(C,null,{default:s(()=>[u("div",ye,[u("div",we,[a.open?(n(),l(P,{key:0,name:"mdi-circle"})):(n(),l(P,{key:1,name:"mdi-circle-outline"})),u("div",be,[o(k,{class:"flex row items-center"},{default:s(()=>[o(p,{class:"link-hover",to:{name:"EventPage",params:{id:a.event.id}}},{default:s(()=>[_(c(a.event.name)+" ",1),a.event.host?(n(),l(P,{key:0,class:"q-ml-md",name:"mdi-check-decagram"},{default:s(()=>[o(X,{"content-class":e.$q.dark.isActive?"bg-black text-white":"bg-white text-black",offset:[10,10],"content-style":"font-size: 16px"},{default:s(()=>[_(c(e.$t("event.official_page")),1)]),_:1},8,["content-class"])]),_:1})):f("",!0)]),_:2},1032,["to"])]),_:2},1024),o(k,{caption:""},{default:s(()=>{var v;return[_(" created "+c(e.timeAgo(a.created_at))+" by ",1),a.creator?(n(),l(p,{key:0,class:"link-hover",to:{name:"UserPage",params:{username:(v=a.creator)==null?void 0:v.username}}},{default:s(()=>{var b;return[_(c((b=a.creator)==null?void 0:b.username),1)]}),_:2},1032,["to"])):f("",!0),_(" \xA0"),u("a",{class:"link-hover",href:"mailto:"+a.email},"("+c(a.email)+")",9,xe)]}),_:2},1024),o(k,null,{default:s(()=>[_(c(a.message),1)]),_:2},1024)])]),u("div",Ce,[a.open?(n(),l(w,{key:0,label:"mark read",flat:"",onClick:v=>d.updateReport(a.id,!1)},null,8,["onClick"])):(n(),l(w,{key:1,label:"mark unread",flat:"",onClick:v=>d.updateReport(a.id,!0)},null,8,["onClick"]))])])]),_:2},1024)]),_:2},1024)]))),128)),u("div",Se,[t.hasNext?(n(),l(w,{key:0,label:e.$t("activity.load_more"),icon:"mdi-chevron-down",onClick:d.loadMore,flat:""},null,8,["label","onClick"])):f("",!0)])]),_:1})):(n(),r("div",Pe," No content reports :D "))]),_:1}),o(L,{showing:t.loading},{default:s(()=>[o(j,{color:e.$q.dark.isActive?"white":"black",size:"2em"},null,8,["color"])]),_:1},8,["showing"])]),_:1})}var qe=N(me,[["render",Ie],["__scopeId","data-v-9ed66628"]]);const Ee={components:{ArtistListItem:se},props:{item:Object},data(){return{loading:!1,suggestion:{...this.item},ignoredKeys:["creator_id"]}},methods:{...ne(oe,["reloadEvent"]),approve(){this.loading=!0,z(this.suggestion.id,{status:"approved"}).then(e=>{this.$route.name==="EventPage"&&this.reloadEvent(),this.suggestion=e.data,this.loading=!1})},hide(){this.loading=!0,z(this.suggestion.id,{status:"hidden"}).then(e=>{this.suggestion=e.data,this.loading=!1})}},watch:{},computed:{computedKeys(){if(this.suggestion.kwargs){var e=Object.keys(this.suggestion.kwargs).filter(i=>{var h,m;return this.ignoredKeys.indexOf(i)===-1&&((m=(h=this.suggestion.kwargs)==null?void 0:h[i])==null?void 0:m.length)!==0});return e}return[]}},created(){this.dateTimeUTCToLocal=q.dateTimeUTCToLocal,this.recurringPatternKebab=q.recurringPatternKebab,this.timeAgo=q.timeAgo}},Ae={class:"flex column grow"},De={class:"flex column no-wrap justify-between"},Re={class:"t1"},Ne={key:0},Te={class:"t1"},je={key:2},Le={key:3},Qe={class:"t3"},ze={class:"t1"},Ke={key:0},Me={key:0,class:"changes q-py-sm"},Oe={class:"t3"},Ue={key:0},Be=["src"],Ve={key:1,class:"preview",controls:""},Fe=["src","type"],He={key:1,class:""},Ge={key:2,class:""},Je={key:3},We={class:"flex column"},Xe={key:4},Ye={key:0,class:"t3 justify-end flex row q-ma-md"},Ze={key:0},$e={key:1,class:"flex row action-buttons q-ma-sm justify-end items-stretch"};function et(e,i,h,m,t,d){const p=y("router-link"),a=y("ArtistListItem");return n(),r("div",{class:"suggestion flex column",style:ie(t.suggestion.status=="approved"||t.suggestion.status=="hidden"?"opacity: 0.48":"")},[u("div",Ae,[u("div",{class:ae(["flex column q-pa-sm",{delete:t.suggestion.action==="delete",update:t.suggestion.action==="update",create:t.suggestion.action==="create"}])},[u("div",De,[u("div",Re,[t.suggestion.creator?(n(),r("span",Ne,c(t.suggestion.creator.username)+": \xA0",1)):f("",!0),u("span",Te,[_(c(t.suggestion.action)+" "+c(t.suggestion.object_type)+" ",1),t.suggestion.object_type==="EventDate"&&t.suggestion.event_date_id?(n(),l(p,{key:0,class:"link-hover underline",to:{name:"EventPage",params:{id:t.suggestion.event_id,eventDateId:t.suggestion.event_date_id}}},{default:s(()=>[_(c(t.suggestion.event_id)+"/"+c(t.suggestion.event_date_id),1)]),_:1},8,["to"])):t.suggestion.object_type==="Event"&&t.suggestion.event_id?(n(),l(p,{key:1,class:"link-hover underline",to:{name:"EventPage",params:{id:t.suggestion.event_id}}},{default:s(()=>[_(c(t.suggestion.event_id),1)]),_:1},8,["to"])):t.suggestion.object_type==="EventDate"&&!t.suggestion.event_date_id?(n(),r("span",je,"[TARGET DELETED]")):t.suggestion.object_type==="Event"&&!t.suggestion.event_id?(n(),r("span",Le,"[TARGET DELETED]")):f("",!0)])]),u("div",Qe,c(e.timeAgo(t.suggestion.created_at))+" "+c(e.dateTimeUTCToLocal(t.suggestion.created_at)),1),u("div",ze,[u("span",null,[_(" Message: "),t.suggestion.message?f("",!0):(n(),r("span",Ke,"None"))]),_("\xA0"+c(t.suggestion.message),1)])])],2),d.computedKeys&&d.computedKeys.length>0?(n(),r("div",Me,[(n(!0),r(A,null,E(d.computedKeys,(g,v)=>{var b,U,B;return n(),r("div",{key:v,class:"flex column q-px-sm"},[u("div",Oe,c(g),1),g==="media_items"?(n(),r("div",Ue,[(n(!0),r(A,null,E(t.suggestion.kwargs.media_items,(S,Q)=>(n(),r("div",{key:Q},[S.mimeType.indexOf("image")>-1?(n(),r("img",{key:0,class:"preview",src:S.base64File},null,8,Be)):S.mimeType.indexOf("video")>-1?(n(),r("video",Ve,[u("source",{src:S.base64File,type:S.mimeType},null,8,Fe),o(P,{size:"1em",name:"las la-play"})])):f("",!0)]))),128))])):g==="rrule"?(n(),r("div",He,c(e.recurringPatternKebab((b=t.suggestion.kwargs)==null?void 0:b[g])),1)):g==="location"?(n(),r("div",Ge,c(t.suggestion.kwargs[g].description),1)):g==="add_artists"||g==="remove_artists"||g==="update_artists"?(n(),r("div",Je,[u("div",We,[(n(!0),r(A,null,E((U=t.suggestion.kwargs)==null?void 0:U[g],(S,Q)=>(n(),l(a,{artist:S,key:Q},null,8,["artist"]))),128))])])):(n(),r("div",Xe,c((B=t.suggestion.kwargs)==null?void 0:B[g]),1))])}),128))])):f("",!0)]),t.suggestion.status==="approved"?(n(),r("div",Ye,[t.suggestion.approved_by&&t.suggestion.approved_by.username?(n(),r("div",Ze," Approved by: "+c(t.suggestion.approved_by.username),1)):f("",!0)])):f("",!0),t.suggestion.status=="pending"||t.suggestion.status==="hidden"?(n(),r("div",$e,[o(w,{class:"",size:"1em",color:"grey-8",label:"Hide",flat:"",onClick:i[0]||(i[0]=g=>d.hide())}),o(w,{class:"q-pa-none",size:"1em",label:"Approve",flat:"",color:"primary",onClick:i[1]||(i[1]=g=>d.approve())})])):f("",!0),o(L,{showing:t.loading},{default:s(()=>[o(j,{color:e.$q.dark.isActive?"white":"black",size:"2em"},null,8,["color"])]),_:1},8,["showing"])],4)}var tt=N(Ee,[["render",et],["__scopeId","data-v-09027537"]]);const st={components:{Suggestion:tt},props:{id:{default:null,loading:!1}},data(){return{status:"pending",suggestions:null,page:1,perPage:10,hasNext:!1,loading:!1}},mounted(){this.loadInitialList()},methods:{setStatus(e){this.status=e,this.loadInitialList()},updateReport(e,i){const h=this.$q.dialog({title:"Doo do doo..",color:"primary",progress:!0,cancel:!1,persistent:!0,ok:!1});z(e,{open:i}).then(m=>{if(h.hide(),i===!1){var t=this.suggestions.findIndex(p=>p.id===e);this.suggestions.splice(t,1)}else{var d=this.reports.findIndex(p=>p.id===e);this.suggestions[d]=m.data,this.suggestions=[...this.suggestions]}},()=>{h.hide()})},deleteSuggestion(e){this.$q.dialog({title:"Delete Suggestion",message:"Are you sure? It will never come back",color:"primary",persistent:!1}).onOk(()=>{const i=this.$q.dialog({title:"Doo do doo..",color:"primary",progress:!0,cancel:!1,persistent:!0,ok:!1});le(e).then(()=>{i.hide();var h=this.suggestions.findIndex(m=>m.id===e);this.suggestions.splice(h,1)},()=>{i.hide()})})},loadInitialList(){this.loading=!0,G({status:this.status,page:this.page,sort:"created_at",desc:!0,per_page:10}).then(e=>{this.loading=!1,this.suggestions=e.data.items,this.hasNext=e.data.has_next})},loadMore(){this.page+=1,this.loading=!0,G({status:this.status,page:this.page,sort:"created_at",desc:!0,per_page:10}).then(e=>{this.loading=!1,this.suggestions=[...this.suggestions,...e.data.items],this.hasNext=e.data.has_next})}},watch:{},computed:{},created(){this.timeAgo=q.timeAgo}},nt=e=>(M("data-v-dcf3107a"),e=e(),O(),e),ot=nt(()=>u("div",{class:"text-h6"},"Pending suggestions:",-1)),at={class:"flex grow justify-center q-mt-md"},it={key:1,class:"t3 flex grow justify-center"};function lt(e,i,h,m,t,d){const p=y("Suggestion");return n(),l(K,null,{default:s(()=>[o(D,{class:"flex row grow justify-between"},{default:s(()=>[ot,o(Z,{label:t.status?t.status:"all"},{default:s(()=>[o(R,null,{default:s(()=>[I((n(),l(x,{clickable:"",onClick:i[0]||(i[0]=a=>d.setStatus("pending"))},{default:s(()=>[o(C,null,{default:s(()=>[o(k,null,{default:s(()=>[_("Pending")]),_:1})]),_:1})]),_:1})),[[T]]),I((n(),l(x,{clickable:"",onClick:i[1]||(i[1]=a=>d.setStatus(null))},{default:s(()=>[o(C,null,{default:s(()=>[o(k,null,{default:s(()=>[_("All")]),_:1})]),_:1})]),_:1})),[[T]]),I((n(),l(x,{clickable:"",onClick:i[2]||(i[2]=a=>d.setStatus("approved"))},{default:s(()=>[o(C,null,{default:s(()=>[o(k,null,{default:s(()=>[_("Approved")]),_:1})]),_:1})]),_:1})),[[T]]),I((n(),l(x,{clickable:"",onClick:i[3]||(i[3]=a=>d.setStatus("hidden"))},{default:s(()=>[o(C,null,{default:s(()=>[o(k,null,{default:s(()=>[_("Hidden")]),_:1})]),_:1})]),_:1})),[[T]])]),_:1})]),_:1},8,["label"])]),_:1}),o(D,{class:""},{default:s(()=>[t.suggestions&&t.suggestions.length>0?(n(),l(R,{key:0},{default:s(()=>[(n(!0),r(A,null,E(t.suggestions,(a,g)=>(n(),r("div",{class:"flex column",key:g},[g!==0?(n(),l(Y,{key:0,spaced:""})):f("",!0),o(p,{item:a},null,8,["item"])]))),128)),u("div",at,[t.hasNext?(n(),l(w,{key:0,label:e.$t("activity.load_more"),icon:"mdi-chevron-down",onClick:d.loadMore,flat:""},null,8,["label","onClick"])):f("",!0)])]),_:1})):(n(),r("div",it,"No suggestions :D"))]),_:1}),o(L,{showing:t.loading},{default:s(()=>[o(j,{color:e.$q.dark.isActive?"white":"black",size:"2em"},null,8,["color"])]),_:1},8,["showing"])]),_:1})}var rt=N(st,[["render",lt],["__scopeId","data-v-dcf3107a"]]);const dt={components:{PendingEventsComponent:fe,PendingReportsComponent:qe,PendingSuggestionsComponent:rt,SolidPage:re},props:{id:{default:null,loading:!1}},data(){return{user:null}},methods:{},watch:{},computed:{...J(W,["currentUser"])}},ut=e=>(M("data-v-1f2c35e3"),e=e(),O(),e),ct=ut(()=>u("div",null,"Administration",-1));function gt(e,i,h,m,t,d){const p=y("PendingEventsComponent"),a=y("PendingReportsComponent"),g=y("PendingSuggestionsComponent"),v=y("SolidPage");return n(),l(v,{loading:e.loading},{title:s(()=>[ct]),default:s(()=>[o(p,{class:"q-mt-lg"}),o(a,{class:"q-mt-lg"}),o(g,{class:"q-mt-lg q-mb-xl"})]),_:1},8,["loading"])}var ht=N(dt,[["render",gt],["__scopeId","data-v-1f2c35e3"]]);export{ht as default};
