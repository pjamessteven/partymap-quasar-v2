import{ar as ht,as as O,an as ee,_ as Z,J as r,$ as b,Z as c,M as l,at as J,a2 as T,U as D,V as $,af as ie,K as g,R as U,ae as F,a3 as N,a1 as x,O as H,X as y,au as We,v as qe,av as ue,aw as ct,ao as ce,ax as j,ay as A,az as mt,aa as S,aA as pt,aB as z,al as k,aC as Ve,aD as le,aE as K,am as G,L as v,T as Q,a4 as q,a5 as ae,a6 as oe,I as P,aF as ze,N as E,aG as ne,aH as we,a0 as W,z as Ue,aI as $e,aJ as _e,Q as Y,aK as ft,x as Be,ag as me,aL as gt,aM as Ee,aq as Le,aN as vt,aO as _t,aP as Te,Y as X,aQ as yt,aR as Ye,aS as de,a7 as Ke,aT as bt,aU as kt,aV as Lt,aW as Je,ad as Xe,e as wt,aX as Ct,aY as St,aZ as qt,a_ as $t,a$ as Pt,c as Mt,w as Dt,b0 as Et,b1 as xt,b2 as Ot,b3 as Fe,b4 as et,b5 as It,b6 as At,b7 as Ge}from"./index.458653eb.js";import{u as xe,E as tt,a as st,b as nt}from"./EventDateViewOptions.aefddd1d.js";import{F as Bt,A as Tt}from"./AboutDialog.8cac993b.js";import"./EventDateCard.08077f7e.js";import"./QBtnDropdown.36e88f67.js";var Ze={exports:{}};(function(e,s){(function(a,h){h(s)})(ht,function(a){var h=L.MarkerClusterGroup=L.FeatureGroup.extend({options:{maxClusterRadius:80,iconCreateFunction:null,clusterPane:L.Marker.prototype.options.pane,spiderfyOnEveryZoom:!1,spiderfyOnMaxZoom:!0,showCoverageOnHover:!0,zoomToBoundsOnClick:!0,singleMarkerMode:!1,disableClusteringAtZoom:null,removeOutsideVisibleBounds:!0,animate:!0,animateAddingMarkers:!1,spiderfyShapePositions:null,spiderfyDistanceMultiplier:1,spiderLegPolylineOptions:{weight:1.5,color:"#222",opacity:.5},chunkedLoading:!1,chunkInterval:200,chunkDelay:50,chunkProgress:null,polygonOptions:{}},initialize:function(t){L.Util.setOptions(this,t),this.options.iconCreateFunction||(this.options.iconCreateFunction=this._defaultIconCreateFunction),this._featureGroup=L.featureGroup(),this._featureGroup.addEventParent(this),this._nonPointGroup=L.featureGroup(),this._nonPointGroup.addEventParent(this),this._inZoomAnimation=0,this._needsClustering=[],this._needsRemoving=[],this._currentShownBounds=null,this._queue=[],this._childMarkerEventHandlers={dragstart:this._childMarkerDragStart,move:this._childMarkerMoved,dragend:this._childMarkerDragEnd};var n=L.DomUtil.TRANSITION&&this.options.animate;L.extend(this,n?this._withAnimation:this._noAnimation),this._markerCluster=n?L.MarkerCluster:L.MarkerClusterNonAnimated},addLayer:function(t){if(t instanceof L.LayerGroup)return this.addLayers([t]);if(!t.getLatLng)return this._nonPointGroup.addLayer(t),this.fire("layeradd",{layer:t}),this;if(!this._map)return this._needsClustering.push(t),this.fire("layeradd",{layer:t}),this;if(this.hasLayer(t))return this;this._unspiderfy&&this._unspiderfy(),this._addLayer(t,this._maxZoom),this.fire("layeradd",{layer:t}),this._topClusterLevel._recalculateBounds(),this._refreshClustersIcons();var n=t,i=this._zoom;if(t.__parent)for(;n.__parent._zoom>=i;)n=n.__parent;return this._currentShownBounds.contains(n.getLatLng())&&(this.options.animateAddingMarkers?this._animationAddLayer(t,n):this._animationAddLayerNonAnimated(t,n)),this},removeLayer:function(t){return t instanceof L.LayerGroup?this.removeLayers([t]):t.getLatLng?this._map?t.__parent?(this._unspiderfy&&(this._unspiderfy(),this._unspiderfyLayer(t)),this._removeLayer(t,!0),this.fire("layerremove",{layer:t}),this._topClusterLevel._recalculateBounds(),this._refreshClustersIcons(),t.off(this._childMarkerEventHandlers,this),this._featureGroup.hasLayer(t)&&(this._featureGroup.removeLayer(t),t.clusterShow&&t.clusterShow()),this):this:(!this._arraySplice(this._needsClustering,t)&&this.hasLayer(t)&&this._needsRemoving.push({layer:t,latlng:t._latlng}),this.fire("layerremove",{layer:t}),this):(this._nonPointGroup.removeLayer(t),this.fire("layerremove",{layer:t}),this)},addLayers:function(t,n){if(!L.Util.isArray(t))return this.addLayer(t);var i=this._featureGroup,o=this._nonPointGroup,d=this.options.chunkedLoading,f=this.options.chunkInterval,m=this.options.chunkProgress,p=t.length,_=0,C=!0,w;if(this._map){var B=new Date().getTime(),M=L.bind(function(){var I=new Date().getTime();for(this._map&&this._unspiderfy&&this._unspiderfy();_<p;_++){if(d&&_%200===0){var V=new Date().getTime()-I;if(V>f)break}if(w=t[_],w instanceof L.LayerGroup){C&&(t=t.slice(),C=!1),this._extractNonGroupLayers(w,t),p=t.length;continue}if(!w.getLatLng){o.addLayer(w),n||this.fire("layeradd",{layer:w});continue}if(!this.hasLayer(w)&&(this._addLayer(w,this._maxZoom),n||this.fire("layeradd",{layer:w}),w.__parent&&w.__parent.getChildCount()===2)){var te=w.__parent.getAllChildMarkers(),dt=te[0]===w?te[1]:te[0];i.removeLayer(dt)}}m&&m(_,p,new Date().getTime()-B),_===p?(this._topClusterLevel._recalculateBounds(),this._refreshClustersIcons(),this._topClusterLevel._recursivelyAddChildrenToMap(null,this._zoom,this._currentShownBounds)):setTimeout(M,this.options.chunkDelay)},this);M()}else for(var R=this._needsClustering;_<p;_++){if(w=t[_],w instanceof L.LayerGroup){C&&(t=t.slice(),C=!1),this._extractNonGroupLayers(w,t),p=t.length;continue}if(!w.getLatLng){o.addLayer(w);continue}this.hasLayer(w)||R.push(w)}return this},removeLayers:function(t){var n,i,o=t.length,d=this._featureGroup,f=this._nonPointGroup,m=!0;if(!this._map){for(n=0;n<o;n++){if(i=t[n],i instanceof L.LayerGroup){m&&(t=t.slice(),m=!1),this._extractNonGroupLayers(i,t),o=t.length;continue}this._arraySplice(this._needsClustering,i),f.removeLayer(i),this.hasLayer(i)&&this._needsRemoving.push({layer:i,latlng:i._latlng}),this.fire("layerremove",{layer:i})}return this}if(this._unspiderfy){this._unspiderfy();var p=t.slice(),_=o;for(n=0;n<_;n++){if(i=p[n],i instanceof L.LayerGroup){this._extractNonGroupLayers(i,p),_=p.length;continue}this._unspiderfyLayer(i)}}for(n=0;n<o;n++){if(i=t[n],i instanceof L.LayerGroup){m&&(t=t.slice(),m=!1),this._extractNonGroupLayers(i,t),o=t.length;continue}if(!i.__parent){f.removeLayer(i),this.fire("layerremove",{layer:i});continue}this._removeLayer(i,!0,!0),this.fire("layerremove",{layer:i}),d.hasLayer(i)&&(d.removeLayer(i),i.clusterShow&&i.clusterShow())}return this._topClusterLevel._recalculateBounds(),this._refreshClustersIcons(),this._topClusterLevel._recursivelyAddChildrenToMap(null,this._zoom,this._currentShownBounds),this},clearLayers:function(){return this._map||(this._needsClustering=[],this._needsRemoving=[],delete this._gridClusters,delete this._gridUnclustered),this._noanimationUnspiderfy&&this._noanimationUnspiderfy(),this._featureGroup.clearLayers(),this._nonPointGroup.clearLayers(),this.eachLayer(function(t){t.off(this._childMarkerEventHandlers,this),delete t.__parent},this),this._map&&this._generateInitialClusters(),this},getBounds:function(){var t=new L.LatLngBounds;this._topClusterLevel&&t.extend(this._topClusterLevel._bounds);for(var n=this._needsClustering.length-1;n>=0;n--)t.extend(this._needsClustering[n].getLatLng());return t.extend(this._nonPointGroup.getBounds()),t},eachLayer:function(t,n){var i=this._needsClustering.slice(),o=this._needsRemoving,d,f,m;for(this._topClusterLevel&&this._topClusterLevel.getAllChildMarkers(i),f=i.length-1;f>=0;f--){for(d=!0,m=o.length-1;m>=0;m--)if(o[m].layer===i[f]){d=!1;break}d&&t.call(n,i[f])}this._nonPointGroup.eachLayer(t,n)},getLayers:function(){var t=[];return this.eachLayer(function(n){t.push(n)}),t},getLayer:function(t){var n=null;return t=parseInt(t,10),this.eachLayer(function(i){L.stamp(i)===t&&(n=i)}),n},hasLayer:function(t){if(!t)return!1;var n,i=this._needsClustering;for(n=i.length-1;n>=0;n--)if(i[n]===t)return!0;for(i=this._needsRemoving,n=i.length-1;n>=0;n--)if(i[n].layer===t)return!1;return!!(t.__parent&&t.__parent._group===this)||this._nonPointGroup.hasLayer(t)},zoomToShowLayer:function(t,n){var i=this._map;typeof n!="function"&&(n=function(){});var o=function(){(i.hasLayer(t)||i.hasLayer(t.__parent))&&!this._inZoomAnimation&&(this._map.off("moveend",o,this),this.off("animationend",o,this),i.hasLayer(t)?n():t.__parent._icon&&(this.once("spiderfied",n,this),t.__parent.spiderfy()))};t._icon&&this._map.getBounds().contains(t.getLatLng())?n():t.__parent._zoom<Math.round(this._map._zoom)?(this._map.on("moveend",o,this),this._map.panTo(t.getLatLng())):(this._map.on("moveend",o,this),this.on("animationend",o,this),t.__parent.zoomToBounds())},onAdd:function(t){this._map=t;var n,i,o;if(!isFinite(this._map.getMaxZoom()))throw"Map has no maxZoom specified";for(this._featureGroup.addTo(t),this._nonPointGroup.addTo(t),this._gridClusters||this._generateInitialClusters(),this._maxLat=t.options.crs.projection.MAX_LATITUDE,n=0,i=this._needsRemoving.length;n<i;n++)o=this._needsRemoving[n],o.newlatlng=o.layer._latlng,o.layer._latlng=o.latlng;for(n=0,i=this._needsRemoving.length;n<i;n++)o=this._needsRemoving[n],this._removeLayer(o.layer,!0),o.layer._latlng=o.newlatlng;this._needsRemoving=[],this._zoom=Math.round(this._map._zoom),this._currentShownBounds=this._getExpandedVisibleBounds(),this._map.on("zoomend",this._zoomEnd,this),this._map.on("moveend",this._moveEnd,this),this._spiderfierOnAdd&&this._spiderfierOnAdd(),this._bindEvents(),i=this._needsClustering,this._needsClustering=[],this.addLayers(i,!0)},onRemove:function(t){t.off("zoomend",this._zoomEnd,this),t.off("moveend",this._moveEnd,this),this._unbindEvents(),this._map._mapPane.className=this._map._mapPane.className.replace(" leaflet-cluster-anim",""),this._spiderfierOnRemove&&this._spiderfierOnRemove(),delete this._maxLat,this._hideCoverage(),this._featureGroup.remove(),this._nonPointGroup.remove(),this._featureGroup.clearLayers(),this._map=null},getVisibleParent:function(t){for(var n=t;n&&!n._icon;)n=n.__parent;return n||null},_arraySplice:function(t,n){for(var i=t.length-1;i>=0;i--)if(t[i]===n)return t.splice(i,1),!0},_removeFromGridUnclustered:function(t,n){for(var i=this._map,o=this._gridUnclustered,d=Math.floor(this._map.getMinZoom());n>=d&&o[n].removeObject(t,i.project(t.getLatLng(),n));n--);},_childMarkerDragStart:function(t){t.target.__dragStart=t.target._latlng},_childMarkerMoved:function(t){if(!this._ignoreMove&&!t.target.__dragStart){var n=t.target._popup&&t.target._popup.isOpen();this._moveChild(t.target,t.oldLatLng,t.latlng),n&&t.target.openPopup()}},_moveChild:function(t,n,i){t._latlng=n,this.removeLayer(t),t._latlng=i,this.addLayer(t)},_childMarkerDragEnd:function(t){var n=t.target.__dragStart;delete t.target.__dragStart,n&&this._moveChild(t.target,n,t.target._latlng)},_removeLayer:function(t,n,i){var o=this._gridClusters,d=this._gridUnclustered,f=this._featureGroup,m=this._map,p=Math.floor(this._map.getMinZoom());n&&this._removeFromGridUnclustered(t,this._maxZoom);var _=t.__parent,C=_._markers,w;for(this._arraySplice(C,t);_&&(_._childCount--,_._boundsNeedUpdate=!0,!(_._zoom<p));)n&&_._childCount<=1?(w=_._markers[0]===t?_._markers[1]:_._markers[0],o[_._zoom].removeObject(_,m.project(_._cLatLng,_._zoom)),d[_._zoom].addObject(w,m.project(w.getLatLng(),_._zoom)),this._arraySplice(_.__parent._childClusters,_),_.__parent._markers.push(w),w.__parent=_.__parent,_._icon&&(f.removeLayer(_),i||f.addLayer(w))):_._iconNeedsUpdate=!0,_=_.__parent;delete t.__parent},_isOrIsParent:function(t,n){for(;n;){if(t===n)return!0;n=n.parentNode}return!1},fire:function(t,n,i){if(n&&n.layer instanceof L.MarkerCluster){if(n.originalEvent&&this._isOrIsParent(n.layer._icon,n.originalEvent.relatedTarget))return;t="cluster"+t}L.FeatureGroup.prototype.fire.call(this,t,n,i)},listens:function(t,n){return L.FeatureGroup.prototype.listens.call(this,t,n)||L.FeatureGroup.prototype.listens.call(this,"cluster"+t,n)},_defaultIconCreateFunction:function(t){var n=t.getChildCount(),i=" marker-cluster-";return n<10?i+="small":n<100?i+="medium":i+="large",new L.DivIcon({html:"<div><span>"+n+"</span></div>",className:"marker-cluster"+i,iconSize:new L.Point(40,40)})},_bindEvents:function(){var t=this._map,n=this.options.spiderfyOnMaxZoom,i=this.options.showCoverageOnHover,o=this.options.zoomToBoundsOnClick,d=this.options.spiderfyOnEveryZoom;(n||o||d)&&this.on("clusterclick clusterkeypress",this._zoomOrSpiderfy,this),i&&(this.on("clustermouseover",this._showCoverage,this),this.on("clustermouseout",this._hideCoverage,this),t.on("zoomend",this._hideCoverage,this))},_zoomOrSpiderfy:function(t){var n=t.layer,i=n;if(!(t.type==="clusterkeypress"&&t.originalEvent&&t.originalEvent.keyCode!==13)){for(;i._childClusters.length===1;)i=i._childClusters[0];i._zoom===this._maxZoom&&i._childCount===n._childCount&&this.options.spiderfyOnMaxZoom?n.spiderfy():this.options.zoomToBoundsOnClick&&n.zoomToBounds(),this.options.spiderfyOnEveryZoom&&n.spiderfy(),t.originalEvent&&t.originalEvent.keyCode===13&&this._map._container.focus()}},_showCoverage:function(t){var n=this._map;this._inZoomAnimation||(this._shownPolygon&&n.removeLayer(this._shownPolygon),t.layer.getChildCount()>2&&t.layer!==this._spiderfied&&(this._shownPolygon=new L.Polygon(t.layer.getConvexHull(),this.options.polygonOptions),n.addLayer(this._shownPolygon)))},_hideCoverage:function(){this._shownPolygon&&(this._map.removeLayer(this._shownPolygon),this._shownPolygon=null)},_unbindEvents:function(){var t=this.options.spiderfyOnMaxZoom,n=this.options.showCoverageOnHover,i=this.options.zoomToBoundsOnClick,o=this.options.spiderfyOnEveryZoom,d=this._map;(t||i||o)&&this.off("clusterclick clusterkeypress",this._zoomOrSpiderfy,this),n&&(this.off("clustermouseover",this._showCoverage,this),this.off("clustermouseout",this._hideCoverage,this),d.off("zoomend",this._hideCoverage,this))},_zoomEnd:function(){!this._map||(this._mergeSplitClusters(),this._zoom=Math.round(this._map._zoom),this._currentShownBounds=this._getExpandedVisibleBounds())},_moveEnd:function(){if(!this._inZoomAnimation){var t=this._getExpandedVisibleBounds();this._topClusterLevel._recursivelyRemoveChildrenFromMap(this._currentShownBounds,Math.floor(this._map.getMinZoom()),this._zoom,t),this._topClusterLevel._recursivelyAddChildrenToMap(null,Math.round(this._map._zoom),t),this._currentShownBounds=t}},_generateInitialClusters:function(){var t=Math.ceil(this._map.getMaxZoom()),n=Math.floor(this._map.getMinZoom()),i=this.options.maxClusterRadius,o=i;typeof i!="function"&&(o=function(){return i}),this.options.disableClusteringAtZoom!==null&&(t=this.options.disableClusteringAtZoom-1),this._maxZoom=t,this._gridClusters={},this._gridUnclustered={};for(var d=t;d>=n;d--)this._gridClusters[d]=new L.DistanceGrid(o(d)),this._gridUnclustered[d]=new L.DistanceGrid(o(d));this._topClusterLevel=new this._markerCluster(this,n-1)},_addLayer:function(t,n){var i=this._gridClusters,o=this._gridUnclustered,d=Math.floor(this._map.getMinZoom()),f,m;for(this.options.singleMarkerMode&&this._overrideMarkerIcon(t),t.on(this._childMarkerEventHandlers,this);n>=d;n--){f=this._map.project(t.getLatLng(),n);var p=i[n].getNearObject(f);if(p){p._addChild(t),t.__parent=p;return}if(p=o[n].getNearObject(f),p){var _=p.__parent;_&&this._removeLayer(p,!1);var C=new this._markerCluster(this,n,p,t);i[n].addObject(C,this._map.project(C._cLatLng,n)),p.__parent=C,t.__parent=C;var w=C;for(m=n-1;m>_._zoom;m--)w=new this._markerCluster(this,m,w),i[m].addObject(w,this._map.project(p.getLatLng(),m));_._addChild(w),this._removeFromGridUnclustered(p,n);return}o[n].addObject(t,f)}this._topClusterLevel._addChild(t),t.__parent=this._topClusterLevel},_refreshClustersIcons:function(){this._featureGroup.eachLayer(function(t){t instanceof L.MarkerCluster&&t._iconNeedsUpdate&&t._updateIcon()})},_enqueue:function(t){this._queue.push(t),this._queueTimeout||(this._queueTimeout=setTimeout(L.bind(this._processQueue,this),300))},_processQueue:function(){for(var t=0;t<this._queue.length;t++)this._queue[t].call(this);this._queue.length=0,clearTimeout(this._queueTimeout),this._queueTimeout=null},_mergeSplitClusters:function(){var t=Math.round(this._map._zoom);this._processQueue(),this._zoom<t&&this._currentShownBounds.intersects(this._getExpandedVisibleBounds())?(this._animationStart(),this._topClusterLevel._recursivelyRemoveChildrenFromMap(this._currentShownBounds,Math.floor(this._map.getMinZoom()),this._zoom,this._getExpandedVisibleBounds()),this._animationZoomIn(this._zoom,t)):this._zoom>t?(this._animationStart(),this._animationZoomOut(this._zoom,t)):this._moveEnd()},_getExpandedVisibleBounds:function(){if(this.options.removeOutsideVisibleBounds){if(L.Browser.mobile)return this._checkBoundsMaxLat(this._map.getBounds())}else return this._mapBoundsInfinite;return this._checkBoundsMaxLat(this._map.getBounds().pad(1))},_checkBoundsMaxLat:function(t){var n=this._maxLat;return n!==void 0&&(t.getNorth()>=n&&(t._northEast.lat=1/0),t.getSouth()<=-n&&(t._southWest.lat=-1/0)),t},_animationAddLayerNonAnimated:function(t,n){if(n===t)this._featureGroup.addLayer(t);else if(n._childCount===2){n._addToMap();var i=n.getAllChildMarkers();this._featureGroup.removeLayer(i[0]),this._featureGroup.removeLayer(i[1])}else n._updateIcon()},_extractNonGroupLayers:function(t,n){var i=t.getLayers(),o=0,d;for(n=n||[];o<i.length;o++){if(d=i[o],d instanceof L.LayerGroup){this._extractNonGroupLayers(d,n);continue}n.push(d)}return n},_overrideMarkerIcon:function(t){var n=t.options.icon=this.options.iconCreateFunction({getChildCount:function(){return 1},getAllChildMarkers:function(){return[t]}});return n}});L.MarkerClusterGroup.include({_mapBoundsInfinite:new L.LatLngBounds(new L.LatLng(-1/0,-1/0),new L.LatLng(1/0,1/0))}),L.MarkerClusterGroup.include({_noAnimation:{_animationStart:function(){},_animationZoomIn:function(t,n){this._topClusterLevel._recursivelyRemoveChildrenFromMap(this._currentShownBounds,Math.floor(this._map.getMinZoom()),t),this._topClusterLevel._recursivelyAddChildrenToMap(null,n,this._getExpandedVisibleBounds()),this.fire("animationend")},_animationZoomOut:function(t,n){this._topClusterLevel._recursivelyRemoveChildrenFromMap(this._currentShownBounds,Math.floor(this._map.getMinZoom()),t),this._topClusterLevel._recursivelyAddChildrenToMap(null,n,this._getExpandedVisibleBounds()),this.fire("animationend")},_animationAddLayer:function(t,n){this._animationAddLayerNonAnimated(t,n)}},_withAnimation:{_animationStart:function(){this._map._mapPane.className+=" leaflet-cluster-anim",this._inZoomAnimation++},_animationZoomIn:function(t,n){var i=this._getExpandedVisibleBounds(),o=this._featureGroup,d=Math.floor(this._map.getMinZoom()),f;this._ignoreMove=!0,this._topClusterLevel._recursively(i,t,d,function(m){var p=m._latlng,_=m._markers,C;for(i.contains(p)||(p=null),m._isSingleParent()&&t+1===n?(o.removeLayer(m),m._recursivelyAddChildrenToMap(null,n,i)):(m.clusterHide(),m._recursivelyAddChildrenToMap(p,n,i)),f=_.length-1;f>=0;f--)C=_[f],i.contains(C._latlng)||o.removeLayer(C)}),this._forceLayout(),this._topClusterLevel._recursivelyBecomeVisible(i,n),o.eachLayer(function(m){!(m instanceof L.MarkerCluster)&&m._icon&&m.clusterShow()}),this._topClusterLevel._recursively(i,t,n,function(m){m._recursivelyRestoreChildPositions(n)}),this._ignoreMove=!1,this._enqueue(function(){this._topClusterLevel._recursively(i,t,d,function(m){o.removeLayer(m),m.clusterShow()}),this._animationEnd()})},_animationZoomOut:function(t,n){this._animationZoomOutSingle(this._topClusterLevel,t-1,n),this._topClusterLevel._recursivelyAddChildrenToMap(null,n,this._getExpandedVisibleBounds()),this._topClusterLevel._recursivelyRemoveChildrenFromMap(this._currentShownBounds,Math.floor(this._map.getMinZoom()),t,this._getExpandedVisibleBounds())},_animationAddLayer:function(t,n){var i=this,o=this._featureGroup;o.addLayer(t),n!==t&&(n._childCount>2?(n._updateIcon(),this._forceLayout(),this._animationStart(),t._setPos(this._map.latLngToLayerPoint(n.getLatLng())),t.clusterHide(),this._enqueue(function(){o.removeLayer(t),t.clusterShow(),i._animationEnd()})):(this._forceLayout(),i._animationStart(),i._animationZoomOutSingle(n,this._map.getMaxZoom(),this._zoom)))}},_animationZoomOutSingle:function(t,n,i){var o=this._getExpandedVisibleBounds(),d=Math.floor(this._map.getMinZoom());t._recursivelyAnimateChildrenInAndAddSelfToMap(o,d,n+1,i);var f=this;this._forceLayout(),t._recursivelyBecomeVisible(o,i),this._enqueue(function(){if(t._childCount===1){var m=t._markers[0];this._ignoreMove=!0,m.setLatLng(m.getLatLng()),this._ignoreMove=!1,m.clusterShow&&m.clusterShow()}else t._recursively(o,i,d,function(p){p._recursivelyRemoveChildrenFromMap(o,d,n+1)});f._animationEnd()})},_animationEnd:function(){this._map&&(this._map._mapPane.className=this._map._mapPane.className.replace(" leaflet-cluster-anim","")),this._inZoomAnimation--,this.fire("animationend")},_forceLayout:function(){L.Util.falseFn(document.body.offsetWidth)}}),L.markerClusterGroup=function(t){return new L.MarkerClusterGroup(t)};var u=L.MarkerCluster=L.Marker.extend({options:L.Icon.prototype.options,initialize:function(t,n,i,o){L.Marker.prototype.initialize.call(this,i?i._cLatLng||i.getLatLng():new L.LatLng(0,0),{icon:this,pane:t.options.clusterPane}),this._group=t,this._zoom=n,this._markers=[],this._childClusters=[],this._childCount=0,this._iconNeedsUpdate=!0,this._boundsNeedUpdate=!0,this._bounds=new L.LatLngBounds,i&&this._addChild(i),o&&this._addChild(o)},getAllChildMarkers:function(t,n){t=t||[];for(var i=this._childClusters.length-1;i>=0;i--)this._childClusters[i].getAllChildMarkers(t,n);for(var o=this._markers.length-1;o>=0;o--)n&&this._markers[o].__dragStart||t.push(this._markers[o]);return t},getChildCount:function(){return this._childCount},zoomToBounds:function(t){for(var n=this._childClusters.slice(),i=this._group._map,o=i.getBoundsZoom(this._bounds),d=this._zoom+1,f=i.getZoom(),m;n.length>0&&o>d;){d++;var p=[];for(m=0;m<n.length;m++)p=p.concat(n[m]._childClusters);n=p}o>d?this._group._map.setView(this._latlng,d):o<=f?this._group._map.setView(this._latlng,f+1):this._group._map.fitBounds(this._bounds,t)},getBounds:function(){var t=new L.LatLngBounds;return t.extend(this._bounds),t},_updateIcon:function(){this._iconNeedsUpdate=!0,this._icon&&this.setIcon(this)},createIcon:function(){return this._iconNeedsUpdate&&(this._iconObj=this._group.options.iconCreateFunction(this),this._iconNeedsUpdate=!1),this._iconObj.createIcon()},createShadow:function(){return this._iconObj.createShadow()},_addChild:function(t,n){this._iconNeedsUpdate=!0,this._boundsNeedUpdate=!0,this._setClusterCenter(t),t instanceof L.MarkerCluster?(n||(this._childClusters.push(t),t.__parent=this),this._childCount+=t._childCount):(n||this._markers.push(t),this._childCount++),this.__parent&&this.__parent._addChild(t,!0)},_setClusterCenter:function(t){this._cLatLng||(this._cLatLng=t._cLatLng||t._latlng)},_resetBounds:function(){var t=this._bounds;t._southWest&&(t._southWest.lat=1/0,t._southWest.lng=1/0),t._northEast&&(t._northEast.lat=-1/0,t._northEast.lng=-1/0)},_recalculateBounds:function(){var t=this._markers,n=this._childClusters,i=0,o=0,d=this._childCount,f,m,p,_;if(d!==0){for(this._resetBounds(),f=0;f<t.length;f++)p=t[f]._latlng,this._bounds.extend(p),i+=p.lat,o+=p.lng;for(f=0;f<n.length;f++)m=n[f],m._boundsNeedUpdate&&m._recalculateBounds(),this._bounds.extend(m._bounds),p=m._wLatLng,_=m._childCount,i+=p.lat*_,o+=p.lng*_;this._latlng=this._wLatLng=new L.LatLng(i/d,o/d),this._boundsNeedUpdate=!1}},_addToMap:function(t){t&&(this._backupLatlng=this._latlng,this.setLatLng(t)),this._group._featureGroup.addLayer(this)},_recursivelyAnimateChildrenIn:function(t,n,i){this._recursively(t,this._group._map.getMinZoom(),i-1,function(o){var d=o._markers,f,m;for(f=d.length-1;f>=0;f--)m=d[f],m._icon&&(m._setPos(n),m.clusterHide())},function(o){var d=o._childClusters,f,m;for(f=d.length-1;f>=0;f--)m=d[f],m._icon&&(m._setPos(n),m.clusterHide())})},_recursivelyAnimateChildrenInAndAddSelfToMap:function(t,n,i,o){this._recursively(t,o,n,function(d){d._recursivelyAnimateChildrenIn(t,d._group._map.latLngToLayerPoint(d.getLatLng()).round(),i),d._isSingleParent()&&i-1===o?(d.clusterShow(),d._recursivelyRemoveChildrenFromMap(t,n,i)):d.clusterHide(),d._addToMap()})},_recursivelyBecomeVisible:function(t,n){this._recursively(t,this._group._map.getMinZoom(),n,null,function(i){i.clusterShow()})},_recursivelyAddChildrenToMap:function(t,n,i){this._recursively(i,this._group._map.getMinZoom()-1,n,function(o){if(n!==o._zoom)for(var d=o._markers.length-1;d>=0;d--){var f=o._markers[d];!i.contains(f._latlng)||(t&&(f._backupLatlng=f.getLatLng(),f.setLatLng(t),f.clusterHide&&f.clusterHide()),o._group._featureGroup.addLayer(f))}},function(o){o._addToMap(t)})},_recursivelyRestoreChildPositions:function(t){for(var n=this._markers.length-1;n>=0;n--){var i=this._markers[n];i._backupLatlng&&(i.setLatLng(i._backupLatlng),delete i._backupLatlng)}if(t-1===this._zoom)for(var o=this._childClusters.length-1;o>=0;o--)this._childClusters[o]._restorePosition();else for(var d=this._childClusters.length-1;d>=0;d--)this._childClusters[d]._recursivelyRestoreChildPositions(t)},_restorePosition:function(){this._backupLatlng&&(this.setLatLng(this._backupLatlng),delete this._backupLatlng)},_recursivelyRemoveChildrenFromMap:function(t,n,i,o){var d,f;this._recursively(t,n-1,i-1,function(m){for(f=m._markers.length-1;f>=0;f--)d=m._markers[f],(!o||!o.contains(d._latlng))&&(m._group._featureGroup.removeLayer(d),d.clusterShow&&d.clusterShow())},function(m){for(f=m._childClusters.length-1;f>=0;f--)d=m._childClusters[f],(!o||!o.contains(d._latlng))&&(m._group._featureGroup.removeLayer(d),d.clusterShow&&d.clusterShow())})},_recursively:function(t,n,i,o,d){var f=this._childClusters,m=this._zoom,p,_;if(n<=m&&(o&&o(this),d&&m===i&&d(this)),m<n||m<i)for(p=f.length-1;p>=0;p--)_=f[p],_._boundsNeedUpdate&&_._recalculateBounds(),t.intersects(_._bounds)&&_._recursively(t,n,i,o,d)},_isSingleParent:function(){return this._childClusters.length>0&&this._childClusters[0]._childCount===this._childCount}});L.Marker.include({clusterHide:function(){var t=this.options.opacity;return this.setOpacity(0),this.options.opacity=t,this},clusterShow:function(){return this.setOpacity(this.options.opacity)}}),L.DistanceGrid=function(t){this._cellSize=t,this._sqCellSize=t*t,this._grid={},this._objectPoint={}},L.DistanceGrid.prototype={addObject:function(t,n){var i=this._getCoord(n.x),o=this._getCoord(n.y),d=this._grid,f=d[o]=d[o]||{},m=f[i]=f[i]||[],p=L.Util.stamp(t);this._objectPoint[p]=n,m.push(t)},updateObject:function(t,n){this.removeObject(t),this.addObject(t,n)},removeObject:function(t,n){var i=this._getCoord(n.x),o=this._getCoord(n.y),d=this._grid,f=d[o]=d[o]||{},m=f[i]=f[i]||[],p,_;for(delete this._objectPoint[L.Util.stamp(t)],p=0,_=m.length;p<_;p++)if(m[p]===t)return m.splice(p,1),_===1&&delete f[i],!0},eachObject:function(t,n){var i,o,d,f,m,p,_,C=this._grid;for(i in C){m=C[i];for(o in m)for(p=m[o],d=0,f=p.length;d<f;d++)_=t.call(n,p[d]),_&&(d--,f--)}},getNearObject:function(t){var n=this._getCoord(t.x),i=this._getCoord(t.y),o,d,f,m,p,_,C,w,B=this._objectPoint,M=this._sqCellSize,R=null;for(o=i-1;o<=i+1;o++)if(m=this._grid[o],m){for(d=n-1;d<=n+1;d++)if(p=m[d],p)for(f=0,_=p.length;f<_;f++)C=p[f],w=this._sqDist(B[L.Util.stamp(C)],t),(w<M||w<=M&&R===null)&&(M=w,R=C)}return R},_getCoord:function(t){var n=Math.floor(t/this._cellSize);return isFinite(n)?n:t},_sqDist:function(t,n){var i=n.x-t.x,o=n.y-t.y;return i*i+o*o}},function(){L.QuickHull={getDistant:function(t,n){var i=n[1].lat-n[0].lat,o=n[0].lng-n[1].lng;return o*(t.lat-n[0].lat)+i*(t.lng-n[0].lng)},findMostDistantPointFromBaseLine:function(t,n){var i=0,o=null,d=[],f,m,p;for(f=n.length-1;f>=0;f--){if(m=n[f],p=this.getDistant(m,t),p>0)d.push(m);else continue;p>i&&(i=p,o=m)}return{maxPoint:o,newPoints:d}},buildConvexHull:function(t,n){var i=[],o=this.findMostDistantPointFromBaseLine(t,n);return o.maxPoint?(i=i.concat(this.buildConvexHull([t[0],o.maxPoint],o.newPoints)),i=i.concat(this.buildConvexHull([o.maxPoint,t[1]],o.newPoints)),i):[t[0]]},getConvexHull:function(t){var n=!1,i=!1,o=!1,d=!1,f=null,m=null,p=null,_=null,C=null,w=null,B;for(B=t.length-1;B>=0;B--){var M=t[B];(n===!1||M.lat>n)&&(f=M,n=M.lat),(i===!1||M.lat<i)&&(m=M,i=M.lat),(o===!1||M.lng>o)&&(p=M,o=M.lng),(d===!1||M.lng<d)&&(_=M,d=M.lng)}i!==n?(w=m,C=f):(w=_,C=p);var R=[].concat(this.buildConvexHull([w,C],t),this.buildConvexHull([C,w],t));return R}}}(),L.MarkerCluster.include({getConvexHull:function(){var t=this.getAllChildMarkers(),n=[],i,o;for(o=t.length-1;o>=0;o--)i=t[o].getLatLng(),n.push(i);return L.QuickHull.getConvexHull(n)}}),L.MarkerCluster.include({_2PI:Math.PI*2,_circleFootSeparation:25,_circleStartAngle:0,_spiralFootSeparation:28,_spiralLengthStart:11,_spiralLengthFactor:5,_circleSpiralSwitchover:9,spiderfy:function(){if(!(this._group._spiderfied===this||this._group._inZoomAnimation)){var t=this.getAllChildMarkers(null,!0),n=this._group,i=n._map,o=i.latLngToLayerPoint(this._latlng),d;this._group._unspiderfy(),this._group._spiderfied=this,this._group.options.spiderfyShapePositions?d=this._group.options.spiderfyShapePositions(t.length,o):t.length>=this._circleSpiralSwitchover?d=this._generatePointsSpiral(t.length,o):(o.y+=10,d=this._generatePointsCircle(t.length,o)),this._animationSpiderfy(t,d)}},unspiderfy:function(t){this._group._inZoomAnimation||(this._animationUnspiderfy(t),this._group._spiderfied=null)},_generatePointsCircle:function(t,n){var i=this._group.options.spiderfyDistanceMultiplier*this._circleFootSeparation*(2+t),o=i/this._2PI,d=this._2PI/t,f=[],m,p;for(o=Math.max(o,35),f.length=t,m=0;m<t;m++)p=this._circleStartAngle+m*d,f[m]=new L.Point(n.x+o*Math.cos(p),n.y+o*Math.sin(p))._round();return f},_generatePointsSpiral:function(t,n){var i=this._group.options.spiderfyDistanceMultiplier,o=i*this._spiralLengthStart,d=i*this._spiralFootSeparation,f=i*this._spiralLengthFactor*this._2PI,m=0,p=[],_;for(p.length=t,_=t;_>=0;_--)_<t&&(p[_]=new L.Point(n.x+o*Math.cos(m),n.y+o*Math.sin(m))._round()),m+=d/o+_*5e-4,o+=f/m;return p},_noanimationUnspiderfy:function(){var t=this._group,n=t._map,i=t._featureGroup,o=this.getAllChildMarkers(null,!0),d,f;for(t._ignoreMove=!0,this.setOpacity(1),f=o.length-1;f>=0;f--)d=o[f],i.removeLayer(d),d._preSpiderfyLatlng&&(d.setLatLng(d._preSpiderfyLatlng),delete d._preSpiderfyLatlng),d.setZIndexOffset&&d.setZIndexOffset(0),d._spiderLeg&&(n.removeLayer(d._spiderLeg),delete d._spiderLeg);t.fire("unspiderfied",{cluster:this,markers:o}),t._ignoreMove=!1,t._spiderfied=null}}),L.MarkerClusterNonAnimated=L.MarkerCluster.extend({_animationSpiderfy:function(t,n){var i=this._group,o=i._map,d=i._featureGroup,f=this._group.options.spiderLegPolylineOptions,m,p,_,C;for(i._ignoreMove=!0,m=0;m<t.length;m++)C=o.layerPointToLatLng(n[m]),p=t[m],_=new L.Polyline([this._latlng,C],f),o.addLayer(_),p._spiderLeg=_,p._preSpiderfyLatlng=p._latlng,p.setLatLng(C),p.setZIndexOffset&&p.setZIndexOffset(1e6),d.addLayer(p);this.setOpacity(.3),i._ignoreMove=!1,i.fire("spiderfied",{cluster:this,markers:t})},_animationUnspiderfy:function(){this._noanimationUnspiderfy()}}),L.MarkerCluster.include({_animationSpiderfy:function(t,n){var i=this,o=this._group,d=o._map,f=o._featureGroup,m=this._latlng,p=d.latLngToLayerPoint(m),_=L.Path.SVG,C=L.extend({},this._group.options.spiderLegPolylineOptions),w=C.opacity,B,M,R,I,V,te;for(w===void 0&&(w=L.MarkerClusterGroup.prototype.options.spiderLegPolylineOptions.opacity),_?(C.opacity=0,C.className=(C.className||"")+" leaflet-cluster-spider-leg"):C.opacity=w,o._ignoreMove=!0,B=0;B<t.length;B++)M=t[B],te=d.layerPointToLatLng(n[B]),R=new L.Polyline([m,te],C),d.addLayer(R),M._spiderLeg=R,_&&(I=R._path,V=I.getTotalLength()+.1,I.style.strokeDasharray=V,I.style.strokeDashoffset=V),M.setZIndexOffset&&M.setZIndexOffset(1e6),M.clusterHide&&M.clusterHide(),f.addLayer(M),M._setPos&&M._setPos(p);for(o._forceLayout(),o._animationStart(),B=t.length-1;B>=0;B--)te=d.layerPointToLatLng(n[B]),M=t[B],M._preSpiderfyLatlng=M._latlng,M.setLatLng(te),M.clusterShow&&M.clusterShow(),_&&(R=M._spiderLeg,I=R._path,I.style.strokeDashoffset=0,R.setStyle({opacity:w}));this.setOpacity(.3),o._ignoreMove=!1,setTimeout(function(){o._animationEnd(),o.fire("spiderfied",{cluster:i,markers:t})},200)},_animationUnspiderfy:function(t){var n=this,i=this._group,o=i._map,d=i._featureGroup,f=t?o._latLngToNewLayerPoint(this._latlng,t.zoom,t.center):o.latLngToLayerPoint(this._latlng),m=this.getAllChildMarkers(null,!0),p=L.Path.SVG,_,C,w,B,M,R;for(i._ignoreMove=!0,i._animationStart(),this.setOpacity(1),C=m.length-1;C>=0;C--)_=m[C],_._preSpiderfyLatlng&&(_.closePopup(),_.setLatLng(_._preSpiderfyLatlng),delete _._preSpiderfyLatlng,R=!0,_._setPos&&(_._setPos(f),R=!1),_.clusterHide&&(_.clusterHide(),R=!1),R&&d.removeLayer(_),p&&(w=_._spiderLeg,B=w._path,M=B.getTotalLength()+.1,B.style.strokeDashoffset=M,w.setStyle({opacity:0})));i._ignoreMove=!1,setTimeout(function(){var I=0;for(C=m.length-1;C>=0;C--)_=m[C],_._spiderLeg&&I++;for(C=m.length-1;C>=0;C--)_=m[C],_._spiderLeg&&(_.clusterShow&&_.clusterShow(),_.setZIndexOffset&&_.setZIndexOffset(0),I>1&&d.removeLayer(_),o.removeLayer(_._spiderLeg),delete _._spiderLeg);i._animationEnd(),i.fire("unspiderfied",{cluster:n,markers:m})},200)}}),L.MarkerClusterGroup.include({_spiderfied:null,unspiderfy:function(){this._unspiderfy.apply(this,arguments)},_spiderfierOnAdd:function(){this._map.on("click",this._unspiderfyWrapper,this),this._map.options.zoomAnimation&&this._map.on("zoomstart",this._unspiderfyZoomStart,this),this._map.on("zoomend",this._noanimationUnspiderfy,this),L.Browser.touch||this._map.getRenderer(this)},_spiderfierOnRemove:function(){this._map.off("click",this._unspiderfyWrapper,this),this._map.off("zoomstart",this._unspiderfyZoomStart,this),this._map.off("zoomanim",this._unspiderfyZoomAnim,this),this._map.off("zoomend",this._noanimationUnspiderfy,this),this._noanimationUnspiderfy()},_unspiderfyZoomStart:function(){!this._map||this._map.on("zoomanim",this._unspiderfyZoomAnim,this)},_unspiderfyZoomAnim:function(t){L.DomUtil.hasClass(this._map._mapPane,"leaflet-touching")||(this._map.off("zoomanim",this._unspiderfyZoomAnim,this),this._unspiderfy(t))},_unspiderfyWrapper:function(){this._unspiderfy()},_unspiderfy:function(t){this._spiderfied&&this._spiderfied.unspiderfy(t)},_noanimationUnspiderfy:function(){this._spiderfied&&this._spiderfied._noanimationUnspiderfy()},_unspiderfyLayer:function(t){t._spiderLeg&&(this._featureGroup.removeLayer(t),t.clusterShow&&t.clusterShow(),t.setZIndexOffset&&t.setZIndexOffset(0),this._map.removeLayer(t._spiderLeg),delete t._spiderLeg)}}),L.MarkerClusterGroup.include({refreshClusters:function(t){return t?t instanceof L.MarkerClusterGroup?t=t._topClusterLevel.getAllChildMarkers():t instanceof L.LayerGroup?t=t._layers:t instanceof L.MarkerCluster?t=t.getAllChildMarkers():t instanceof L.Marker&&(t=[t]):t=this._topClusterLevel.getAllChildMarkers(),this._flagParentsIconsNeedUpdate(t),this._refreshClustersIcons(),this.options.singleMarkerMode&&this._refreshSingleMarkerModeMarkers(t),this},_flagParentsIconsNeedUpdate:function(t){var n,i;for(n in t)for(i=t[n].__parent;i;)i._iconNeedsUpdate=!0,i=i.__parent},_refreshSingleMarkerModeMarkers:function(t){var n,i;for(n in t)i=t[n],this.hasLayer(i)&&i.setIcon(this._overrideMarkerIcon(i))}}),L.Marker.include({refreshIconOptions:function(t,n){var i=this.options.icon;return L.setOptions(i,t),this.setIcon(i),n&&this.__parent&&this.__parent._group.refreshClusters(this),this}}),a.MarkerClusterGroup=h,a.MarkerCluster=u,Object.defineProperty(a,"__esModule",{value:!0})})})(Ze,Ze.exports);L.TileLayer.ColorFilter=L.TileLayer.extend({intialize:function(e,s){L.TileLayer.prototype.initialize.call(this,e,s)},colorFilter:function(){var e=["blur:px","brightness:%","bright:brightness:%","bri:brightness:%","contrast:%","con:contrast:%","grayscale:%","gray:grayscale:%","hue-rotate:deg","hue:hue-rotate:deg","hue-rotation:hue-rotate:deg","invert:%","inv:invert:%","opacity:%","op:opacity:%","saturate:%","saturation:saturate:%","sat:saturate:%","sepia:%","sep:sepia:%"];return(this.options.filter?this.options.filter:[]).map(function(s){var a=s.toLowerCase().split(":");if(a.length===2){var h=e.find(function(u){return u.split(":")[0]===a[0]});if(h)return h=h.split(":"),a[1]+=/^\d+$/.test(a[1])?h[h.length-1]:"","".concat(h[h.length-2],"(").concat(a[1],")")}return""}).join(" ")},_initContainer:function(){L.TileLayer.prototype._initContainer.call(this),this._container.style.filter=this.colorFilter()},updateFilter:function(e){this.options.filter=e,this._container&&(this._container.style.filter=this.colorFilter())}}),L.tileLayer.colorFilter=function(e,s){return new L.TileLayer.ColorFilter(e,s)};const Rt={name:"EventSelectionComponent",components:{},watch:{},props:{data:Object},data(){return{}},methods:{show(){this.$refs.dialog.show()},hide(){this.$refs.dialog.hide()},showEventPage(e){this.focusMarker={lat:this.data.lat,lng:this.data.lng},this.$router.push({name:"EventPage",params:{id:e.event_id,eventDateId:e.event_date_id},query:{name:e.name.replace(/ /g,"_")}})}},computed:{...O(ee,["focusMarker"]),consolidatedList(){var e=[];if(this.data.events)for(var s of this.data.events)e.findIndex(a=>a.event_id===s.event_id)===-1&&e.push(s);return e}}};function Nt(e,s,a,h,u,t){return r(),b(qe,{ref:"dialog"},{default:c(()=>[l(We,{class:"q-dialog-plugin dialog-card"},{default:c(()=>[a.data&&a.data.events?(r(),b(J,{key:0,bordered:"",separator:""},{default:c(()=>[l(T,{header:""},{default:c(()=>[D($(e.$t("event.events_at"))+" "+$(a.data.name),1)]),_:1}),l(ie),(r(!0),g(H,null,U(t.consolidatedList,(n,i)=>F((r(),b(N,{clickable:"",class:"event q-pa-md",key:i,onClick:o=>t.showEventPage(n)},{default:c(()=>[l(x,null,{default:c(()=>[l(T,null,{default:c(()=>[D($(n.name),1)]),_:2},1024)]),_:2},1024)]),_:2},1032,["onClick"])),[[ue]])),128))]),_:1})):y("",!0)]),_:1})]),_:1},512)}var zt=Z(Rt,[["render",Nt]]);const ke=ct("nearby",{state:()=>({loadingEverything:!1,queryRadius:null,nearbyTags:[],nearbyTagsHasNext:!0,nearbyTagsPage:1,nearbyTagsSuccess:!1,nearbyArtists:[],nearbyArtistsHasNext:!0,nearbyArtistsPage:1,nearbyArtistsSuccess:!1,nearbyEventDates:[],nearbyEventDatesHasNext:!0,nearbyEventDatesPage:1,nearbyEventDatesSuccess:!1,eventDatesRequestId:null,eventDates:[],eventDatesHasNext:!0,eventDatesPage:1,eventDatesPages:1}),getters:{},actions:{async loadEverything(){const e=ce(),s=j();this.loadingEverything=!0,this.nearbyArtistsPage=1,this.nearbyEventDatesPage=1,this.nearbyTagsPage=1,this.eventDatesPage=1,this.nearbyArtists=[],this.nearbyTags=[],this.nearbyEventDates=[],this.eventDates=[];const a=A();a.userLocation&&await this.loadNearbyEventDates();try{if(a.userLocation?await Promise.all([this.loadNearbyArtists(),this.loadNearbyTags(),this.loadEventDates(),e.currentUser?s.loadUserEventDates("all","future"):void 0]):await Promise.all([this.loadEventDates(),e.currentUser?s.loadUserEventDates("all","future"):void 0]),this.nearbyArtists.length<6||this.nearbyTags.length<10||!a.userLocation){const h=j();this.nearbyArtists.length<6&&await h.loadArtistOptions(),this.nearbyTags.length<10&&await h.loadTagOptions()}this.loadingEverything=!1}catch{this.loadingEverything=!1}},async loadNearbyTags(){const e=A();try{const s=await mt({date_min:S().toISOString(),date_max:null,page:this.nearbyTagsPage,per_page:20,desc:!0,sort:"count",location:JSON.stringify(e.userLocation),radius:this.queryRadius?this.queryRadius:void 0});return this.nearbyTags=this.nearbyTags.concat(s.data.items),this.nearbyTagsHasNext=s.data.has_next,this.nearbyTagsPage+=1,this.nearbyTagsSuccess=!0,Promise.resolve()}catch(s){throw s}},async loadNearbyArtists(){const e=A();try{const s=await pt({date_min:S().toISOString(),date_max:null,page:this.nearbyArtistsPage,per_page:15,location:JSON.stringify(e.userLocation),radius:this.queryRadius,sort:"event_count",desc:!0});return this.nearbyArtists=this.nearbyArtists.concat(s.data.items),this.nearbyArtistsHasNext=s.data.has_next,this.nearbyArtistsPage+=1,this.nearbyArtistsSuccess=!0,Promise.resolve()}catch(s){throw s}},setMapBoundsNearby(){const e=this.nearbyEventDates.map(a=>{var h,u,t,n;return(u=(h=a==null?void 0:a[0])==null?void 0:h.location)!=null&&u.lat?{lat:(t=a==null?void 0:a[0])==null?void 0:t.location.lat,lng:(n=a==null?void 0:a[0])==null?void 0:n.location.lng}:{lat:void 0,lng:void 0}}),s=ee();if(s.map){const a=z.latLngBounds(e);k(s.map).fitBounds(a)}},async loadNearbyEventDates(){const e=A();try{const s=await Ve({location:JSON.stringify(e.userLocation),date_min:S().toISOString(),date_max:null,radius:this.queryRadius,page:this.nearbyEventDatesPage,per_page:20,distinct:!0});this.nearbyEventDatesPage===1?this.nearbyEventDates=s.data.items:this.nearbyEventDates=this.nearbyEventDates.concat(s.data.items),this.nearbyEventDatesPage===1&&s.data.radius&&(this.queryRadius=s.data.radius),this.nearbyEventDatesHasNext=s.data.has_next,this.nearbyEventDatesPage+=1,this.nearbyArtistsSuccess=!0,e.userLocationFromSearch||this.setMapBoundsNearby();return}catch(s){throw s}},async loadEventDates(){A();try{const e=Math.random();this.eventDatesRequestId=e;const s=await Ve({date_min:S().toISOString(),date_max:null,page:this.eventDatesPage,per_page:10,distinct:!0});if(this.eventDatesRequestId===e){this.eventDatesPage===1?this.eventDates=s.data.items:this.eventDates=this.eventDates.concat(s.data.items),this.eventDatesHasNext=s.data.has_next,this.eventDatesPage+=1;return}else return}catch(e){throw e}}}});const Ut={components:{},props:[],data(){return{markersLoaded:!1,zoom:3,focusMarkerLayer:z.featureGroup(),eventDateHoverLayer:z.featureGroup(),userLocationMarkerLayer:z.featureGroup(),withPopup:z.latLng(47.41322,-1.219482),withTooltip:z.latLng(47.41422,-1.250482),currentZoom:11.5,mapOptions:{zoom:1,zoomControl:!0,minZoom:2,maxZoom:14,maxBounds:z.latLngBounds([[-90,-180],[90,220]]),maxBoundsViscosity:.5,worldCopyJump:!1,preferCanvas:!0},clusterOptions:{chunkedLoading:!0},tileLayer:null,labelLayer:null,mapMarkers:null,mapMarkersPermanentTooltip:null,satelliteMapOpacity:1,satelliteLabelLayerOpacity:.9,monochromeMapOpactiy:.68,windowHeight:0,clientHeight:0,windowWidth:0}},created(){this.debouncedClearMarkersAndLoadPoints=le.debounce(this.clearMarkersAndLoadPoints,300,{leading:!1,trailing:!0}),this.debouncedInvalidateMapSize=le.debounce(this.invalidateMapSize,500,{leading:!1,trailing:!0})},watch:{peekMap(e,s){this.$route.name==="EventPage"&&this.fitBoundsForFocusMarker()},sidebarPanel(e,s){var a,h;(e==="explore"&&s==="nearby"||e==="nearby"&&s==="explore")&&(((a=this.nearbyEventsDates)==null?void 0:a.length)>0,((h=this.userLocation)==null?void 0:h.lat)&&!this.userLocationFromSearch&&this.$q.screen.gt.xs&&e==="nearby"&&this.fitBoundsForExplorePage(this.userLocation))},darkMode(){this.initTileLayers()},windowHeight(){this.invalidateMapSize()},controlDateRange:{handler(){this.debouncedClearMarkersAndLoadPoints()},deep:!1},controlDuration:{handler(){this.debouncedClearMarkersAndLoadPoints()},deep:!0},controlSize:{handler(){this.debouncedClearMarkersAndLoadPoints()},deep:!0},controlFavorite:{handler(){this.debouncedClearMarkersAndLoadPoints()}},controlArtist:{handler(){this.debouncedClearMarkersAndLoadPoints()},deep:!0},controlTag:{handler(){this.debouncedClearMarkersAndLoadPoints()},deep:!0},controlCountry:{handler(){this.debouncedClearMarkersAndLoadPoints()}},controlRegion:{handler(){this.debouncedClearMarkersAndLoadPoints()}},controlLocality:{handler(){this.debouncedClearMarkersAndLoadPoints()}},userLocation:{handler:function(e){this.fitBoundsForExplorePage(e),!this.userLocationFromSearch&&this.fineLocation&&this.addUserLocationMarker(e),setTimeout(()=>{this.blockUpdates||(this.exploreMapView={latlng:this.map.getCenter(),zoom:this.map.getZoom()})},500)}},route:{handler:function(e,s){k(this.map)&&(s.name==="EventPage"&&(this.peekMap=!1),e.name==="EventPage"?(this.mapMarkers&&k(this.map).hasLayer(k(this.mapMarkers))&&k(this.mapMarkers).remove(),this.eventDateHoverLayer&&k(this.map).hasLayer(k(this.eventDateHoverLayer))&&(k(this.eventDateHoverLayer).clearLayers(),k(this.eventDateHoverLayer).remove())):s.name==="Explore"?this.exploreMapView={latlng:this.map.getCenter(),zoom:this.map.getZoom()}:e.name==="Explore"&&(this.exploreMapView&&k(this.map).setView(this.exploreMapView.latlng,this.exploreMapView.zoom),this.mapStyle==="satellite"?k(this.tileLayer).setOpacity(this.satelliteMapOpacity):this.mapStyle==="transport"?k(this.tileLayer).setOpacity(1):k(this.tileLayer).setOpacity(this.monochromeMapOpactiy),this.focusMarkerLayer&&k(this.map).hasLayer(k(this.focusMarkerLayer))&&(this.focusMarkerLayer.clearLayers(),this.focusMarkerLayer.remove()),this.eventDateHoverLayer&&k(this.map).hasLayer(k(this.eventDateHoverLayer))&&(this.eventDateHoverLayer.clearLayers(),this.eventDateHoverLayer.remove()),k(this.mapMarkers)?k(this.mapMarkers).addTo(k(this.map)):this.clearMarkersAndLoadPoints()))}},focusMarker:{handler:function(e){console.log("focus",e),e!==null&&(this.blockUpdates=!0,e.lat&&e.lng&&(this.exploreMapView={latlng:k(this.map).getCenter(),zoom:k(this.map).getZoom()},this.setMarkerFocusForEventPage(e)))}},eventDateHoverMarker:function(e){if(k(this.eventDateHoverLayer).unbindTooltip(),k(this.eventDateHoverLayer).clearLayers(),e!==null&&k(this.map)){var s=[z.marker([e.lat,e.lng],{icon:this.defaultIcon,zIndexOffset:6e3})];this.eventDateHoverLayer=z.featureGroup(s).bindTooltip(e.name,{direction:"top",permanent:!0,className:"hoverToolTip"}).addTo(k(this.map))}},mapMoving:function(e){this.$nextTick(()=>{e===!1&&this.$route.name==="Explore"&&(this.blockUpdates=!1)})},mapStyle:function(){this.initTileLayers()},points:function(){this.$route.name==="Explore"&&this.initMarkers()}},methods:{...K(A,["getFineLocation"]),...K(j,["loadPoints"]),...K(ke,["setMapBoundsNearby"]),addUserLocationMarker(e){this.userLocationMarkerLayer&&k(this.map).hasLayer(k(this.userLocationMarkerLayer))&&(this.userLocationMarkerLayer.clearLayers(),this.userLocationMarkerLayer.remove());var s=[z.marker(e,{icon:this.locationIcon,zIndexOffset:5e3})];this.userLocationMarkerLayer=z.featureGroup(s),this.userLocationMarkerLayer.addTo(k(this.map))},async locateMe(){try{await this.getFineLocation(),this.fitBoundsForExplorePage(this.userLocation)}catch{this.fitBoundsForExplorePage(this.userLocation)}},goBack(){this.routerHistory.length>0?this.$router.go(-1):this.$router.push({name:"Explore"})},handleWheel(e){if(this.preventMapZoom)return e.stopImmediatePropagation(),!1;if(!this.preventMapZoom)return this.showPanel=!1,this.sidebarPanel!=="explore"&&(this.sidebarPanel="explore"),!1},clearMarkersAndLoadPoints(){var e,s;this.mapMarkers!==null&&((e=k(this.map))==null||e.removeLayer(k(this.mapMarkers)),this.mapMarkers.clearLayers()),this.mapMarkersPermanentTooltip!==null&&((s=k(this.map))==null||s.removeLayer(k(this.mapMarkersPermanentTooltip)),this.mapMarkersPermanentTooltip.clearLayers()),this.loadPoints()},fitBoundsForFocusMarker(){var e=k(this.map).getZoom();e<=4&&(e=4);var s=this.windowHeight,a=this.windowHeight-s/3+28,h=0;const u=k(this.focusMarkerLayer).getBounds();this.peekMap?k(this.map).fitBounds(u,{paddingTopLeft:[0,-128],animate:!0,duration:.3,easeLinearity:1,maxZoom:10}):k(this.map).fitBounds(u,{paddingBottomRight:[h,a],animate:!0,maxZoom:e})},fitBoundsForExplorePage(e){var s=z.latLng(e);this.$q.screen.gt.xs?this.sidebarExpanded?k(this.map).fitBounds(z.latLngBounds(s,s),{paddingTopLeft:[1e3,0],animate:!0,duration:.3,easeLinearity:1,maxZoom:10}):k(this.map).fitBounds(z.latLngBounds(s,s),{paddingTopLeft:[580,0],animate:!0,duration:.3,easeLinearity:1,maxZoom:10}):k(this.map).fitBounds(z.latLngBounds(s,s),{paddingTopLeft:[0,-150],animate:!0,duration:.3,easeLinearity:1,maxZoom:10})},invalidateMapSize(){setTimeout(()=>{k(this.map).invalidateSize()},1e3)},showEventPageForMarker(e){this.focusMarker={lat:e.lat,lng:e.lng},e.events[0]&&this.$router.push({name:"EventPage",params:{id:e.events[0].event_id,eventDateId:e.events[0].event_date_id},query:{name:e.events[0].name.replace(/ /g,"_")}})},clickMarker(e){var s=e.target;s.data.events.length>1?this.$q.dialog({component:zt,parent:this,componentProps:{data:s.data}}):this.showEventPageForMarker(s.data)},setBounds(e){if(this.$q.screen.gt.xs){var h=this.map.getPixelBounds().getBottomLeft(),s=document.getElementById("sidebar"),a=s.getBoundingClientRect().width,h=this.map.getPixelBounds().getBottomLeft();h=h.add(z.point(a,0));var u=this.map.unproject(h);e=z.latLngBounds(u,this.map.getBounds().getNorthEast())}else{var h=this.map.getPixelBounds().getBottomLeft();const n="276";h=h.subtract(z.point(0,n));var u=k(this.map).unproject(h);e=z.latLngBounds(u,k(this.map).getBounds().getNorthEast())}this.mapBounds=e,this.mapCenter=e},setMarkerFocusForEventPage(e,s){var h;(h=k(this.mapMarkers))==null||h.remove();var a=[z.marker(e,{icon:this.defaultIcon,zIndexOffset:1e3}).on("click",this.clickMarker)];this.focusMarkerLayer.clearLayers(),this.focusMarkerLayer=z.featureGroup(a),this.focusMarkerLayer.addTo(k(this.map)),this.fitBoundsForFocusMarker()},initMap(){this.map=z.map(this.$refs.map,this.mapOptions).setView([53.9,27.6],3),this.focusMarker!==null&&(this.blockUpdates=!0,this.focusMarker.lat&&this.focusMarker.lng&&(this.exploreMapView={latlng:k(this.map).getCenter(),zoom:k(this.map).getZoom()},this.setMarkerFocusForEventPage(newval))),this.initTileLayers(),!this.userLocationFromSearch&&this.fineLocation&&this.addUserLocationMarker(this.userLocation),k(this.map).on("click",()=>{this.$route.name==="EventPage"&&(this.peekMap?this.peekMap=!1:this.goBack())}),k(this.map).on("mousedown",()=>{this.$route.name==="Explore"&&(this.sidebarPanel!=="explore"&&this.sidebarPanel!=="favorites"&&(this.sidebarPanel="explore"),this.showPanel=!1)}),k(this.map).on("movestart",()=>{this.mapMoving=!0}),k(this.map).on("moveend",e=>{this.blockUpdates||this.setBounds(e.target.getBounds()),this.mapMoving=!1}),k(this.map).on("zoomstart",()=>{this.$route.name==="EventPage"&&this.peekMap,this.markersLoaded=!1}),k(this.map).on("zoomend",e=>{this.mapZoomLevel=k(this.map).getZoom(),this.blockUpdates||this.setBounds(e.target.getBounds())})},initTileLayers(){var h,u;k(this.tileLayer)&&((h=k(this.map))==null?void 0:h.hasLayer(k(this.tileLayer)))&&k(this.map).removeLayer(k(this.tileLayer)),k(this.labelLayer)&&((u=k(this.map))==null?void 0:u.hasLayer(k(this.labelLayer)))&&k(this.map).removeLayer(k(this.labelLayer));const e=this.mapStyle==="satellite";let s=1;this.mapStyle==="satellite"&&(s=this.satelliteMapOpacity),this.mapStyle==="toner"&&(s=this.monochromeMapOpactiy);let a=[];this.mapStyle==="transport"&&this.$q.dark.isActive&&(a=["saturate:150%","brightness:100%"]),this.tileLayer=z.tileLayer(this.currentMapTileUrl,{attribution:this.currentMapTileAttribution,detectRetina:e,filter:a,updateWhenZooming:!1,bounds:[[-90,-180],[90,180]]}),k(this.tileLayer).setOpacity(s),k(this.tileLayer).addTo(k(this.map)),this.mapStyle==="satellite"&&(this.labelLayer=z.tileLayer(this.labelsMapTileUrl,{detectRetina:!1,updateWhenZooming:!1,bounds:[[-90,-180],[90,180]]}),k(this.labelLayer).addTo(k(this.map)),k(this.labelLayer).setOpacity(this.satelliteLabelLayerOpacity))},initMarkers(){if(this.markersLoaded=!1,this.points.length>0){this.mapMarkers=z.markerClusterGroup({chunkedLoading:!0});var e=[];for(let u=0;u<this.points.length;u++){var s="",a="",h=[];for(let n=0;n<this.points[u].events.length;n++)h.indexOf(this.points[u].events[n].event_id)===-1&&(h.push(this.points[u].events[n].event_id),s=s+this.points[u].events[n].name,a=a+this.points[u].events[n].name,(this.points[u].events[n+1]||this.points[u].events[n-1])&&n!==this.points[u].events.length-1&&(s=s+"<br/>",a=a+", "));let t=z.marker([this.points[u].lat,this.points[u].lng],{icon:k(this.defaultIcon),title:a,alt:a}).bindTooltip(s,{direction:"top",permanent:!0,interactive:!0});t.on("click",this.clickMarker),t.data=this.points[u],e.push(t)}k(this.mapMarkers).addLayers(e),this.markersLoaded=!0,k(this.map).addLayer(k(this.mapMarkers))}}},computed:{...G(ee,["currentMapTileAttribution","currentMapTileUrl","labelsMapTileUrl","defaultIcon","locationIcon"]),...O(ee,["peekMap","map","mapBounds","mapCenter","exploreMapView","focusMarker","eventDateHoverMarker","mapMoving","blockUpdates","preventMapZoom","mapStyle","mapZoomLevel"]),...O(A,["userLocationFromSearch","userLocation","fineLocation","sidebarPanel","showPanel","darkMode","sidebarExpanded"]),...G(A,["routerHistory"]),...G(j,["controlDateRange","controlDuration","controlSize","controlArtist","controlTag","controlCountry","controlRegion","controlLocality","loadingPoints","nearbyEventDates","points"]),route(){return this.$route}},mounted(){this.$route.name==="Explore"&&this.clearMarkersAndLoadPoints(),this.initMap(),this.windowHeight=window.innerHeight,this.windowWidth=window.innerWidth,window.addEventListener("resize",()=>{this.windowHeight=window.innerHeight,this.windowWidth=window.innerWidth,this.clientHeight=window,this.debouncedInvalidateMapSize()})}},Ht=e=>(ae("data-v-56dc7b44"),e=e(),oe(),e),Vt={class:"location-button-wrapper"},Ft=Ht(()=>v("i",{class:"mdi mdi-crosshairs-gps"},null,-1)),Gt=[Ft],Zt={key:0,class:"markers-loading-map-overlay"};function jt(e,s,a,h,u,t){return r(),g("div",{style:{height:"100%",width:"100%","z-index":"0",position:"absolute"},class:q({"satellite-enabled":e.mapStyle==="satellite"})},[v("div",Vt,[v("div",{class:"location-button t1",onClick:s[0]||(s[0]=(...n)=>t.locateMe&&t.locateMe(...n))},Gt)]),v("div",{ref:"map",style:{height:"100%","z-index":"0"},class:"map",onWheel:s[1]||(s[1]=(...n)=>t.handleWheel&&t.handleWheel(...n))},[l(Q,{appear:"","enter-active-class":"animated fadeIn","leave-active-class":"animated fadeOut"},{default:c(()=>[e.loadingPoints?(r(),g("div",Zt)):y("",!0)]),_:1})],544)],2)}var Qt=Z(Ut,[["render",jt],["__scopeId","data-v-56dc7b44"]]);const Wt={props:["artist","isActive"],data(){return{}},methods:{},computed:{}},Yt=["src"],Kt={class:"flex row justify-between no-wrap"},Jt={class:"flex column justify-center no-wrap"},Xt={key:0},es={key:0},ts={key:1};function ss(e,s,a,h,u,t){const n=P("router-link");return r(),b(N,{active:a.isActive,clickable:""},{default:c(()=>[l(x,{avatar:""},{default:c(()=>{var i,o,d;return[l(n,{style:{"text-decoration":"none",color:"inherit"},to:{name:"ArtistPage",params:{id:a.artist.id},query:{name:a.artist.name.replace(/ /g,"_"),thumb_xs_url:(d=(o=(i=a.artist)==null?void 0:i.media_items)==null?void 0:o[0])==null?void 0:d.thumb_xxs_url}}},{default:c(()=>[l(ze,{class:"avatar"},{default:c(()=>[a.artist&&a.artist.media_items&&a.artist.media_items[0]&&a.artist.media_items[0].thumb_xxs_url?(r(),g("img",{key:0,src:a.artist.media_items[0].thumb_xxs_url},null,8,Yt)):(r(),b(E,{key:1,size:"1em",class:"t3",name:"mdi-account-music-outline"}))]),_:1})]),_:1},8,["to"])]}),_:1}),l(x,null,{default:c(()=>[v("div",Kt,[v("div",Jt,[l(T,null,{default:c(()=>[D($(a.artist.name),1)]),_:1}),a.artist.disambiguation||a.artist.area?(r(),b(T,{key:0,caption:"",class:"t4 ellipsis-2-lines"},{default:c(()=>[D($(a.artist.disambiguation)+" ",1),a.artist.area&&!a.artist.disambiguation?(r(),g("span",Xt,[a.artist.area.name?(r(),g("span",es," ("+$(a.artist.area.name)+") ",1)):(r(),g("span",ts," ("+$(a.artist.area)+") ",1))])):y("",!0)]),_:1})):y("",!0)]),l(ne,{modelValue:a.isActive||!1,style:{"pointer-events":"none"}},null,8,["modelValue"])])]),_:1})]),_:1},8,["active"])}var ns=Z(Wt,[["render",ss],["__scopeId","data-v-10893d92"]]);const is={components:{MenuWrapper:we,ArtistControlListItem:ns},data(){return{query:null,showing:!1}},methods:{...K(j,["loadArtistOptions","loadMoreArtistOptions"]),clickArtist(e){this.controlArtist.findIndex(s=>s.id===e.id)>-1?this.controlArtist=[]:this.controlArtist=[e],this.onHide()},onShow(){(!this.artistOptions||this.artistOptions.length===0)&&this.loadInitialList()},onHide(){this.showing=!1,this.artistOptions=this.artistOptions.slice(0,this.artistOptionsPerPage),this.artistOptionsPage=2},onScrollMainContent(e){e.target.offsetHeight+e.target.scrollTop>=e.target.scrollHeight-1&&this.debouncedLoadMore(this.query)},loadInitialList(){this.artistOptionsPage=1,this.loadArtistOptions(this.query)}},watch:{query(){this.artistOptions=[],this.loadInitialList()}},computed:{...O(ee,["blockUpdates"]),...O(j,["controlArtist","artistOptionsPage","artistOptions"]),...G(j,["topArtistsInArea","artistOptionsHasNext","artistOptionsLoading","artistOptionsPerPage"])},created(){this.debouncedLoadMore=le.debounce(this.loadArtistOptions,150,{leading:!0,trailing:!1})}},it=e=>(ae("data-v-0b57f5ef"),e=e(),oe(),e),as={style:{height:"100%"}},os={class:"flex items-center row no-wrap"},rs={class:"button-label flex row items-center row no-wrap"},ls=it(()=>v("i",{class:"las la-music q-mr-sm q-ml-none q-pr-none"},null,-1)),us={key:0},ds={key:1},hs={key:0},cs={class:"sticky-input"},ms=it(()=>v("div",{class:"separator",style:{width:"100%"}},null,-1)),ps={class:"q-px-md"},fs={class:"q-px-md"},gs={key:0,class:"row justify-center q-my-lg"},vs={key:1,class:"flex row grow justify-center items-center"};function _s(e,s,a,h,u,t){const n=P("ArtistControlListItem"),i=P("MenuWrapper");return r(),g("div",as,[l(Y,{onClick:s[7]||(s[7]=()=>{u.showing=!u.showing}),"no-caps":"",class:q(["button-control flex items-center",{active:e.controlArtist&&e.controlArtist.length>0}])},{default:c(()=>[v("div",os,[e.controlArtist&&e.controlArtist.length>0?(r(),g("div",{key:0,class:"close-icon-wrapper",onClick:s[0]||(s[0]=W(o=>{e.controlArtist=[],o.preventDefault()},["stop"]))},[l(E,{style:{"font-size":"18px"},name:"mdi-close"})])):y("",!0),v("div",rs,[ls,!e.controlArtist||e.controlArtist.length===0?(r(),g("div",us,$(e.$t("top_controls.select_artist")),1)):(r(),g("div",ds,[(r(!0),g(H,null,U(e.controlArtist,(o,d)=>(r(),g("span",{key:d},[D($(o.name),1),d!=e.controlArtist.length-1&&e.controlArtist.length>1?(r(),g("span",hs," & ")):y("",!0)]))),128))]))])]),l(i,{showing:u.showing,onHide:s[4]||(s[4]=o=>t.onHide()),onShow:s[5]||(s[5]=o=>t.onShow()),class:"menu-wrapper",onScroll:s[6]||(s[6]=o=>t.onScrollMainContent(o))},{default:c(()=>{var o;return[v("div",cs,[l(Ue,{debounce:"500",clearable:"",class:"q-ml-md q-mr-md",modelValue:u.query,"onUpdate:modelValue":s[1]||(s[1]=d=>u.query=d),ref:"input",borderless:"","bg-color":"transparent",label:e.$t("top_controls.search_artists"),onKeyup:s[2]||(s[2]=$e(d=>e.$refs.input.blur(),["enter"]))},{append:c(()=>{var d;return[!u.query||((d=u.query)==null?void 0:d.length)==0?(r(),b(E,{key:0,name:"mdi-magnify",class:"q-my-md"})):y("",!0)]}),_:1},8,["modelValue","label"]),ms]),v("div",{class:"control-menu",onScroll:s[3]||(s[3]=d=>t.onScrollMainContent(d))},[e.artistOptions&&e.artistOptions.length>0?(r(),g("div",{key:0,class:q([e.$q.screen.lt.sm?"q-pb-lg":void 0,"flex column grow"])},[l(J,null,{default:c(()=>{var d;return[(!u.query||u.query.length==0)&&((d=e.topArtistsInArea)==null?void 0:d.length)>0?(r(),b(T,{key:0,header:"",class:"t3 q-pb-sm"},{default:c(()=>[D("Top artists in this area:")]),_:1})):y("",!0),(r(!0),g(H,null,U(e.topArtistsInArea,(f,m)=>(r(),g("div",{class:"flex column",key:m+"a"},[v("div",ps,[m>0?(r(),b(ie,{key:0})):y("",!0)]),l(n,{onClick:p=>t.clickArtist(f),artist:f,isActive:e.controlArtist.findIndex(p=>p.id==f.id)>-1},null,8,["onClick","artist","isActive"])]))),128)),!u.query||u.query.length==0?(r(),b(T,{key:1,header:"",class:"t3 q-pb-sm"},{default:c(()=>[D("Top artists worldwide:")]),_:1})):y("",!0),(r(!0),g(H,null,U(e.artistOptions,(f,m)=>(r(),g("div",{class:"flex column",key:m},[v("div",fs,[m>0?(r(),b(ie,{key:0})):y("",!0)]),l(n,{onClick:p=>t.clickArtist(f),artist:f,isActive:e.controlArtist.findIndex(p=>p.id==f.id)>-1},null,8,["onClick","artist","isActive"])]))),128))]}),_:1}),e.artistOptionsHasNext&&((o=e.artistOptions)==null?void 0:o.length)>0?(r(),g("div",gs,[l(_e,{color:e.$q.dark.isActive?"white":"black",size:"2em"},null,8,["color"])])):y("",!0)],2)):y("",!0),e.artistOptionsLoading&&e.artistOptionsPage==1?(r(),g("div",vs,[l(_e,{color:e.$q.dark.isActive?"white":"black",size:"2em"},null,8,["color"])])):y("",!0)],32)]}),_:1},8,["showing"])]),_:1},8,["class"])])}var ys=Z(is,[["render",_s],["__scopeId","data-v-0b57f5ef"]]);const bs={components:{DatePicker:ft,MenuWrapper:we},props:{showSelectedValue:{default:!1,type:Boolean}},data(){return{title:"Select a date range",showing:!1,customDateRange:null,modelConfig:{type:"string",mask:void 0},menuOptions:[{label:this.$t("top_controls.today"),value:"today"},{label:this.$t("top_controls.week"),value:"week"},{label:this.$t("top_controls.weekend"),value:"weekend"},{label:this.$t("top_controls.next_weekend"),value:"next_weekend"}],months:["jan","feb","mar","apr","may","jun","jul","aug","sep","oct","nov","dec"]}},watch:{controlDateRange(e){switch(e.value){case null:this.controlDateRange={start:S().hour(0).minute(0).seconds(0).toISOString(),end:null};break;case"today":this.controlDateRange={start:S().hour(0).minute(0).seconds(0).milliseconds(0).toISOString(),end:S().hour(0).minute(0).seconds(0).milliseconds(0).add(23,"hours").add(59,"minutes").toISOString()};break;case"weekend":this.controlDateRange=this.getThisWeekendDateRange();break;case"next_weekend":this.controlDateRange=this.getNextWeekendDateRange();break;case"week":this.controlDateRange={start:S().hour(0).minute(0).seconds(0).toISOString(),end:S().hour(0).minute(0).seconds(0).add(7,"days").toISOString()};break;case"month":this.controlDateRange={start:S().hour(0).minute(0).seconds(0).toISOString(),end:S().hour(0).minute(0).seconds(0).add(1,"month").toISOString()};break;case"jan":var s=S().year();S().month()>0&&(s+=1);var a=S().hour(0).minute(0).seconds(0).date(1).month(0).year(s);this.controlDateRange={start:a.toISOString(),end:a.add(1,"month").toISOString()};break;case"feb":var s=S().year();S().month()>1&&(s+=1);var a=S().hour(0).minute(0).seconds(0).date(1).month(1).year(s);this.controlDateRange={start:a.toISOString(),end:a.add(1,"month").toISOString()};break;case"mar":var s=S().year();S().month()>2&&(s+=1);var a=S().hour(0).minute(0).seconds(0).date(1).month(2).year(s);this.controlDateRange={start:a.toISOString(),end:a.add(1,"month").toISOString()};break;case"apr":var s=S().year();S().month()>3&&(s+=1);var a=S().hour(0).minute(0).seconds(0).date(1).month(3).year(s);this.controlDateRange={start:a.toISOString(),end:a.add(1,"month").toISOString()};break;case"may":var s=S().year();S().month()>4&&(s+=1);var a=S().hour(0).minute(0).seconds(0).date(1).month(4).year(s);this.controlDateRange={start:a.toISOString(),end:a.add(1,"month").toISOString()};break;case"jun":var s=S().year();S().month()>5&&(s+=1);var a=S().hour(0).minute(0).seconds(0).date(1).month(5).year(s);this.controlDateRange={start:a.toISOString(),end:a.add(1,"month").toISOString()};break;case"jul":var s=S().year();S().month()>6&&(s+=1);var a=S().hour(0).minute(0).seconds(0).date(1).month(6).year(s);this.controlDateRange={start:a.toISOString(),end:a.add(1,"month").toISOString()};break;case"aug":var s=S().year();S().month()>7&&(s+=1);var a=S().hour(0).minute(0).seconds(0).date(1).month(7).year(s);this.controlDateRange={start:a.toISOString(),end:a.add(1,"month").toISOString()};break;case"sep":var s=S().year();S().month()>8&&(s+=1);var a=S().hour(0).minute(0).seconds(0).date(1).month(8).year(s);this.controlDateRange={start:a.toISOString(),end:a.add(1,"month").toISOString()};break;case"oct":var s=S().year();S().month()>9&&(s+=1);var a=S().hour(0).minute(0).seconds(0).date(1).month(9).year(s);this.controlDateRange={start:a.toISOString(),end:a.add(1,"month").toISOString()};break;case"nov":var s=S().year();S().month()>10&&(s+=1);var a=S().hour(0).minute(0).seconds(0).date(1).month(10).year(s);this.controlDateRange={start:a.toISOString(),end:a.add(1,"month").toISOString()};break;case"dec":var s=S().year(),a=S().hour(0).minute(0).seconds(0).date(1).month(11).year(s);this.controlDateRange={start:a.toISOString(),end:a.add(1,"month").toISOString()};break}}},methods:{dayclick(){this.title==="Select date range"?this.title="Select end date":this.title="Select date range"},clearDateRange(){this.controlDateRange={start:S().toISOString()},this.controlDateRangeSelectedOption=null},onHide(){this.showing=!1},onShow(){this.showing=!0},onSelectedCustomDateRange(e){let s=this.$t("top_controls.custom");const a=S(e.start).format("Do MMM YYYY"),h=S(e.end).format("Do MMM YYYY");a===h?s=a:s=a+" - "+h,this.controlDateRangeSelectedOption={label:s,value:"custom"},this.showing=!1},getThisWeekendDateRange(){const a=S().isoWeekday();var h,u;return a<=5?h=S().isoWeekday(5):a>=5&&a<=7?h=S():h=S().add(1,"weeks").isoWeekday(5),u=S().hour(0).minute(0).seconds(0).milliseconds(0).isoWeekday(7).add(23,"hours").add(59,"minutes"),{start:h.toISOString(),end:u.toISOString()}},getNextWeekendDateRange(){var a,h;return a=S().hour(0).minute(0).seconds(0).milliseconds(0).isoWeekday(5).add(1,"weeks"),h=S().hour(0).minute(0).seconds(0).milliseconds(0).isoWeekday(7).add(23,"hours").add(59,"minutes").add(1,"weeks"),{start:a.toISOString(),end:h.toISOString()}}},computed:{...O(j,["controlDateRange","controlDateRangeSelectedOption"]),monthOptionsOrderedFromNow(){for(var e=S().month(),s=S().year(),a=[],h=0;h<12;h++)e===11?(a.push({value:this.months[e],label:this.$t(`months.${this.months[e]}`)+" "+s}),e=0,s+=1):(a.push({value:this.months[e],label:this.$t(`months.${this.months[e]}`)+" "+s}),e+=1);return a}}},ks=e=>(ae("data-v-ed2a182c"),e=e(),oe(),e),Ls={style:{height:"100%"}},ws={class:"flex items-center row no-wrap"},Cs={class:"button-label flex row items-center row no-wrap"},Ss={key:0,class:"q-mr-sm"},qs=ks(()=>v("i",{class:"las la-calendar"},null,-1)),$s=[qs],Ps={key:1},Ms={key:2},Ds={key:3},Es={class:"calendar-header flex row no-wrap items-start",style:{}};function xs(e,s,a,h,u,t){var o;const n=P("DatePicker"),i=P("MenuWrapper");return r(),g("div",Ls,[l(Y,{"no-caps":"",onClick:s[4]||(s[4]=()=>{u.showing=!u.showing}),class:q(["button-control flex items-center",{active:e.controlDateRangeSelectedOption&&((o=e.controlDateRangeSelectedOption)==null?void 0:o.value)!=null}])},{default:c(()=>{var d,f,m;return[v("div",ws,[(d=e.controlDateRangeSelectedOption)!=null&&d.value?(r(),g("div",{key:0,class:"close-icon-wrapper",onClick:s[0]||(s[0]=W((...p)=>t.clearDateRange&&t.clearDateRange(...p),["stop"]))},[l(E,{style:{"font-size":"18px"},name:"mdi-close"})])):y("",!0),v("div",Cs,[(f=e.controlDateRangeSelectedOption)!=null&&f.value?y("",!0):(r(),g("div",Ss,$s)),(m=e.controlDateRangeSelectedOption)!=null&&m.value?(r(),g("div",Ps,$(e.controlDateRangeSelectedOption.label),1)):e.$q.screen.lt.sm?(r(),g("div",Ms,"dates")):(r(),g("div",Ds,$(e.$t("top_controls.select_dates")),1))])]),l(i,{showing:u.showing,onHide:s[2]||(s[2]=p=>t.onHide()),onShow:s[3]||(s[3]=p=>t.onShow())},{default:c(()=>[v("div",Es,[e.$q.screen.gt.xs?(r(),b(J,{key:0,dense:"",style:{"min-width":"100px"},class:"desktop-shortcuts"},{default:c(()=>[l(T,{header:"",class:"q-pb-md"},{default:c(()=>[D($(e.$t("top_controls.shortcuts")),1)]),_:1}),l(ie,{class:"q-mb-sm"}),(r(!0),g(H,null,U(u.menuOptions,p=>F((r(),b(N,{clickable:"",key:p.value,onClick:_=>e.controlDateRange=p},{default:c(()=>[l(x,null,{default:c(()=>[D($(p.label),1)]),_:2},1024)]),_:2},1032,["onClick"])),[[me]])),128)),(r(!0),g(H,null,U(t.monthOptionsOrderedFromNow.slice(0,2),p=>F((r(),b(N,{style:{"white-space":"nowrap"},key:p.value,clickable:"",onClick:_=>e.controlDateRange=p},{default:c(()=>[l(x,null,{default:c(()=>[D($(p.label),1)]),_:2},1024)]),_:2},1032,["onClick"])),[[me]])),128)),e.$q.screen.gt.xs?(r(),b(N,{key:0,clickable:""},{default:c(()=>[l(x,null,{default:c(()=>[D($(e.$t("top_controls.more_months")),1)]),_:1}),l(x,{side:""},{default:c(()=>[l(E,{name:"keyboard_arrow_right"})]),_:1}),l(Be,{anchor:e.$q.screen.gt.xs?"top right":"top middle",self:(e.$q.screen.gt.xs,"top left")},{default:c(()=>[l(J,{class:"q-pr-md",dense:""},{default:c(()=>[(r(!0),g(H,null,U(t.monthOptionsOrderedFromNow.slice(2),p=>F((r(),b(N,{style:{"white-space":"nowrap"},key:p.value,clickable:"",onClick:_=>e.controlDateRange=p},{default:c(()=>[l(x,null,{default:c(()=>[D($(p.label),1)]),_:2},1024)]),_:2},1032,["onClick"])),[[me]])),128))]),_:1})]),_:1},8,["anchor","self"])]),_:1})):y("",!0)]),_:1})):y("",!0),e.$q.screen.lt.sm?(r(),b(J,{key:1,padding:"",style:{"min-width":"100px"},class:"grow"},{default:c(()=>[l(T,{header:"",class:"q-pb-sm"},{default:c(()=>[D($(e.$t("top_controls.shortcuts")),1)]),_:1}),(r(!0),g(H,null,U(u.menuOptions,p=>F((r(),b(N,{dense:"",clickable:"",key:p.value,onClick:_=>e.controlDateRange=p},{default:c(()=>[l(x,null,{default:c(()=>[D($(p.label),1)]),_:2},1024)]),_:2},1032,["onClick"])),[[me]])),128))]),_:1})):y("",!0),e.$q.screen.lt.sm?(r(),b(J,{key:2,dense:"",padding:"",style:{"min-width":"100px"},class:"grow"},{default:c(()=>[l(T,{header:"",class:"q-pb-sm"},{default:c(()=>[D("\xA0")]),_:1}),(r(!0),g(H,null,U(t.monthOptionsOrderedFromNow.slice(0,3),p=>F((r(),b(N,{style:{"white-space":"nowrap"},key:p.value,clickable:"",onClick:_=>e.controlDateRange=p},{default:c(()=>[l(x,null,{default:c(()=>[D($(p.label),1)]),_:2},1024)]),_:2},1032,["onClick"])),[[me]])),128)),l(N,{clickable:""},{default:c(()=>[l(x,null,{default:c(()=>[D($(e.$t("top_controls.more_months")),1)]),_:1}),l(x,{side:""},{default:c(()=>[l(E,{name:"keyboard_arrow_right"})]),_:1}),l(Be,{"transition-show":"jump-down","transition-hide":"jump-up",anchor:e.$q.screen.gt.xs?"top right":"top middle",self:(e.$q.screen.gt.xs,"top left")},{default:c(()=>[l(J,{class:"q-pr-md",dense:""},{default:c(()=>[(r(!0),g(H,null,U(t.monthOptionsOrderedFromNow.slice(3),p=>F((r(),b(N,{style:{"white-space":"nowrap"},key:p.value,clickable:"",onClick:_=>e.controlDateRange=p},{default:c(()=>[l(x,null,{default:c(()=>[D($(p.label),1)]),_:2},1024)]),_:2},1032,["onClick"])),[[me]])),128))]),_:1})]),_:1},8,["anchor","self"])]),_:1})]),_:1})):y("",!0),v("div",{class:q(["flex column date-picker-container",e.$q.screen.lt.sm?" q-pb-xl":""])},[l(T,{header:"",class:"q-pb-md t1 inter bold",style:{"text-align":"center"}},{default:c(()=>[D($(u.title),1)]),_:1}),l(ie),l(n,{borderless:"",expanded:"","title-position":"center","onUpdate:modelValue":[t.onSelectedCustomDateRange,s[1]||(s[1]=p=>e.controlDateRange=p)],class:"date-picker flex","is-inline":"true",modelValue:e.controlDateRange,"model-config":u.modelConfig,"is-range":"",color:"gray",columns:e.$q.screen.gt.xs?2:1,"is-dark":e.$q.dark.isActive,onDayclick:t.dayclick},null,8,["onUpdate:modelValue","modelValue","model-config","columns","is-dark","onDayclick"])],2)])]),_:1},8,["showing"])]}),_:1},8,["class"])])}var Os=Z(bs,[["render",xs],["__scopeId","data-v-ed2a182c"]]);const Is={components:{MenuWrapper:we},data(){return{showing:!1}},methods:{onHide(){this.showing=!1},onShow(){this.showing=!0}},computed:{...O(j,["controlDuration"])}},As=e=>(ae("data-v-7d062e36"),e=e(),oe(),e),Bs={style:{height:"100%"}},Ts={class:"flex items-center row no-wrap"},Rs={class:"button-label flex row items-center row no-wrap"},Ns=As(()=>v("i",{class:"las la-clock q-mr-sm q-ml-none q-pr-none"},null,-1)),zs={class:"q-gutter-sm flex column q-pr-md q-pa-xs"};function Us(e,s,a,h,u,t){const n=P("MenuWrapper");return r(),g("div",Bs,[l(Y,{"no-caps":"",onClick:s[8]||(s[8]=()=>{u.showing=!u.showing}),class:q(["button-control flex items-center",{active:e.controlDuration&&e.controlDuration.length>0}])},{default:c(()=>[v("div",Ts,[e.controlDuration&&e.controlDuration.length>0?(r(),g("div",{key:0,class:"close-icon-wrapper",onClick:s[0]||(s[0]=W(()=>{e.controlDuration=[],e.menuShowing=!1},["stop"]))},[l(E,{style:{"font-size":"18px"},name:"mdi-close"})])):y("",!0),v("div",Rs,[Ns,v("div",null,$(e.$t("top_controls.select_duration")),1)])]),l(n,{showing:u.showing,onHide:s[6]||(s[6]=i=>t.onHide()),onShow:s[7]||(s[7]=i=>t.onShow())},{default:c(()=>[v("div",{class:q(["flex row items-start",e.$q.screen.lt.sm?"q-pb-xl":void 0])},[v("div",zs,[l(ne,{modelValue:e.controlDuration,"onUpdate:modelValue":s[1]||(s[1]=i=>e.controlDuration=i),val:"1",label:e.$t("top_controls.one_day")},null,8,["modelValue","label"]),l(ne,{modelValue:e.controlDuration,"onUpdate:modelValue":s[2]||(s[2]=i=>e.controlDuration=i),val:"2",label:e.$t("top_controls.two_days")},null,8,["modelValue","label"]),l(ne,{modelValue:e.controlDuration,"onUpdate:modelValue":s[3]||(s[3]=i=>e.controlDuration=i),val:"3",label:e.$t("top_controls.three_days")},null,8,["modelValue","label"]),l(ne,{modelValue:e.controlDuration,"onUpdate:modelValue":s[4]||(s[4]=i=>e.controlDuration=i),val:"4",label:e.$t("top_controls.four_days")},null,8,["modelValue","label"]),l(ne,{modelValue:e.controlDuration,"onUpdate:modelValue":s[5]||(s[5]=i=>e.controlDuration=i),val:"5",label:e.$t("top_controls.five_days_plus")},null,8,["modelValue","label"])])],2)]),_:1},8,["showing"])]),_:1},8,["class"])])}var Hs=Z(Is,[["render",Us],["__scopeId","data-v-7d062e36"]]);const Vs={components:{MenuWrapper:we},props:{},data(){return{showing:!1}},watch:{},methods:{onHide(){this.showing=!1},onShow(){this.showing=!0}},computed:{...O(j,["controlSize"])}},Fs=e=>(ae("data-v-42d9733e"),e=e(),oe(),e),Gs={style:{height:"100%"}},Zs={class:"flex items-center row no-wrap"},js={class:"button-label flex row items-center row no-wrap"},Qs=Fs(()=>v("i",{class:"las la-user-friends q-mr-sm q-ml-none q-pr-none"},null,-1));function Ws(e,s,a,h,u,t){const n=P("MenuWrapper");return r(),g("div",Gs,[l(Y,{"no-caps":"",onClick:s[8]||(s[8]=()=>{u.showing=!u.showing}),class:q(["button-control flex items-center",{active:e.controlSize&&e.controlSize.length>0}])},{default:c(()=>[v("div",Zs,[e.controlSize&&e.controlSize.length>0?(r(),g("div",{key:0,class:"close-icon-wrapper",onClick:s[0]||(s[0]=W(()=>{e.controlSize=[],e.menuShowing=!1},["stop"]))},[l(E,{style:{"font-size":"18px"},name:"mdi-close"})])):y("",!0),v("div",js,[Qs,v("div",null,$(e.$t("top_controls.select_size")),1)])]),l(n,{showing:u.showing,onHide:s[6]||(s[6]=i=>t.onHide()),onShow:s[7]||(s[7]=i=>t.onShow())},{default:c(()=>[v("div",{class:q(["q-gutter-sm flex column q-pr-md q-pa-xs",e.$q.screen.lt.sm?"q-py-sm q-pb-xl":""])},[l(ne,{modelValue:e.controlSize,"onUpdate:modelValue":s[1]||(s[1]=i=>e.controlSize=i),val:"0,1000",label:e.$t("top_controls.less_than_one_thousand")},null,8,["modelValue","label"]),l(ne,{modelValue:e.controlSize,"onUpdate:modelValue":s[2]||(s[2]=i=>e.controlSize=i),val:"1000,5000",label:"1000 - 5000 "+e.$t("top_controls.people")},null,8,["modelValue","label"]),l(ne,{modelValue:e.controlSize,"onUpdate:modelValue":s[3]||(s[3]=i=>e.controlSize=i),val:"5000,20000",label:"5000 - 20,000 "+e.$t("top_controls.people")},null,8,["modelValue","label"]),l(ne,{modelValue:e.controlSize,"onUpdate:modelValue":s[4]||(s[4]=i=>e.controlSize=i),val:"20000,50000",label:"20,000 - 50,000 "+e.$t("top_controls.people")},null,8,["modelValue","label"]),l(ne,{modelValue:e.controlSize,"onUpdate:modelValue":s[5]||(s[5]=i=>e.controlSize=i),val:"50000,200000",label:e.$t("top_controls.more_than_fifty_thousand")},null,8,["modelValue","label"])],2)]),_:1},8,["showing"])]),_:1},8,["class"])])}var Ys=Z(Vs,[["render",Ws],["__scopeId","data-v-42d9733e"]]);const Ks={components:{MenuWrapper:we,Tag:gt},data(){return{showing:!1,query:null}},watch:{query(){this.tagOptions=[],this.loadInitialList()}},methods:{...K(j,["loadTagOptions"]),onShow(){console.log("onshow"),(!this.tagOptions||this.tagOptions.length===0)&&this.loadInitialList()},onHide(){this.showing=!1,this.tagOptions=this.tagOptions.slice(0,this.tagOptionsPerPage),this.tagOptionsPage=2,this.tagOptionsHasNext=!0},loadInitialList(){this.tagOptionsPage=1,this.loadTagOptions(this.query)},loadMore(){this.tagOptionsHasNext&&this.loadTagOptions(this.query)},clickTag(e){var a;let s=(a=this.controlTag)==null?void 0:a.findIndex(h=>h.tag===e.tag);s>-1?this.controlTag.splice(s,1):this.controlTag.push(e)},onScrollMainContent(e){e.target.offsetHeight+e.target.scrollTop>=e.target.scrollHeight-1&&this.debouncedLoadMore()}},computed:{...O(ee,["blockUpdates"]),...O(j,["controlTag","tagOptionsPage","tagOptions","tagOptionsHasNext","topTagsInArea"]),...G(j,["tagOptionsLoading","tagOptionsPerPage"])},created(){this.debouncedLoadMore=le.debounce(this.loadMore,150,{leading:!0,trailing:!1})},mounted(){setTimeout(()=>{this.tagOptions},5e3)}},at=e=>(ae("data-v-79dcd8e2"),e=e(),oe(),e),Js={style:{height:"100%"}},Xs={class:"flex items-center row no-wrap"},en={class:"button-label flex row items-center row no-wrap"},tn=at(()=>v("i",{class:"las la-tags q-mr-sm q-ml-none q-pr-none"},null,-1)),sn={key:0},nn={key:1},an={key:0},on={class:"sticky-input"},rn=at(()=>v("div",{class:"separator",style:{width:"100%"}},null,-1)),ln={key:1,class:"flex row q-gutter-sm q-px-md q-pt-sm q-mb-xs"},un={key:3,class:"flex row q-gutter-sm q-px-md q-pt-sm q-mb-xs"},dn={class:"flex row q-gutter-sm q-px-md q-pt-sm q-pb-lg"},hn={key:0,class:"row justify-center q-my-lg"},cn={key:1,class:"flex row grow justify-center items-center"};function mn(e,s,a,h,u,t){var o;const n=P("Tag"),i=P("MenuWrapper");return r(),g("div",Js,[l(Y,{"no-caps":"",class:q(["button-control flex items-center",{active:((o=e.controlTag)==null?void 0:o.length)>0}]),onClick:s[7]||(s[7]=()=>{u.showing=!u.showing})},{default:c(()=>{var d;return[v("div",Xs,[((d=e.controlTag)==null?void 0:d.length)>0?(r(),g("div",{key:0,class:"close-icon-wrapper",onClick:s[0]||(s[0]=W(()=>{e.controlTag=[],e.event.preventDefault()},["stop"]))},[l(E,{style:{"font-size":"18px"},name:"mdi-close"})])):y("",!0),v("div",en,[tn,!e.controlTag||e.controlTag.length===0?(r(),g("div",sn,"Tags")):(r(),g("div",nn,[(r(!0),g(H,null,U(e.controlTag,(f,m)=>(r(),g("span",{key:m},[D($(f.tag),1),m!=e.controlTag.length-1&&e.controlTag.length>1?(r(),g("span",an," + ")):y("",!0)]))),128))]))])]),l(i,{showing:u.showing,onHide:s[4]||(s[4]=f=>t.onHide()),onShow:s[5]||(s[5]=f=>t.onShow()),class:"menu-wrapper",onScroll:s[6]||(s[6]=f=>t.onScrollMainContent(f))},{default:c(()=>{var f;return[v("div",on,[l(Ue,{debounce:"500",clearable:"",class:"q-ml-md q-mr-md",modelValue:u.query,"onUpdate:modelValue":s[1]||(s[1]=m=>u.query=m),borderless:"",ref:"input","bg-color":"transparent",label:e.$t("top_controls.search_tags"),onKeyup:s[2]||(s[2]=$e(m=>e.$refs.input.blur(),["enter"]))},{append:c(()=>{var m;return[!u.query||((m=u.query)==null?void 0:m.length)==0?(r(),b(E,{key:0,name:"mdi-magnify",class:"q-my-md"})):y("",!0)]}),_:1},8,["modelValue","label"]),rn]),v("div",{onScroll:s[3]||(s[3]=m=>t.onScrollMainContent(m)),class:"control-menu",style:{"min-width":"400px !important"}},[e.tagOptions&&e.tagOptions.length>0?(r(),g("div",{key:0,class:q([e.$q.screen.lt.sm?"q-pb-lg":void 0,"flex column grow"])},[l(J,null,{default:c(()=>{var m,p,_,C;return[((m=e.controlTag)==null?void 0:m.length)>0?(r(),b(T,{key:0,header:"",class:"t3 q-pb-sm inter"},{default:c(()=>[D("Selected tags:")]),_:1})):y("",!0),((p=e.controlTag)==null?void 0:p.length)>0?(r(),g("div",ln,[(r(!0),g(H,null,U(e.controlTag,(w,B)=>(r(),b(n,{value:w.tag,key:B,onClick:M=>t.clickTag(w),selected:!0,showIcons:!0},null,8,["value","onClick"]))),128))])):y("",!0),(!u.query||u.query.length==0)&&((_=e.topTagsInArea)==null?void 0:_.length)>0?(r(),b(T,{key:2,header:"",class:"t3 q-pb-sm inter"},{default:c(()=>[D("Top tags in this area:")]),_:1})):y("",!0),(!u.query||u.query.length==0)&&((C=e.topTagsInArea)==null?void 0:C.length)>0?(r(),g("div",un,[(r(!0),g(H,null,U(e.topTagsInArea,(w,B)=>{var M;return r(),b(n,{value:w.tag,key:B,onClick:R=>t.clickTag(w),disabled:((M=e.controlTag)==null?void 0:M.findIndex(R=>R.tag===w.tag))>-1},null,8,["value","onClick","disabled"])}),128))])):y("",!0),!u.query||u.query.length==0?(r(),b(T,{key:4,header:"",class:"t3 q-pb-sm inter"},{default:c(()=>[D("Top tags worldwide:")]),_:1})):(r(),b(T,{key:5,header:"",class:"t3 q-pb-sm inter"},{default:c(()=>[D("Search results:")]),_:1})),v("div",dn,[(r(!0),g(H,null,U(e.tagOptions,(w,B)=>{var M;return r(),b(n,{value:w.tag,key:B,onClick:R=>t.clickTag(w),disabled:((M=e.controlTag)==null?void 0:M.findIndex(R=>R.tag===w.tag))>-1},null,8,["value","onClick","disabled"])}),128))])]}),_:1}),e.tagOptionsHasNext&&((f=e.tagOptions)==null?void 0:f.length)>0?(r(),g("div",hn,[l(_e,{color:e.$q.dark.isActive?"white":"black",size:"2em"},null,8,["color"])])):y("",!0)],2)):y("",!0),e.tagOptionsLoading&&e.tagOptionsPage==1?(r(),g("div",cn,[l(_e,{color:e.$q.dark.isActive?"white":"black",size:"2em"},null,8,["color"])])):y("",!0)],32)]}),_:1},8,["showing"])]}),_:1},8,["class"])])}var pn=Z(Ks,[["render",mn],["__scopeId","data-v-79dcd8e2"]]);const fn={name:"ControlsComponent",components:{DateControl:Os,DurationControl:Hs,SizeControl:Ys,ArtistControl:ys,TagControl:pn,CustomQScroll:Ee},watch:{anyFiltersEnabled(e){e||this.$refs.scroll.setScrollPosition("horizontal",0,150)},sidebarPanel(e,s){this.previousSidebarPanel=s},query(e){(e==null?void 0:e.length)>0&&(this.sidebarPanel="search",this.$route.name!=="Explore"&&this.$router.push({name:"Explore"}))},controlArtist:{handler(e){e&&e.length>0&&(this.goToExplore(),setTimeout(()=>{this.$refs.scroll.setScrollPosition("horizontal",this.$refs.artistControl.$el.offsetLeft,150)},100))},deep:!0},controlTag:{handler(e){e&&e.length>0&&(this.goToExplore(),this.$refs.scroll.setScrollPosition("horizontal",this.$refs.tagControl.$el.offsetLeft,150))},deep:!0},controlDateRange:{handler(e){e&&e.end&&(this.goToExplore(),this.$refs.scroll.setScrollPosition("horizontal",this.$refs.dateControl.$el.offsetLeft,150))},deep:!0},controlSize:{handler(e){e&&e.length>0&&(this.goToExplore(),this.$refs.scroll.setScrollPosition("horizontal",this.$refs.sizeControl.$el.offsetLeft-16,150))},deep:!0},controlDuration:{handler(e){e&&e.length>0&&(this.goToExplore(),this.$refs.scroll.setScrollPosition("horizontal",this.$refs.durationControl.$el.offsetLeft,150))},deep:!0}},props:{data:{type:Object},showSelectedValue:{default:!1,type:Boolean},showOnlySelected:{defaut:!1,type:Boolean}},data(){return{previousSidebarPanel:"",previousShowPanel:""}},methods:{hideResultsAndPreviousPanel(){this.sidebarPanel==="search"&&(this.sidebarPanel=this.previousSidebarPanel,this.sidebarPanel==="explore"&&(this.showPanel=!1))},goToExplore(){this.sidebarPanel="explore",this.$route.name!=="Explore"&&this.$router.push({name:"Explore",query:{view:"explore"}})},clearSearch(){this.query=null,this.searchbarShowing=!1,this.hideResultsAndPreviousPanel()},onSearchbarFocus(){var e;((e=this.query)==null?void 0:e.length)>0&&(this.sidebarPanel="search",this.showPanel=!0)},onSearchbarBlur(){(!this.query||this.query.length===0)&&(this.searchbarShowing=!1,this.hideResultsAndPreviousPanel())}},computed:{...O(xe,["query","searchbarShowing"]),...O(A,["showPanel","sidebarPanel"]),...G(j,["controlDateRange","controlFavorites","controlDuration","controlSize","controlArtist","controlTag","controlCountry","controlRegion","controlLocality","anyFiltersEnabled"]),dateControlActive(){return!!this.controlDateRange.end},durationControlActive(){return this.controlDuration.length>0},sizeControlActive(){return this.controlSize.length>0},artistControlActive(){return this.controlArtist.length>0},tagControlActive(){return this.controlTag.length>0},showDateControl(){return!this.showOnlySelected||this.showOnlySelected&&this.dateControlActive},showDurationControl(){return!this.showOnlySelected||this.showOnlySelected&&this.durationControlActive},showSizeControl(){return!this.showOnlySelected||this.showOnlySelected&&this.sizeControlActive},showArtistControl(){return!this.showOnlySelected||this.showOnlySelected&&this.artistControlActive},showTagControl(){return!this.showOnlySelected||this.showOnlySelected&&this.tagControlActive},showLocalityControl(){return!this.showOnlySelected||this.showOnlySelected&&(!!this.controlCountry||!!this.controlRegion||!!this.controlLocality)}}},ye=e=>(ae("data-v-2ad64d73"),e=e(),oe(),e),gn={class:"flex row scroll-wrapper items-center justify-start no-wrap"},vn=ye(()=>v("div",{class:"flex items-center row no-wrap"},[v("div",{class:"button-label flex row items-center row no-wrap"},[v("div",{class:"q-mr-sm"},[v("i",{class:"mdi mdi-magnify"})]),v("div",null,"search")])],-1)),_n=ye(()=>v("div",{class:"separator vertical"},null,-1)),yn=ye(()=>v("div",{class:"separator vertical"},null,-1)),bn=ye(()=>v("div",{class:"separator vertical"},null,-1)),kn=ye(()=>v("div",{class:"separator vertical"},null,-1)),Ln=ye(()=>v("div",{class:"separator vertical"},null,-1)),wn={key:0,class:"searchbar-wrapper"},Cn={class:"search-button-wrapper q-ml-md flex items-center justify-center"};function Sn(e,s,a,h,u,t){const n=P("DateControl"),i=P("TagControl"),o=P("ArtistControl"),d=P("SizeControl"),f=P("DurationControl"),m=P("CustomQScroll");return r(),g("div",{class:q(["inner-wrapper flex column grow no-wrap",e.$q.screen.gt.xs?" ":" t2"])},[F(l(m,{ref:"scroll",horizontal:"",class:"control-scroll-area","thumb-style":e.$q.screen.gt.xs?{bottom:"0px",height:"4px"}:{bottom:"-8px",height:"0px"}},{default:c(()=>[v("div",gn,[l(Y,{"no-caps":"",onClick:s[0]||(s[0]=()=>{e.searchbarShowing=!0}),style:{"padding-left":"8px"},class:q(["button-control flex items-center",{active:e.sidebarPanel==="search"}])},{default:c(()=>[vn]),_:1},8,["class"]),_n,t.showDateControl?(r(),b(n,{ref:"dateControl",key:1})):y("",!0),yn,t.showTagControl?(r(),b(i,{key:2,ref:"tagControl"})):y("",!0),bn,t.showArtistControl?(r(),b(o,{key:3,ref:"artistControl"})):y("",!0),kn,t.showSizeControl?(r(),b(d,{ref:"sizeControl",key:4})):y("",!0),Ln,t.showDurationControl?(r(),b(f,{ref:"durationControl",key:5})):y("",!0)])]),_:1},8,["thumb-style"]),[[Le,!e.searchbarShowing]]),e.searchbarShowing?(r(),g("div",wn,[l(Ue,{onKeydown:s[1]||(s[1]=$e(()=>{e.query="",e.$refs.search.blur()},["esc"])),ref:"search",borderless:"",autofocus:"",onFocus:s[2]||(s[2]=p=>t.onSearchbarFocus()),onBlur:s[3]||(s[3]=p=>t.onSearchbarBlur()),onClear:s[4]||(s[4]=p=>t.clearSearch()),class:"searchbar-input inter bold",modelValue:e.query,"onUpdate:modelValue":s[5]||(s[5]=p=>e.query=p),onKeyup:s[6]||(s[6]=$e(()=>e.$refs.search.blur(),["enter"])),placeholder:"Search places, events and more"},{prepend:c(()=>[l(E,{name:"mdi-magnify",class:"q-my-md"})]),_:1},8,["modelValue"])])):y("",!0),v("div",Cn,[e.searchbarShowing?(r(),g("div",{key:1,class:"search-button",onClick:s[8]||(s[8]=p=>t.clearSearch())},[l(E,{name:"mdi-close",size:"large"})])):(r(),g("div",{key:0,class:"search-button",onClick:s[7]||(s[7]=()=>e.searchbarShowing=!0)},[l(E,{name:"mdi-magnify",size:"large"})]))])],2)}var qn=Z(fn,[["render",Sn],["__scopeId","data-v-2ad64d73"]]);const $n={components:{ControlsComponent:qn},props:{},data(){return{showSearch:!1}},methods:{...K(A,["loadIpInfo","getFineLocation"]),clickLocation(){this.getFineLocation(),this.sidebarPanel="nearby"}},computed:{...O(xe,["query"]),...O(A,["sidebarPanel","showPanel","menubarOpacity"]),...G(A,["fineLocation","userLocationLoading","userLocationCity","userLocation"])}},Pn={class:"search-component flex row items-center"};function Mn(e,s,a,h,u,t){const n=P("ControlsComponent");return r(),g("div",Pn,[v("div",{class:"controls-wrapper flex no-wrap",onClick:s[1]||(s[1]=()=>u.showSearch=!u.showSearch)},[v("div",{class:q(["controls-wrapper-inner",e.showPanel?"show-panel":""])},[(e.$q.screen.gt.xs,y("",!0)),l(n)],2)])])}var ot=Z($n,[["render",Mn],["__scopeId","data-v-0a3af250"]]);const Dn={name:"AddEventDialog",data(){return{host:null}},methods:{selectHost(e){this.$emit("ok",{host:e}),this.hide()},show(){this.$refs.dialog.show()},hide(){this.$refs.dialog.hide()},onDialogHide(){this.$emit("hide")}},watch:{route(){this.hide()}},computed:{route(){return this.$route}},mounted(){window.history.pushState({},"")}},En=e=>(ae("data-v-aac6126e"),e=e(),oe(),e),xn={class:"text-h6 inter bolder"},On=En(()=>v("i",{class:"mdi mdi-check-decagram-outline"},null,-1));function In(e,s,a,h,u,t){return r(),b(qe,{ref:"dialog","transition-show":"jump-up","transition-hide":"jump-down"},{default:c(()=>[l(We,{class:"q-dialog-plugin dialog-card"},{default:c(()=>[l(vt,{class:"flex items-center dialog-card-header"},{default:c(()=>[v("div",xn,$(e.$t("add_event.please_select_an_option")),1),l(_t),F(l(Y,{icon:"close",flat:"",round:"",dense:""},null,512),[[me]])]),_:1}),l(J,{class:"q-py-sm"},{default:c(()=>[l(N,{clickable:"",class:"q-pa-md",onClick:s[1]||(s[1]=n=>t.selectHost(!0))},{default:c(()=>[l(x,null,{default:c(()=>[l(T,{class:"text-large inter bold q-mb-sm"},{default:c(()=>[D($(e.$t("add_event.i_am_host"))+" \xA0",1),On]),_:1}),l(T,{class:"t3",onClick:s[0]||(s[0]=n=>u.host=!1)},{default:c(()=>[D($(e.$t("add_event.i_am_host_msg")),1)]),_:1})]),_:1}),e.$q.screen.gt.xs?(r(),b(x,{key:0,avatar:""},{default:c(()=>[l(E,{name:"mdi-chevron-right"})]),_:1})):y("",!0)]),_:1}),l(ie),l(N,{clickable:"",class:"q-pa-md",onClick:s[2]||(s[2]=n=>t.selectHost(!1))},{default:c(()=>[l(x,null,{default:c(()=>[l(T,{class:"text-large inter bold q-mb-sm"},{default:c(()=>[D($(e.$t("add_event.event_i_know_about")),1)]),_:1}),l(T,{class:"t3"},{default:c(()=>[D($(e.$t("add_event.event_i_know_about_msg")),1)]),_:1})]),_:1}),e.$q.screen.gt.xs?(r(),b(x,{key:0,avatar:""},{default:c(()=>[l(E,{name:"mdi-chevron-right"})]),_:1})):y("",!0)]),_:1})]),_:1})]),_:1})]),_:1},512)}var Oe=Z(Dn,[["render",In],["__scopeId","data-v-aac6126e"]]);const An={components:{EventDateList:tt,EventDatePosterList:st,EventDateViewOptions:nt,CustomQScroll:Ee},async mounted(){var e;setTimeout(()=>{this.hasLoaded=!0},500),((e=this.eventDates)==null?void 0:e.length)===0&&(this.blockUpdates=!1,this.userLocation?this.getInitialList():(this.blockUpdates=!0,await this.loadIpInfo(),this.blockUpdates=!1,this.getInitialList())),this.userLocation},data(){return{mainContentScrollPosition:0,scrollingUp:!1,hasLoaded:!1,headerYPosition:0,year:0,componentGroup:{},isLoadingDatesInitial:!1,isLoadingArtistsInitial:!1}},methods:{...K(j,["loadEventDates","loadArtists","loadMoreArtists","clearAllFilters"]),...K(A,["loadIpInfo"]),zoomOut(){k(this.map).setZoom(1),this.showPanel=!1},async getInitialList(){this.$refs&&this.$refs.scroll.setScrollPercentage("vertical",0),this.eventDatesHasNext=!0,this.eventDatesPage=1,this.eventDatesTotal=null,this.eventDates=[],this.artists=[],this.eventDatesGroupedByMonth={},this.loadMore()},async loadMore(){if(this.$route.name==="Explore"&&this.eventDatesHasNext&&!this.blockUpdates)try{await this.loadEventDates()}catch{}},handleSwipe(){this.showPanel=!this.showPanel},onScrollMainContent(e){this.mainContentScrollPosition=e.verticalPosition,e.verticalPosition<=0?this.$q.platform.has.touch?this.enablePanelSwipeDown=!0:setTimeout(()=>{this.enablePanelSwipeDown=!0},250):this.enablePanelSwipeDown=!1,e.verticalPercentage>.99&&this.debouncedLoadMore()},delayedGetInitial(){setTimeout(()=>{this.blockUpdates=!1,this.getInitialList()},200)}},watch:{showPanel(e){e?this.enablePanelSwipeDown=!0:this.$refs&&this.$refs.scroll.setScrollPercentage("vertical",0)},sidebarPanel(e){this.$refs.scroll.setScrollPercentage("vertical",0)},mapMoving(e){e&&(this.eventDatesHasNext=!1)},route:{handler:async function(e){var s;e.name==="Explore"&&((s=this.eventDates)==null?void 0:s.length)===0&&(this.blockUpdates=!1,this.userLocation?this.getInitialList():(await this.loadIpInfo(),this.getInitialList()))}},mapBounds(){this.blockUpdates||this.getInitialList()},controlDateRange:{handler(){this.delayedGetInitial()},deep:!0},controlDuration:{handler(){this.delayedGetInitial()},deep:!0},controlSize:{handler(){this.delayedGetInitial()},deep:!0},controlArtist:{handler(){this.delayedGetInitial()},deep:!0},controlTag:{handler(){this.delayedGetInitial()},deep:!0}},computed:{...G(A,["sidebarPanel","userLocation","compactView","groupEventsByMonth"]),...O(A,["showPanel","enablePanelSwipeDown"]),...O(ee,["map","blockUpdates","preventMapZoom"]),...G(ce,["currentUser"]),...G(ee,["mapBounds","mapMoving","showResults","mapZoomLevel"]),...G(j,["controlTag","controlDateRange","controlSize","controlDuration","controlArtist","artistsHasNext","anyFiltersEnabled"]),...O(j,["eventDates","eventDatesTotal","eventDatesPage","eventDatesHasNext","artists","artistsPage","artistsHasNext","eventDatesLoading","eventDatesGroupedByMonth"]),noFiltersSelected(){return this.controlDateRange.end===null&&this.controlArtist.length===0&&this.controlDuration.length===0&&this.controlSize.length===0&&this.controlTag.length===0},isLoadingInitial(){return this.eventDatesLoading&&this.eventDatesTotal<=1},route(){return this.$route},getTitleOpactity(){let e=1-this.mainContentScrollPosition/0,s;return e<0?s=0:s=e,`opacity: ${s}`},getBottomDivider(){var e=0+this.mainContentScrollPosition/150,s,a;return e>.09?s=.09:s=e,e>.065?a=.065:a=e,`
      box-shadow: 0 3px 6px 0 rgba(40, 40, 90, ${s}), 0 1px 1px 0 rgba(0, 0, 0, ${a});`},getBottomDividerDark(){var e=0+this.mainContentScrollPosition/150,s;return e>.09?s=.09:s=e,`
      border-bottom: 1px solid rgba(255,255,255,${s});`}},created(){this.debouncedOnScrollMainContent=le.debounce(this.onScrollMainContent,10),this.debouncedGetInitalList=le.debounce(this.getInitialList,150,{leading:!1,trailing:!0}),this.debouncedLoadMore=le.debounce(this.loadMore,150,{leading:!0,trailing:!1})}},rt=e=>(ae("data-v-1165a0c6"),e=e(),oe(),e),Bn={class:"event-list-vertical shadow-0 main-content",style:{height:"100%",width:"100%",position:"relative",overflow:"hidden"}},Tn={class:"mobile-panel-button"},Rn={class:"touch-overlay"},Nn={class:"event-list-inner"},zn={key:0,class:"flex row no-wrap items-center justify-between q-px-md q-pt-md q-pb-sm view-options-absolute"},Un={class:"flex row items-center no-wrap"},Hn={class:"flex column no-wrap scroll-content q-px-sm"},Vn={class:"flex column items-center no-wrap"},Fn={key:0,class:"inter semibold q-mb-md"},Gn={key:1,class:"inter semibold q-mb-md"},Zn={style:{height:"20px",width:"200px"},class:"flex justify-center"},jn={key:1,class:"flex row no-wrap",style:{"pointer-events":"all"}},Qn={class:"flex items-center row no-wrap"},Wn=rt(()=>v("div",null,"Clear filters",-1)),Yn={class:"flex items-center row no-wrap"},Kn=rt(()=>v("div",null,"Zoom out",-1));function Jn(e,s,a,h,u,t){var f;const n=P("EventDateViewOptions"),i=P("EventDateList"),o=P("EventDatePosterList"),d=P("CustomQScroll");return r(),g("div",Bn,[(e.$q.screen.gt.xs,y("",!0)),v("div",Tn,[e.$q.screen.lt.sm?(r(),b(E,{key:0,onClick:s[0]||(s[0]=()=>e.showPanel=!e.showPanel),flat:"",size:"1.5rem",class:q(["q-pa-md q-mr-xs t2",{"rotate-180":e.showPanel}]),name:"mdi-chevron-up",style:{"pointer-events":"all"}},null,8,["class"])):y("",!0)]),F(v("div",Rn,null,512),[[Te,t.handleSwipe,void 0,{vertical:!0}]]),v("div",Nn,[e.$q.screen.gt.xs?(r(),g("div",zn,[v("div",Un,[l(n,{class:"q-m-md"}),(e.$q.screen.gt.sm,y("",!0))])])):y("",!0),v("div",{class:q(["flex column grow no-wrap",e.$q.screen.gt.sm?"q-pt-lg":""])},[l(d,{vertical:"",onScroll:t.onScrollMainContent,ref:"scroll","thumb-style":e.$q.screen.gt.sm?{bottom:"0px",height:"8px",right:"0px",borderRadius:"0px",width:"12px"}:{marginTop:"52px",height:"0px",borderRadius:"0px",width:"4px"},class:q(["scroll-area flex grow",(e.$q.screen.lt.sm&&!e.showPanel||e.preventMapZoom)&&"disable-scroll"])},{default:c(()=>[v("div",Hn,[l(Q,{appear:"","enter-active-class":"animated fadeIn slow"},{default:c(()=>[v("div",{class:"flex column",style:X(e.mapMoving&&!e.blockUpdates?"opacity: 0":"")},[e.compactView?(r(),b(i,{key:0,groupByMonth:e.groupEventsByMonth,eventDatesGroupedByMonth:e.eventDatesGroupedByMonth,eventDates:e.eventDates,hasNext:e.eventDatesHasNext,loading:e.eventDatesLoading,eventDatesTotal:e.eventDatesTotal},null,8,["groupByMonth","eventDatesGroupedByMonth","eventDates","hasNext","loading","eventDatesTotal"])):y("",!0),e.compactView?y("",!0):(r(),b(o,{key:1,groupByMonth:e.groupEventsByMonth,eventDatesGroupedByMonth:e.eventDatesGroupedByMonth,eventDates:e.eventDates,hasNext:e.eventDatesHasNext,loading:e.eventDatesLoading,eventDatesTotal:e.eventDatesTotal},null,8,["groupByMonth","eventDatesGroupedByMonth","eventDates","hasNext","loading","eventDatesTotal"]))],4)]),_:1})])]),_:1},8,["onScroll","thumb-style","class"])],2),v("div",{class:"event-date-center t2 flex column grow no-wrap justify-center items-center",style:X(e.$q.screen.lt.sm?"height: 144px; position: absolute; width: 100%; z-index: 500":"height: 100%; position: absolute; width: 100%; z-index: 500")},[v("div",Vn,[(t.isLoadingInitial||e.mapMoving&&!e.blockUpdates)&&!e.showPanel?(r(),g("div",Fn," Finding what's good... ")):!t.isLoadingInitial&&e.eventDatesTotal===0?(r(),g("div",Gn," Nothing coming up in this area ")):y("",!0),v("div",Zn,[(t.isLoadingInitial||e.mapMoving&&!e.blockUpdates)&&!e.showPanel?(r(),b(yt,{key:0,class:"linear-progress q-mt-md",indeterminate:"",size:"2px",color:e.$q.dark.isActive?"grey-6":"grey-8",rounded:"",style:X(e.$q.screen.gt.xs?"max-width: 200px":"max-width: 120px")},null,8,["color","style"])):(e.groupEventsByMonth&&((f=Object.keys(e.eventDatesGroupedByMonth))==null?void 0:f.length)==0||!e.groupEventsByMonth&&e.eventDates&&e.eventDates.length===0)&&!(t.isLoadingInitial||e.mapMoving&&!e.blockUpdates)?(r(),g("div",jn,[e.anyFiltersEnabled?(r(),b(Y,{key:0,"no-caps":"",style:{"border-radius":"48px !important"},class:"button-plain flex items-center",onClick:s[2]||(s[2]=()=>{e.clearAllFilters()})},{default:c(()=>[v("div",Qn,[l(E,{name:"mdi-close",size:"1rem",class:"q-pr-md"}),Wn])]),_:1})):y("",!0),e.mapZoomLevel>2?(r(),b(Y,{key:1,"no-caps":"",style:{"border-radius":"48px !important"},class:"button-plain flex items-center q-ml-sm",onClick:s[3]||(s[3]=m=>t.zoomOut())},{default:c(()=>[v("div",Yn,[l(E,{name:"mdi-magnify-minus-outline",size:"1rem",class:"q-pr-md"}),Kn])]),_:1})):y("",!0)])):y("",!0)])])],4)])])}var Xn=Z(An,[["render",Jn],["__scopeId","data-v-1165a0c6"]]);const ei={name:"SearchResults",props:{searchResults:{default:()=>[],type:Array},searchLocationResults:{default:()=>[],type:Array}},data(){return{}},methods:{...K(ke,["loadEverything"]),clickResult(e){var s;e.type==="artist"?this.$router.push({name:"ArtistPage",params:{id:e.id},query:{name:e.result.replace(/ /g,"_")}}):e.type==="tag"?(s={tag:e.result,count:0},this.controlTag=[s],this.sidebarPanel="explore"):e.type==="event"&&(console.log(e),this.$router.push({name:"EventPage",params:{id:e.id},query:{name:e.result.replace(/ /g,"_")}})),this.closeSearchBar()},clickLocationResult(e){this.userLocationFromSearch=!0,this.userLocation={lat:parseFloat(e.location.lat),lng:parseFloat(e.location.lng)};let s=e.label.split(", ");this.userLocationCountry=s.pop(),this.userLocationCity=s==null?void 0:s[0],this.userLocationCity||(console.log("loc",this.userLocationCity),setTimeout(()=>{this.$q.screen.gt.lg?k(this.map).setZoom(6):k(this.map).setZoom(4)},1e3)),this.fineLocation=!1,this.sidebarPanel="nearby",this.loadEverything(),this.$q.screen.gt.xs&&(this.showPanel=!1),this.closeSearchBar()},closeSearchBar(){this.query="",this.searchbarShowing=!1}},computed:{eventResults(){var e;return(e=this.searchResults)==null?void 0:e.filter(s=>s.type==="event")},artistResults(){var e;return(e=this.searchResults)==null?void 0:e.filter(s=>s.type==="artist")},tagResults(){var e;return(e=this.searchResults)==null?void 0:e.filter(s=>s.type==="tag")},...O(ee,["map"]),...O(A,["userLocationFromSearch","userLocation","userLocationCity","userLocationCountry","sidebarPanel","fineLocation","showPanel"]),...O(j,["controlTag"]),...O(xe,["query","searchbarShowing"])}},Ie=e=>(ae("data-v-9e5c3e16"),e=e(),oe(),e),ti={key:0,class:"search-results"},si=Ie(()=>v("div",{class:"text-h6 inter bolder q-my-sm q-ml-sm"},"Events",-1)),ni=Ie(()=>v("div",{class:"text-h6 inter bolder q-my-sm q-ml-sm"},"Places",-1)),ii=Ie(()=>v("div",{class:"text-h6 inter bolder q-my-sm q-ml-sm"},"Artists",-1)),ai=Ie(()=>v("div",{class:"text-h6 inter bolder q-my-sm q-ml-sm"},"Tags",-1));function oi(e,s,a,h,u,t){return r(),b(Q,{appear:"","enter-active-class":"animated fadeIn faster","leave-active-class":"animated fadeOut faster"},{default:c(()=>{var n,i,o,d,f,m;return[((n=a.searchResults)==null?void 0:n.length)>0||((i=a.searchLocationResults)==null?void 0:i.length)>0?(r(),g("div",ti,[((o=t.eventResults)==null?void 0:o.length)>0?(r(),b(J,{key:0,separator:""},{default:c(()=>[si,(r(!0),g(H,null,U(t.eventResults,(p,_)=>(r(),b(N,{clickable:"",onClick:W(C=>t.clickResult(p),["stop"]),key:_},{default:c(()=>[l(x,{avatar:""},{default:c(()=>[l(E,{class:"t3",name:"las la-calendar"})]),_:1}),l(x,null,{default:c(()=>[l(T,{style:{"text-transform":"capitalize"},class:"flex items-center"},{default:c(()=>[D($(p.result),1)]),_:2},1024)]),_:2},1024)]),_:2},1032,["onClick"]))),128))]),_:1})):y("",!0),((d=a.searchLocationResults)==null?void 0:d.length)>0?(r(),b(J,{key:1,separator:""},{default:c(()=>[ni,(r(!0),g(H,null,U(a.searchLocationResults.slice(0,3),(p,_)=>(r(),b(N,{clickable:"",onClick:W(C=>t.clickLocationResult(p),["stop"]),key:_+30},{default:c(()=>[l(x,{avatar:""},{default:c(()=>[l(E,{class:"t3",name:"las la-map-marker"})]),_:1}),l(x,null,{default:c(()=>[l(T,{style:{"text-transform":"capitalize"}},{default:c(()=>[D($(p.label),1)]),_:2},1024)]),_:2},1024)]),_:2},1032,["onClick"]))),128))]),_:1})):y("",!0),((f=t.artistResults)==null?void 0:f.length)>0?(r(),b(J,{key:2,separator:""},{default:c(()=>[ii,(r(!0),g(H,null,U(t.artistResults,(p,_)=>(r(),b(N,{clickable:"",onClick:W(C=>t.clickResult(p),["stop"]),key:_},{default:c(()=>[l(x,{avatar:""},{default:c(()=>[l(E,{name:"las la-music",class:"t3"})]),_:1}),l(x,null,{default:c(()=>[l(T,{style:{"text-transform":"capitalize"},class:"flex items-center"},{default:c(()=>[D($(p.result),1)]),_:2},1024)]),_:2},1024)]),_:2},1032,["onClick"]))),128))]),_:1})):y("",!0),((m=t.tagResults)==null?void 0:m.length)>0?(r(),b(J,{key:3,separator:""},{default:c(()=>[ai,(r(!0),g(H,null,U(t.tagResults,(p,_)=>(r(),b(N,{clickable:"",onClick:W(C=>t.clickResult(p),["stop"]),key:_},{default:c(()=>[l(x,{avatar:""},{default:c(()=>[l(E,{name:"las la-music",class:"t3"})]),_:1}),l(x,null,{default:c(()=>[l(T,{style:{"text-transform":"capitalize"},class:"flex items-center"},{default:c(()=>[D($(p.result),1)]),_:2},1024)]),_:2},1024)]),_:2},1032,["onClick"]))),128))]),_:1})):y("",!0)])):y("",!0)]}),_:1})}var ri=Z(ei,[["render",oi],["__scopeId","data-v-9e5c3e16"]]);function pe(){return pe=Object.assign?Object.assign.bind():function(e){for(var s=1;s<arguments.length;s++){var a=arguments[s];for(var h in a)Object.prototype.hasOwnProperty.call(a,h)&&(e[h]=a[h])}return e},pe.apply(this,arguments)}function li(e,s){e.prototype=Object.create(s.prototype),e.prototype.constructor=e,Re(e,s)}function Re(e,s){return Re=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(a,h){return a.__proto__=h,a},Re(e,s)}function he(e,s,a,h){s===void 0&&(s=""),h===void 0&&(h={});var u=document.createElement(e);return s&&(u.className=s),Object.keys(h).forEach(function(t){if(typeof h[t]=="function"){var n=t.indexOf("on")===0?t.substr(2).toLowerCase():t;u.addEventListener(n,h[t])}else t==="html"?u.innerHTML=h[t]:t==="text"?u.innerText=h[t]:u.setAttribute(t,h[t])}),a&&a.appendChild(u),u}function be(e){e.preventDefault(),e.stopPropagation()}var Se=function(){return[].slice.call(arguments).filter(Boolean).join(" ").trim()};function fe(e,s){e&&e.classList&&(Array.isArray(s)?s:[s]).forEach(function(a){e.classList.contains(a)||e.classList.add(a)})}function re(e,s){e&&e.classList&&(Array.isArray(s)?s:[s]).forEach(function(a){e.classList.contains(a)&&e.classList.remove(a)})}var Pe,Me=13,Ne=40,lt=38,ui=[Me,27,Ne,lt,37,39],di=function(){function e(a){var h=this,u=a.handleSubmit,t=a.searchLabel,n=a.classNames,i=n===void 0?{}:n;this.container=void 0,this.form=void 0,this.input=void 0,this.handleSubmit=void 0,this.hasError=!1,this.container=he("div",Se("geosearch",i.container)),this.form=he("form",["",i.form].join(" "),this.container,{autocomplete:"none",onClick:be,onDblClick:be,touchStart:be,touchEnd:be}),this.input=he("input",["glass",i.input].join(" "),this.form,{type:"text",placeholder:t||"search",onInput:this.onInput,onKeyUp:function(o){return h.onKeyUp(o)},onKeyPress:function(o){return h.onKeyPress(o)},onFocus:this.onFocus,onBlur:this.onBlur,onClick:function(){h.input.focus(),h.input.dispatchEvent(new Event("focus"))}}),this.handleSubmit=u}var s=e.prototype;return s.onFocus=function(){fe(this.form,"active")},s.onBlur=function(){re(this.form,"active")},s.onSubmit=function(a){try{var h=this;return be(a),re(u=h.container,"error"),fe(u,"pending"),Promise.resolve(h.handleSubmit({query:h.input.value})).then(function(){re(h.container,"pending")})}catch(t){return Promise.reject(t)}var u},s.onInput=function(){this.hasError&&(re(this.container,"error"),this.hasError=!1)},s.onKeyUp=function(a){a.keyCode===27&&(re(this.container,["pending","active"]),this.input.value="",document.body.focus(),document.body.blur())},s.onKeyPress=function(a){a.keyCode===Me&&this.onSubmit(a)},s.setQuery=function(a){this.input.value=a},e}(),hi=function(){function e(a){var h=this,u=a.handleClick,t=a.classNames,n=t===void 0?{}:t,i=a.notFoundMessage;this.handleClick=void 0,this.selected=-1,this.results=[],this.container=void 0,this.resultItem=void 0,this.notFoundMessage=void 0,this.onClick=function(o){if(typeof h.handleClick=="function"){var d=o.target;if(d&&h.container.contains(d)&&d.hasAttribute("data-key")){var f=Number(d.getAttribute("data-key"));h.clear(),h.handleClick({result:h.results[f]})}}},this.handleClick=u,this.notFoundMessage=i?he("div",Se(n.notfound),void 0,{html:i}):void 0,this.container=he("div",Se("results",n.resultlist)),this.container.addEventListener("click",this.onClick,!0),this.resultItem=he("div",Se(n.item))}var s=e.prototype;return s.render=function(a,h){var u=this;a===void 0&&(a=[]),this.clear(),a.forEach(function(t,n){var i=u.resultItem.cloneNode(!0);i.setAttribute("data-key",""+n),i.innerHTML=h({result:t}),u.container.appendChild(i)}),a.length>0?(fe(this.container.parentElement,"open"),fe(this.container,"active")):this.notFoundMessage&&(this.container.appendChild(this.notFoundMessage),fe(this.container.parentElement,"open")),this.results=a},s.select=function(a){return Array.from(this.container.children).forEach(function(h,u){return u===a?fe(h,"active"):re(h,"active")}),this.selected=a,this.results[a]},s.count=function(){return this.results?this.results.length:0},s.clear=function(){for(this.selected=-1;this.container.lastChild;)this.container.removeChild(this.container.lastChild);re(this.container.parentElement,"open"),re(this.container,"active")},e}(),Ae={position:"topleft",style:"button",showMarker:!0,showPopup:!1,popupFormat:function(e){return""+e.result.label},resultFormat:function(e){return""+e.result.label},marker:{icon:Ye&&de.exports.Icon?new de.exports.Icon.Default:void 0,draggable:!1},maxMarkers:1,maxSuggestions:5,retainZoomLevel:!1,animateZoom:!0,searchLabel:"Enter address",clearSearchLabel:"Clear search",notFoundMessage:"",messageHideDelay:3e3,zoomLevel:18,classNames:{container:"leaflet-bar leaflet-control leaflet-control-geosearch",button:"leaflet-bar-part leaflet-bar-part-single",resetButton:"reset",msgbox:"leaflet-bar message",form:"",input:"",resultlist:"",item:"",notfound:"leaflet-bar-notfound"},autoComplete:!0,autoCompleteDelay:250,autoClose:!1,keepResult:!1,updateMap:!0},ci="Leaflet must be loaded before instantiating the GeoSearch control";pe({},Ae),pe({},Ae.classNames);(function(e){e[e.SEARCH=0]="SEARCH",e[e.REVERSE=1]="REVERSE"})(Pe||(Pe={}));var je,mi=function(){function e(a){a===void 0&&(a={}),this.options=void 0,this.options=a}var s=e.prototype;return s.getParamString=function(a){a===void 0&&(a={});var h=pe({},this.options.params,a);return Object.keys(h).map(function(u){return encodeURIComponent(u)+"="+encodeURIComponent(h[u])}).join("&")},s.getUrl=function(a,h){return a+"?"+this.getParamString(h)},s.search=function(a){try{var h=this,u=h.endpoint({query:a.query,type:Pe.SEARCH});return Promise.resolve(fetch(u)).then(function(t){return Promise.resolve(t.json()).then(function(n){return h.parse({data:n})})})}catch(t){return Promise.reject(t)}},e}();(function(e){e[e.INITIALIZED=0]="INITIALIZED",e[e.LOADING=1]="LOADING",e[e.SUCCESS=2]="SUCCESS",e[e.FAILURE=3]="FAILURE"})(je||(je={}));var pi=function(e){function s(h){var u;h===void 0&&(h={}),(u=e.call(this,h)||this).searchUrl=void 0,u.reverseUrl=void 0;var t="https://nominatim.openstreetmap.org";return u.searchUrl=h.searchUrl||t+"/search",u.reverseUrl=h.reverseUrl||t+"/reverse",u}li(s,e);var a=s.prototype;return a.endpoint=function(h){var u=h.query,t=h.type,n=typeof u=="string"?{q:u}:u;return n.format="json",this.getUrl(t===Pe.REVERSE?this.reverseUrl:this.searchUrl,n)},a.parse=function(h){return(Array.isArray(h.data)?h.data:[h.data]).map(function(u){return{x:Number(u.lon),y:Number(u.lat),label:u.display_name,bounds:[[parseFloat(u.boundingbox[0]),parseFloat(u.boundingbox[2])],[parseFloat(u.boundingbox[1]),parseFloat(u.boundingbox[3])]],raw:u}})},s}(mi);const fi={components:{SearchResults:ri,InnerLoading:Ke},data(){return{searchResults:[],locationSearchResults:[],loading:!1,currentQuery:""}},methods:{async search(){var e;if(((e=this.query)==null?void 0:e.length)>0){this.loading=!0;const s=new pi;this.currentQuery=this.query;const[a,h]=await Promise.all([bt({query:this.query}),s.search({query:this.query})]);this.currentQuery===this.query&&(this.searchResults=a.data.results,this.locationSearchResults=h.map(u=>({label:u.label,location:{lat:u.y,lng:u.x}}))),this.loading=!1}},clearSearchResults(){this.searchResults=[],this.locationSearchResults=[]}},watch:{query(){var e;this.clearSearchResults(),((e=this.query)==null?void 0:e.length)>0&&this.debouncedSearch()}},computed:{...O(xe,["query"]),...G(A,["sidebarPanel"])},created(){this.debouncedSearch=le.debounce(this.search,300,{leading:!1,trailing:!0})}},gi={class:"search-view main-content flex column grow no-wrap"},vi={key:0,style:{height:"50%"},class:"flex justify-center items-center t3"};function _i(e,s,a,h,u,t){const n=P("SearchResults"),i=P("InnerLoading");return r(),g("div",gi,[v("div",{class:q(["flex column grow q-px-md",e.$q.screen.gt.xs?"q-px-lg q-pt-lg":""]),style:{position:"relative !important"}},[u.loading?y("",!0):(r(),b(n,{key:0,class:"q-pb-md","search-results":u.searchResults,"search-location-results":u.locationSearchResults},null,8,["search-results","search-location-results"])),l(Q,{appear:"","enter-active-class":"animated fadeIn faster","leave-active-class":"animated fadeOut faster"},{default:c(()=>{var o,d,f;return[((o=u.searchResults)==null?void 0:o.length)==0&&((d=u.locationSearchResults)==null?void 0:d.length)==0&&((f=e.query)==null?void 0:f.length)>0&&u.currentQuery===e.query&&!u.loading?(r(),g("div",vi," No results ")):y("",!0)]}),_:1}),u.loading?(r(),b(i,{key:1,solid:!1,style:{height:"50%"}})):y("",!0)],2)])}var yi=Z(fi,[["render",_i],["__scopeId","data-v-01c300c2"]]);const bi={components:{},props:{artist:Object},data(){return{}},watch:{},methods:{getBgImgStyle(){var e="";return this.artist&&this.artist.media_items[0]&&this.artist.media_items[0].thumb_xs_url&&(e=this.artist.media_items[0].thumb_xs_url),this.$q.dark.isActive?`background-image:  url("${e}");
        background-size: cover;
        display: inline-block;
        background-position: center;
        `:`background-image:  url("${e}");
          background-size: cover;
          display: inline-block;
          background-position: center;
          `}}},ki={class:"artist-head flex column no-wrap"},Li={class:"artist-head-background shadow-2xl"},wi=["src"];function Ci(e,s,a,h,u,t){var i,o,d;const n=P("router-link");return r(),b(n,{class:"artist-head-link",style:{"text-decoration":"none",color:"inherit"},to:{name:"ArtistPage",params:{id:a.artist.id},query:{name:a.artist.name.replace(/ /g,"_"),thumb_xs_url:(d=(o=(i=a.artist)==null?void 0:i.media_items)==null?void 0:o[0])==null?void 0:d.thumb_xs_url}}},{default:c(()=>[v("div",{class:q(["artist-head-wrapper flex column justify-start items-center",e.$q.platform.is.ios?"no-hover":""])},[v("div",{class:"card-bottom-background",style:X(t.getBgImgStyle())},null,4),v("div",ki,[v("div",Li,[a.artist.media_items&&a.artist.media_items[0]?(r(),g("img",{key:0,src:a.artist.media_items[0].thumb_xs_url},null,8,wi)):(r(),b(E,{key:1,size:"2em",class:"t3",name:"mdi-account-music-outline"}))]),v("div",{class:q(["artist-name q-mt-sm inter bold ellipsis",{"text-large":!1}])},$(a.artist.name),1)])],2)]),_:1},8,["to"])}var Si=Z(bi,[["render",Ci],["__scopeId","data-v-9732906c"]]);const qi={class:"scroll-area-wrapper"},$i={key:0,class:"pagination-icon flex justify-center items-center t3 link-hover",style:{width:"128px"}},Pi=kt({__name:"ArtistsComponent",props:{hasNext:{type:Boolean,default:()=>!1},artists:{default:()=>[]},loadMore:null},setup(e){const s=e;function a(h){h.horizontalPercentage==1&&(console.log("load more"),s.loadMore())}return(h,u)=>(r(),g("div",qi,[e.artists&&e.artists.length>0?(r(),b(Ee,{key:0,horizontal:"",ref:"scrollArea",onScroll:a,class:"artist-scroll-area","thumb-style":h.$q.screen.gt.xs?{borderRadius:"0px",bottom:"8px",height:"4px",marginLeft:"16px"}:{bottom:"0px",height:"0px"}},{default:c(()=>[v("div",{class:q(["flex row no-wrap q-gutter-md q-pr-xl",(h.$q.screen.lt.sm,"q-pl-md")])},[(r(!0),g(H,null,U(e.artists,(t,n)=>(r(),b(Si,{key:n,artist:t},null,8,["artist"]))),128)),e.hasNext?(r(),g("div",$i,[l(_e,{thickness:2,color:h.$q.dark.isActive?"white":"black",size:"2em"},null,8,["color"])])):y("",!0)],2)]),_:1},8,["thumb-style"])):y("",!0)]))}});var Mi=Z(Pi,[["__scopeId","data-v-37c27d28"]]);const Di={name:"LandingPage",meta(){return{title:"PartyMap | The Global Map of Festivals and Events",meta:{description:{name:"description",content:"PartyMap is a community-driven platform for discovering festivals and events near you and around the world."},keywords:{name:"keywords",content:"Festival, Festivals, Map, Events, Party, Fiesta, Music, Music Festival, Music Festivals, Best Music Festivals, All Music Festivals, Top Music Festivals, List of music festivals, list"}}}},components:{CustomQScroll:Ee,ArtistsComponent:Mi,EventDateList:tt,EventDatePosterList:st,EventDateViewOptions:nt,InnerLoading:Ke,EventDatePoster:Lt},data(){return{sidebarPanelReady:!1,showMessage:!1,scrollPosition:0,queryRadiusOptions:[{label:"10km",value:1e4},{label:"20km",value:2e4},{label:"50km",value:5e4},{label:"100km",value:1e5},{label:"200km",value:2e5},{label:"500km",value:5e5},{label:"1000km",value:1e6},{label:"2000km",value:2e6},{label:"5000km",value:5e6},{label:"10,000km",value:1e7},{label:"20,000km",value:2e7}]}},methods:{...K(A,["loadIpInfo","getFineLocation"]),...K(j,["loadArtistOptions","loadTagOptions"]),...K(ke,["loadEverything","loadNearbyTags","loadNearbyArtists","loadNearbyEventDates","loadEventDates"]),scrollMouseEnter(e){return console.log(e),e.stopImmediatePropagation(),e.preventDefault(),!1},scrollMouseLeave(e){console.log(e)},showAddEventDialog(){this.$q.dialog({parent:this,component:Oe}).onOk(e=>{!this.currentUser&&e.host?this.$router.push({path:"/login",query:{from:this.$route.path}}):e.host?this.$router.push({name:"AddEventHost"}):this.$router.push({name:"AddEventPublic"})})},onScroll(e){this.scrollPosition=e.verticalPosition,e.verticalPercentage===1&&(this.nearbyEventDatesHasNext&&this.userLocation?this.debouncedLoadNearbyEventDates():this.eventDatesHasNext&&this.debouncedLoadEventDates())},addParamsToLocation(e){history.pushState({},null,this.$route.path+"?"+Object.keys(e).map(s=>encodeURIComponent(s)+"="+encodeURIComponent(e[s])).join("&"))},clickTag(e){var a;((a=this.controlTag)==null?void 0:a.findIndex(h=>h.tag===e.tag))>-1||this.controlTag.push(e),this.sidebarPanel="explore"},loadEventDatePage(e){this.addParamsToLocation({global_page:e}),this.eventDates=null,this.eventDatesPage=e,this.loadEventDates()}},watch:{$route:{handler:async function(e){e.name==="Explore"&&this.sidebarPanel==="nearby"&&(this.userLocation?this.eventDates.length===0&&this.loadEverything():(await this.loadIpInfo(),this.eventDates.length===0&&this.loadEverything()))}},sidebarPanel:{handler:function(e){this.$route.name==="Explore"&&e==="nearby"&&(setTimeout(()=>{this.sidebarPanelReady=!0},150),this.userLocation||this.loadIpInfo())}},userLocation:{handler:function(e,s){if(this.$route.name==="Explore")if(e&&!s){this.loadEverything();return}else e&&s&&(Math.round(e.lat)!==Math.round(s.lat)||Math.round(e.lng)!==Math.round(s.lng))&&this.loadEverything()}},queryRadius:{handler:function(e,s){console.log("qq qr",e,s),s!==null&&s!=e&&(this.loadEverything(),console.log("qq called",e,s))}}},computed:{...G(ce,["currentUser"]),...O(A,["showPanel","enablePanelSwipeDown","sidebarPanel","menubarOpacity","userLocationLoading","sidebarExpanded"]),...G(A,["userLocationLoading","userLocation","userLocationFromSearch","userLocationCity","userLocationCountry","fineLocation","compactView"]),...O(j,["controlTag","tagOptions","tagOptionsHasNext","artistOptions","artistOptionsHasNext","userEventDates","userEventDatesPage","userEventDatesHasNext","userEventDatesLoading"]),...O(ke,["queryRadius","eventDates","eventDatesPage","eventDatesLoading"]),...G(ke,["loadingEverything","nearbyTags","nearbyTagsHasNext","nearbyTagsPage","nearbyTagsSuccess","nearbyArtists","nearbyArtistsHasNext","nearbyArtistsPage","nearbyArtistsSuccess","nearbyEventDates","nearbyEventDatesLoading","nearbyEventDatesHasNext","nearbyEventDatesPage","nearbyEventDatesSuccess","eventDatesHasNext","eventDatesPages"]),computedSidebarPanelReady(){return this.$q.screen.lt.sm?this.sidebarPanelReady:this.sidebarPanelReady},computedGridColumns(){return this.$q.screen.gt.lg?`
        grid-template-columns: repeat(3, minmax(0, 1fr));
        `:this.$q.screen.gt.sm?`
        grid-template-columns: repeat(2, minmax(0, 1fr));
        `:`
        grid-template-columns: repeat(1, minmax(0, 1fr));
        `},eventDatesPageNumbers(){var e=[];for(let s=1;s<=this.eventDatesPages;s++)e.push(s);return e}},beforeMount(){window.prerenderReady=!1},created(){this.debouncedLoadNearbyEventDates=le.debounce(this.loadNearbyEventDates,150,{leading:!0,trailing:!1}),this.debouncedLoadEventDates=le.debounce(this.loadEventDates,150,{leading:!0,trailing:!1})},unmounted(){this.menuBarOpacity=1},async mounted(){this.$q.screen.lt.sm,setTimeout(()=>{this.sidebarPanelReady=!0},300),this.$route.name==="Explore"&&(this.userLocation?this.eventDates.length===0&&this.loadEverything():(await this.loadIpInfo(),this.eventDates.length===0&&this.loadEverything())),this.$route.query.global_page?(this.eventDatesPage=Number(this.$route.query.global_page),await this.loadEventDates(),setTimeout(()=>{window.prerenderReady=!0},300)):setTimeout(()=>{window.prerenderReady=!0},300)}},se=e=>(ae("data-v-abd7ac26"),e=e(),oe(),e),Ei={class:"landing-page flex column no-wrap"},xi={class:"main-content flex row justify-center"},Oi={class:"flex column grow no-wrap"},Ii={class:"flex column grow no-wrap",style:{height:"100%",width:"100%","max-width":"100%"}};const Ai={class:"scroll-stuff flex column"},Bi={key:0,style:{"margin-top":"-8px"},class:"ellipsis text-h4 inter bolder"},Ti=se(()=>v("span",{class:""},"Near",-1)),Ri=[Ti],Ni={key:0,class:"ellipsis q-mr-sm inter bolder"},zi={key:0,class:""},Ui={key:1},Hi={key:2,class:"t3"},Vi={key:3},Fi={key:1,class:"ellipsis text-h4 inter bolder t4"},Gi={key:0},Zi={key:2,class:"ellipsis text-h4 inter bolder t1"},ji={key:0,class:"flex"},Qi={key:1,style:{position:"relative"},class:"flex"},Wi={key:0},Yi={key:1},Ki=se(()=>v("span",null,"Welcome to the global directory of festivals and parties!",-1)),Ji={key:0,class:"flex column items-start justify-start t1 q-mt-sm q-mb-md"},Xi=se(()=>v("p",null,null,-1)),ea=se(()=>v("p",null,null,-1)),ta=se(()=>v("p",null,null,-1)),sa={key:0,class:"flex q-gutter-md q-my-lg"},na=se(()=>v("span",{style:{"text-decoration":"italic"}},"Coming soon...",-1)),ia=se(()=>v("span",{style:{"text-decoration":"italic"}},"Coming soon...",-1)),aa={key:0},oa={key:1},ra={class:"flex justify-center items-center grow"},la=se(()=>v("span",null,"Explore the map! ",-1)),ua={key:1,class:"q-px-md q-mt-sm q-mb-xs"},da=se(()=>v("div",{class:"separator"},null,-1)),ha=[da],ca={key:2,class:"flex row justify-center items-center loading-wrapper"},ma={class:"flex column scroll-content q-mt-"},pa={key:0,class:"content"},fa={key:0,class:"flex column"},ga=se(()=>v("div",{class:"text-"},"Your upcoming events:",-1)),va={key:0,class:"q-mb-sm"},_a={key:1,class:"flex column"},ya=se(()=>v("div",{class:"text-"},"Top tags in your area:",-1)),ba=[ya],ka={class:"flex column"},La={class:"flex row no-wrap q-gutter-sm"},wa=["onClick"],Ca={class:"flex row no-wrap q-gutter-sm q-pt-sm"},Sa=["onClick"],qa={key:2,class:"flex column"},$a=se(()=>v("div",{class:"inter semibold"}," Top tags around the world: ",-1)),Pa=[$a],Ma={class:"flex column"},Da={class:"flex row no-wrap q-gutter-sm"},Ea=["onClick"],xa={class:"flex row no-wrap q-gutter-sm q-pt-sm"},Oa=["onClick"],Ia={key:3,class:"flex column"},Aa={key:4,class:"flex column"},Ba={class:"flex items-center"},Ta={class:""},Ra={key:0,class:"ellipsis"},Na={class:"flex row justify-center q-mt-md",style:{opacity:"0","margin-top":"-16px"}},za=["onClick"];function Ua(e,s,a,h,u,t){const n=P("InnerLoading"),i=P("router-link"),o=P("EventDatePoster"),d=P("CustomQScroll"),f=P("ArtistsComponent"),m=P("EventDateViewOptions"),p=P("EventDateList"),_=P("EventDatePosterList");return r(),g("div",Ei,[v("div",xi,[v("div",Oi,[v("div",Ii,[l(Q,{appear:"","enter-active-class":"animated fadeIn","leave-active-class":"animated fadeOut"},{default:c(()=>[(u.scrollPosition>228,y("",!0))]),_:1}),l(d,{onScroll:t.onScroll,vertical:"","thumb-style":{marginTop:"16px",right:(e.$q.screen.gt.sm,"0px"),width:e.$q.screen.gt.sm?"12px":"4px",borderRadius:"0px"},class:q([e.$q.screen.lt.sm&&!e.showPanel&&"disable-scroll","scroll-area flex grow"]),"content-style":{width:"100%"}},{default:c(()=>[v("div",Ai,[v("div",{class:q(["flex column mobile-location-header",{"q-px-lg q-mb-sm q-mt-md":e.$q.screen.gt.lg,"q-px-lg q-mt-sm":e.$q.screen.gt.sm&&e.$q.screen.lt.xl,"q-px-md  q-mt-md ":e.$q.screen.lt.md}]),style:{width:"100%"}},[e.$q.screen.lt.md?(r(),g("div",Bi,Ri)):y("",!0),v("div",{class:q(["flex items-center no-wrap",{"justify-between text-h4":e.$q.screen.gt.sm,"justify-between  text-h4":e.$q.screen.lt.md}]),style:{width:"100%"}},[e.userLocation?(r(),g("span",Ni,[e.$q.screen.gt.sm?(r(),g("span",zi,"Near\xA0")):y("",!0),e.userLocationCountry?(r(),g("span",Ui,$(e.userLocationCity),1)):(r(),g("span",Hi,"...")),e.userLocationCity?y("",!0):(r(),g("span",Vi,$(e.userLocationCountry),1))])):e.userLocationLoading?(r(),g("span",Fi,[e.$q.screen.gt.sm?(r(),g("span",Gi,"Finding location")):y("",!0),D("... ")])):(r(),g("span",Zi,"Unknown Location... ")),l(Y,{flat:"",class:q(["",{"q-ml-md q-pa-sm":e.$q.screen.lt.md,"q-pa-md":e.$q.screen.gt.sm}]),onClick:s[0]||(s[0]=W(()=>e.getFineLocation(),["stop"])),style:X(e.$q.screen.gt.sm?"margin-right: -16px; border-radius: 100px!important;":"margin-right: 0px; border-radius: 100px!important;")},{default:c(()=>[e.userLocationLoading?(r(),g("div",Qi,[l(E,{size:"sm",style:{"z-index":"1"},name:"mdi-crosshairs"}),l(E,{size:"sm",style:{"z-index":"2",left:"0px"},class:"animated infinite flash slowest absolute",name:"mdi-crosshairs-gps"})])):(r(),g("div",ji,[e.fineLocation&&!e.userLocationFromSearch?(r(),b(E,{key:0,name:"mdi-crosshairs-gps",class:"",size:"sm"})):(r(),b(E,{key:1,size:"sm",name:"mdi-crosshairs",class:""}))])),l(Je,{style:{"font-size":"1em !important"},"content-class":e.$q.dark.isActive?"bg-black text-white":"bg-white text-black",offset:[10,10]},{default:c(()=>[e.fineLocation?(r(),g("span",Yi,$(e.$t("landing_page.improve_location")),1)):(r(),g("span",Wi," Using rough location from your IP address. Click to improve your location. "))]),_:1},8,["content-class"])]),_:1},8,["class","style"])],2)],2),v("div",{class:q(["flex message",{"q-mx-lg  q-mb-md ":e.$q.screen.gt.lg,"q-mx-lg  q-mb-sm ":e.$q.screen.gt.sm&&e.$q.screen.lt.xl,"q-mx-md q-mt-xs ":e.$q.screen.lt.md}]),onClick:s[3]||(s[3]=C=>u.showMessage=!u.showMessage)},[v("div",{class:q(["flex grow no-wrap justify-between inter q-pb-md",{" q-pt-sm t3 items-center ":e.$q.screen.lt.md," q-mt-sm  inter text-large semibold t3 ":e.$q.screen.gt.sm," items-end":e.$q.screen.gt.sm}])},[Ki,l(E,{class:"q-ml-md",size:"1.2rem",name:u.showMessage?"mdi-chevron-up":"mdi-chevron-down"},null,8,["name"])],2),u.showMessage?(r(),g("div",Ji,[D(" PartyMap is a community-driven, crowd-sourced platform for finding parties and festivals around the world! "),Xi,D(" Anyone can submit an event that they know about, as long as the information is already public. Also anyone can suggest changes to an event if the information is out of date. No account needed! "),ea,D(" This is a work in progress... More features coming soon! \u{1F60E} "),ta,D(" - Pete "),e.$q.platform.is.nativeMobile?y("",!0):(r(),g("div",sa,[v("div",{onClick:s[1]||(s[1]=W(()=>{},["stop"])),class:"appstore-wrapper flex items-center q-py-sm q-px-md"},[l(E,{name:"mdi-apple",size:"1.5rem",class:"q-mr-sm"}),na]),v("div",{onClick:s[2]||(s[2]=W(()=>{},["stop"])),class:"appstore-wrapper flex items-center q-py-sm q-px-md"},[l(E,{name:"mdi-google-play",size:"1.5rem",class:"q-mr-sm"}),ia])]))])):y("",!0)],2),e.$q.screen.lt.sm?(r(),g("div",{key:0,class:q(["nav-button-container flex row no-wrap q-px-md t1 q-mt-md",{"q-mb-sm":e.$q.screen.lt.sm,"q-mb-sm text-large inter bold q-px-lg ":e.$q.screen.gt.sm}])},[v("div",{flat:"",onClick:s[4]||(s[4]=W(C=>t.showAddEventDialog(),["stop"])),class:"nav-button flex items-center justify-center q-mr-sm q-px-md q-py-xs"},[e.$q.screen.lt.sm?(r(),g("span",aa,"Submit")):(r(),g("span",oa,"Add an event")),l(E,{name:"mdi-plus",size:"1rem",class:q(["q-ml-md",{"q-ml-md":e.$q.screen.gt.sm}])},null,8,["class"])]),l(Y,{onClick:s[5]||(s[5]=W(()=>e.sidebarPanel="explore",["stop"])),flat:"","no-caps":"",class:"nav-button q-px-md q-py-xs"},{default:c(()=>[v("div",ra,[la,l(E,{name:"mdi-chevron-right",size:"1rem",class:"q-ml-md"})])]),_:1})],2)):y("",!0),e.$q.screen.lt.sm?(r(),g("div",ua,ha)):y("",!0),e.loadingEverything||!t.computedSidebarPanelReady?(r(),g("div",ca,[l(n,{solid:!1})])):y("",!0),v("div",ma,[l(Q,{appear:"","enter-active-class":"animated fadeIn slow"},{default:c(()=>{var C,w,B,M,R;return[t.computedSidebarPanelReady&&!e.loadingEverything?(r(),g("div",pa,[e.currentUser&&((C=e.userEventDates)==null?void 0:C.length)>0?(r(),g("div",fa,[v("div",{class:q(["q-py-md location-header flex justify-between",e.$q.screen.gt.sm?"q-px-lg t1 inter semibold":"q-px-md t1 inter semibold"])},[ga,l(i,{class:"link-hover t3 inter semibold",to:{name:"UserPage",params:{username:e.currentUser.username}}},{default:c(()=>[D(" View all "),l(E,{name:"mdi-chevron-right"})]),_:1},8,["to"])],2),e.userEventDates&&e.userEventDates.length>0?(r(),g("div",va,[l(d,{horizontal:"",class:"user-event-scroll-area",style:{width:"100%"},"thumb-style":e.$q.screen.gt.sm?{bottom:"0px",height:"8px",marginLeft:"24px"}:{bottom:"0px",height:"0px"}},{default:c(()=>[v("div",{class:q(["flex row no-wrap q-gutter-md",e.$q.screen.gt.sm?"q-px-lg":"q-px-md"])},[(r(!0),g(H,null,U(e.userEventDates,(I,V)=>(r(),b(o,{key:V,hideInfo:!0,event:I[0]},null,8,["event"]))),128))],2)]),_:1},8,["thumb-style"])])):y("",!0),v("div",{class:q(e.$q.screen.lt.md?"q-px-md q-mt-s":"q-px-lg q-mt-sm q-mb-sm")},[l(ie)],2)])):y("",!0),((w=e.nearbyTags)==null?void 0:w.length)>=10?(r(),g("div",_a,[v("div",{class:q(["q-py-md location-header",e.$q.screen.gt.sm?"q-px-lg  t1 inter semibold":"q-pl-md t1 inter semibold"])},ba,2),e.nearbyTags&&e.nearbyTags.length>0?(r(),g("div",{key:0,class:q(["",e.$q.screen.gt.sm?"q-pl-lg q-mb-sm":"q-pl-md"])},[l(d,{horizontal:"",class:"tag-scroll-area",style:X([{width:"100%"},e.$q.screen.gt.sm?"margin-bottom: -8px":""]),"thumb-style":e.$q.screen.gt.sm?{bottom:"0px",height:"0px"}:{bottom:"0px",height:"0px"}},{default:c(()=>[v("div",ka,[v("div",La,[(r(!0),g(H,null,U(e.nearbyTags.filter((I,V)=>V%2),(I,V)=>(r(),g("div",{key:V,onClick:te=>t.clickTag(I),class:q(["tag t2 text- inter semibold",e.$q.platform.is.ios?"no-hover":""]),style:{"text-transform":"capitalize"}},$(I.tag),11,wa))),128))]),v("div",Ca,[(r(!0),g(H,null,U(e.nearbyTags.filter((I,V)=>V%2!==1),(I,V)=>(r(),g("div",{key:V,onClick:te=>t.clickTag(I),class:q(["tag t2 text- inter semibold",e.$q.platform.is.ios?"no-hover":""]),style:{"text-transform":"capitalize"}},$(I.tag),11,Sa))),128))])])]),_:1},8,["style","thumb-style"])],2)):y("",!0)])):((B=e.tagOptions)==null?void 0:B.length)>0?(r(),g("div",qa,[v("div",{class:q(["q-py-md location-header",e.$q.screen.gt.sm?"q-px-lg  t1 inter semibold":"q-pl-md t1"])},Pa,2),v("div",{class:q(e.$q.screen.gt.sm?"q-pl-lg q-mb-sm":"q-pl-md")},[l(d,{horizontal:"",style:X([e.$q.screen.gt.sm?"margin-bottom: -8px":"",{width:"100%"}]),class:"tag-scroll-area","thumb-style":e.$q.screen.gt.sm?{bottom:"0px",height:"0px"}:{bottom:"0px",height:"0px"}},{default:c(()=>[v("div",Ma,[v("div",Da,[(r(!0),g(H,null,U(e.tagOptions.filter((I,V)=>V%2),(I,V)=>(r(),g("div",{key:V,onClick:te=>t.clickTag(I),class:q(["tag t2 text- inter semibold",e.$q.platform.is.ios?"no-hover":""]),style:{"text-transform":"capitalize"}},$(I.tag),11,Ea))),128))]),v("div",xa,[(r(!0),g(H,null,U(e.tagOptions.filter((I,V)=>V%2!==1),(I,V)=>(r(),g("div",{key:V,onClick:te=>t.clickTag(I),class:q(["tag t2 text- inter semibold",e.$q.platform.is.ios?"no-hover":""]),style:{"text-transform":"capitalize"}},$(I.tag),11,Oa))),128))])])]),_:1},8,["style","thumb-style"])],2)])):y("",!0),((M=e.nearbyArtists)==null?void 0:M.length)>5?(r(),g("div",Ia,[v("div",{class:q(["location-header q-py-md inter",e.$q.screen.gt.sm?"q-px-lg t1 inter semibold":"q-pl-md t1 semibold"])}," Artists playing nearby: ",2),l(f,{class:q(e.$q.screen.gt.sm?"q-pl-sm":""),artists:e.nearbyArtists,hasNext:e.nearbyArtistsHasNext,loadMore:e.loadNearbyArtists,style:X(e.$q.screen.gt.sm?"margin-bottom: -24px":"")},null,8,["class","artists","hasNext","loadMore","style"])])):((R=e.artistOptions)==null?void 0:R.length)>0?(r(),g("div",Aa,[v("div",{class:q(["location-header q-py-md inter semibold",e.$q.screen.gt.sm?"q-pl-lg  t1 inter semibold":"q-pl-md t1"])}," Top artists worldwide: ",2),l(f,{class:q(e.$q.screen.gt.sm?"q-pl-sm":""),artists:e.artistOptions,hasNext:e.artistOptionsHasNext,loadMore:e.loadArtistOptions,style:X(e.$q.screen.gt.sm?"margin-bottom: -24px":"")},null,8,["class","artists","hasNext","loadMore","style"])])):y("",!0),e.userLocation?(r(),g("div",{key:5,class:q(["t1 inter semibold location-header q-py-sm flex row items-center justify-between",e.$q.screen.gt.sm?"q-pl-lg q-mt-md t1 inter semibold":"q-pl-md"])},[v("div",Ba,[v("div",Ta,$(e.$t("landing_page.events_within")),1),l(Xe,{"emit-value":"",dense:"",borderless:"","map-options":"",behavior:"menu",class:"q-mx-xs radius-select inter o-050",modelValue:e.queryRadius,"onUpdate:modelValue":s[6]||(s[6]=I=>e.queryRadius=I),options:u.queryRadiusOptions},null,8,["modelValue","options"])]),e.$q.screen.gt.sm?(r(),b(m,{key:0,style:{"margin-right":"16px"},"show-group-by-month":!1})):y("",!0)],2)):y("",!0),l(Q,{appear:"","enter-active-class":"animated fadeIn slower"},{default:c(()=>[e.nearbyEventDates&&e.compactView?(r(),b(p,{key:0,class:"q-mx-sm",groupByMonth:!1,eventDates:e.nearbyEventDates,hasNext:e.nearbyEventDatesHasNext,loading:e.nearbyEventDatesLoading,disableEndOfResultsMessage:!0,hideHeader:!0},null,8,["eventDates","hasNext","loading"])):y("",!0)]),_:1}),l(Q,{appear:"","enter-active-class":"animated fadeIn slower"},{default:c(()=>[e.nearbyEventDates&&!e.compactView?(r(),b(_,{key:0,class:"q-mx-sm",groupByMonth:!1,eventDates:e.nearbyEventDates,hasNext:e.nearbyEventDatesHasNext,loading:e.nearbyEventDatesLoading,disableEndOfResultsMessage:!0,hideHeader:!0},null,8,["eventDates","hasNext","loading"])):y("",!0)]),_:1}),e.nearbyEventDatesSuccess&&e.nearbyEventDates.length===0?(r(),g("div",{key:6,class:q(["t4",{"q-pl-lg":e.$q.screen.gt.sm,"q-pl-md":e.$q.screen.lt.md}])},$(e.$t("landing_page.no_events_in_area")),3)):y("",!0),e.eventDates&&e.eventDates.length>0?(r(),g("div",{key:7,class:q(["t1 inter semibold location-header flex row items-center justify-between",e.$q.screen.gt.sm?"q-pl-sm  t1 inter semibold":"q-pl-sm t1"]),style:{height:"56px"}},[v("div",{class:q(["flex",e.$q.screen.gt.sm?"q-pl-md":"q-pl-sm"])},[e.eventDates?(r(),g("div",Ra,$(e.$t("landing_page.all_upcoming_events"))+": ",1)):y("",!0)],2),e.$q.screen.gt.sm?(r(),b(m,{key:0,style:{"margin-right":"16px"},"show-group-by-month":!1})):y("",!0)],2)):y("",!0),l(Q,{appear:"","enter-active-class":"animated fadeIn slower"},{default:c(()=>[e.eventDates&&e.compactView?(r(),b(p,{key:0,class:"q-mx-sm",groupByMonth:!1,eventDates:e.eventDates,hasNext:e.eventDatesHasNext,hideHeader:!0},null,8,["eventDates","hasNext"])):y("",!0)]),_:1}),l(Q,{appear:"","enter-active-class":"animated fadeIn slower"},{default:c(()=>[e.eventDates&&!e.compactView?(r(),b(_,{key:0,class:"q-mx-sm",groupByMonth:!1,eventDates:e.eventDates,hasNext:e.eventDatesHasNext&&!e.nearbyEventDatesHasNext,hideHeader:!0},null,8,["eventDates","hasNext"])):y("",!0)]),_:1}),v("div",Na,[(r(!0),g(H,null,U(t.eventDatesPageNumbers,I=>(r(),g("a",{key:I,class:q(["link-hover q-mr-xs t3",I===e.eventDatesPage?"text-primary":""]),onClick:V=>t.loadEventDatePage(I)}," ["+$(I)+"] ",11,za))),128))])])):y("",!0)]}),_:1})])])]),_:1},8,["onScroll","thumb-style","class"])])])])])}var Ha=Z(Di,[["render",Ua],["__scopeId","data-v-abd7ac26"]]),Ce=wt({name:"QRouteTab",props:{...Ct,...St},emits:qt,setup(e,{slots:s,emit:a}){const h=$t({useDisableForRouterLinkProps:!1}),{renderTab:u,$tabs:t}=Pt(e,s,a,{exact:Mt(()=>e.exact),...h});return Dt(()=>`${e.name} | ${e.exact} | ${(h.resolvedLink.value||{}).href}`,()=>{t.verifyRouteModel()}),()=>u(h.linkTag.value,h.linkAttrs.value)}});const Va={name:"NavigationBar",components:{},props:{color:{type:String,default:"black"}},data(){return{}},methods:{...K(A,["loadIpInfo","getFineLocation"]),clickLocation(){this.getFineLocation(),this.sidebarPanel="nearby",this.showPanel=!0},updateNav(e){e&&(this.sidebarPanel=e)}},watch:{sidebarPanel:{handler:function(e){e==="nearby"?this.$route.query.view&&this.$router.push({name:"Explore"}):e==="explore"&&this.$router.push({name:"Explore",query:{view:"explore"}})}}},computed:{...G(ce,["currentUser"]),...O(A,["sidebarPanel","showPanel","fineLocation"]),...G(A,["fineLocation","userLocationLoading","userLocationCity","userLocation","userLocationCountry"]),...O(j,["controlFavorites"]),computedPanelName(){switch(this.sidebarPanel){case"nearby":return this.userLocationCity?this.$q.screen.gt.sm?"Near "+this.userLocationCity+", "+this.userLocationCountry:"Near "+this.userLocationCity:"Finding your location...";case"explore":return"Explore Events";case"favorites":return"Your calendar";case"profile":return"Your profile";case"search":return"Search results"}return""}}},Fa={class:"navigation-bar justify-between flex row no-wrap items-center"};function Ga(e,s,a,h,u,t){return r(),g("div",Fa,[l(Et,{class:q([{"light-button":a.color==="white","inter bolder desktop-tabs":e.$q.screen.gt.sm},"tabs"]),onClick:s[1]||(s[1]=W(()=>{},["stop"])),"model-value":e.sidebarPanel,"onUpdate:modelValue":t.updateNav,"no-caps":"","indicator-color":(e.$q.screen.lt.md,"transparent"),"active-class":e.$q.screen.lt.md?e.$route.name==="Explore"||e.$route.name==="UserPage"||e.$route.name==="BrowsePage"?void 0:"inactive-tab":"active-tab"},{default:c(()=>[l(Ce,{to:{name:"Explore"},exact:"",key:"1",name:"nearby","content-class":"tab",label:e.$q.screen.lt.sm?"Home":"Nearby",ripple:!1,icon:e.$q.screen.lt.md?e.sidebarPanel==="nearby"?"mdi-home":"mdi-home-outline":void 0},null,8,["label","icon"]),l(Ce,{to:{query:{view:"explore"},name:"Explore"},onClick:s[0]||(s[0]=()=>e.showPanel=!1),exact:"",key:"2",name:"explore",icon:e.$q.screen.lt.md?e.sidebarPanel==="explore"?"mdi-map-search":"mdi-map-search-outline":void 0,label:e.$q.screen.lt.md?"Map":"Explore","content-class":"tab",ripple:!1},null,8,["icon","label"]),l(Ce,{to:{name:"BrowsePage"},exact:"",key:"3",name:"browse",label:"Browse",icon:e.$q.screen.lt.md?e.$route.name==="BrowsePage"?"mdi-feature-search":"mdi-feature-search-outline":void 0,"content-class":"tab",ripple:!1},null,8,["icon"]),e.$q.screen.lt.md?(r(),b(Ce,{name:"profile",key:"4",icon:e.$route.name==="UserPage"?"mdi-calendar-star":"mdi-calendar-star-outline",label:"Calendar","content-class":"tab",ripple:!1,to:e.currentUser?{name:"UserPage",params:{username:e.currentUser.username}}:{path:"/login",query:{from:e.$route.path}},exact:""},null,8,["icon","to"])):y("",!0)]),_:1},8,["class","model-value","onUpdate:modelValue","indicator-color","active-class"])])}var He=Z(Va,[["render",Ga],["__scopeId","data-v-341be502"]]);const Za={components:{ExploreView:Xn,SearchView:yi,NavigationBar:He,NearbyView:Ha,SearchComponent:ot},async mounted(){this.$refs.resizer&&this.$refs.resizer.addEventListener("mousedown",e=>{document.addEventListener("mousemove",this.resize,!1),document.addEventListener("mouseup",()=>{document.removeEventListener("mousemove",this.resize,!1)},!1)}),window.addEventListener("resize",()=>{this.$q.screen.gt.lg})},unmounted(){this.wheelIndicator&&this.wheelIndicator.destroy()},data(){return{lastx:0,preventMapInteraction:!1,wheelIndicator:null,panelHiddenDelayed:!0}},methods:{resize(e){e.x>580&&e.x>this.lastx&&!this.sidebarExpanded?this.sidebarExpanded=!0:e.x<1e3&&e.x<this.lastx&&this.sidebarExpanded&&(this.sidebarExpanded=!1),this.lastx=e.x},showAddEventDialog(){this.$q.dialog({parent:this,component:Oe}).onOk(e=>{!this.currentUser&&e.host?this.$router.push({name:"Login"}):e.host?this.$router.push({name:"AddEventHost"}):this.$router.push({name:"AddEventPublic"})})},handleWheel(e){if(this.$q.platform.is.safari)return e.preventDefault(),!1},onMouseWheel(e){const s=e.direction==="up",a=e.direction==="down";if(console.log(e),e.wheelDeltaY>2||e.wheelDeltaY<-2){if(!this.showPanel&&a)this.showPanel=!0;else if(this.enablePanelSwipeDown&&s&&!this.preventMapZoom)return this.preventMapZoom=!0,this.showPanel=!1,setTimeout(()=>{this.preventMapZoom=!1},1e3),this.sidebarPanel!=="explore"&&this.$q.screen.lt.sm&&(this.sidebarPanel="explore"),!1}},hideDialog(){this.$router.push({name:"Explore"})},handleSwipe({evt:e,...s}){s.direction==="down"&&this.showPanel?(this.showPanel=!1,this.sidebarPanel!=="explore"&&this.$q.screen.lt.sm&&(this.sidebarPanel="explore")):this.showPanel=!0},togglePanel(e){this.showPanel=!this.showPanel,this.sidebarPanel!=="explore"&&(this.sidebarPanel="explore")},onMobileSwipeHandle(e){e||(this.showPanel=!this.showPanel),this.sidebarPanel!=="explore"&&(this.sidebarPanel="explore"),this.showPanel=!this.showPanel}},watch:{showPanel(e){e===!0?this.panelHiddenDelayed=!1:setTimeout(()=>{this.panelHiddenDelayed=!0},350)},mapMoving(){this.view==="nearby"&&!this.loadingUserLocation&&(this.view="explore")},userLocation(){this.view==="explore"&&(this.view="nearby")},sidebarPanel(e,s){e==="explore"&&(this.showPanel=!1),e==="search"&&(this.showPanel=!0),e==="nearby"&&(this.$q.screen.lt.sm?(this.showPanel=!0,this.enablePanelSwipeDown=!0):(this.showPanel=!1,this.enablePanelSwipeDown=!0))}},computed:{...G(ce,["currentUser"]),...G(A,["userLocation","loadingUserLocation","getFineLocation","userLocationLoading","userLocationFromSearch","computedSidebarWidth"]),...O(A,["sidebarExpanded","showPanel","sidebarPanel","enablePanelSwipeDown"]),...G(ee,["mapMoving"]),...O(ee,["preventMapZoom"]),...O(j,["eventDates","eventDatesGroupedByMonth","eventDatesLoading"]),route(){return this.$route}}},ja={class:"flex sidebar-wrapper"},Qa={class:"sidebar-content flex column no-wrap"},Wa={key:0,class:"add-event-wrapper items-center flex justify-center q-px-md q-py-sm",style:{"margin-top":"4px"}},Ya={style:{height:"100%",width:"100%"},class:"sidebar-content-inner"},Ka={key:0,class:"resizer flex row items-center",ref:"resizer"};function Ja(e,s,a,h,u,t){const n=P("SearchComponent"),i=P("NearbyView"),o=P("ExploreView"),d=P("SearchView"),f=P("NavigationBar");return r(),g("div",ja,[F((r(),g("div",{ref:"sidebar",class:q(["flex justify-between no-wrap sidebar",{shadow:e.$q.screen.gt.xs,"sidebar-mobile-expanded":e.showPanel&&e.$q.screen.lt.sm,"sidebar-mobile-nearby":e.sidebarPanel==="nearby"&&e.$q.screen.gt.xs,"sidebar-mobile-hidden":e.$q.screen.lt.sm&&e.$route.name==="EventPage"}]),id:"sidebar",style:X(e.computedSidebarWidth)},[F((r(),g("div",Qa,[e.$route.name==="Explore"&&e.$q.screen.gt.xs?(r(),g("div",Wa,[l(Y,{class:"inter o-070","no-caps":"",flat:"",onClick:t.showAddEventDialog},{default:c(()=>[D("Submit "),l(E,{name:"mdi-plus",class:"q-ml-sm",size:"1rem"})]),_:1},8,["onClick"]),y("",!0)])):y("",!0),e.$q.screen.gt.xs?(r(),b(n,{key:1,class:"search-component"})):y("",!0),v("div",Ya,[e.sidebarPanel==="nearby"?(r(),b(i,{key:0,style:{height:"100%",width:"100%"}})):y("",!0),F(l(o,{style:{height:"100%",width:"100%"}},null,512),[[Le,e.sidebarPanel==="explore"]]),F(l(d,{style:{height:"100%",width:"100%"}},null,512),[[Le,e.sidebarPanel==="search"]])]),e.$q.screen.gt.xs&&e.$q.screen.lt.md?(r(),b(f,{key:2,onClick:t.togglePanel,class:"nav-bar"},null,8,["onClick"])):y("",!0)])),[[Te,e.enablePanelSwipeDown&&this.sidebarPanel==="explore"&&e.showPanel?t.handleSwipe:null,void 0,{mouse:!0,down:!0}]]),e.$q.screen.gt.lg?(r(),g("div",Ka,[l(E,{name:"las la-grip-lines-vertical"})],512)):y("",!0)],6)),[[Te,!e.showPanel&&this.sidebarPanel==="explore"?t.handleSwipe:null,void 0,{mouse:!0,up:!0}]])])}var Xa=Z(Za,[["render",Ja],["__scopeId","data-v-5260ccf0"]]);const eo={name:"MenuBarLogo",props:{color:{type:String}},components:{},watch:{},data(){return{}},methods:{},computed:{...O(A,["showSearchBox","sidebarPanel"])}},to={class:"logo q-pa-md row no-wrap items-center"},so={key:0,style:{height:"30px",width:"auto"},src:xt,class:"logo-image"},no={key:1,style:{height:"30px",width:"auto"},src:Ot,class:"logo-image"};function io(e,s,a,h,u,t){const n=P("router-link");return r(),b(n,{to:{name:"Explore"},onClick:s[0]||(s[0]=()=>e.sidebarPanel="nearby"),style:{color:"unset","text-decoration":"none"}},{default:c(()=>[l(Q,{appear:"","enter-active-class":"animated fadeIn","leave-active-class":"animated fadeOut"},{default:c(()=>[v("div",to,[a.color==="white"?(r(),g("img",so)):(r(),g("img",no))])]),_:1})]),_:1})}var ut=Z(eo,[["render",io],["__scopeId","data-v-9ac90de6"]]);const ao={name:"TopControlsMenu",components:{FeedbackDialog:Bt,AboutDialog:Tt},data(){return{logoutLoading:!1,mobilePosterView:!1,showFeedbackDialog:!1,showAboutDialog:!1,mapStyleOptions:[{label:this.$t("nav.satellite_map"),value:"satellite"},{label:this.$t("nav.transport_map"),value:"transport"}]}},methods:{...K(ce,["logout"]),async handleLogout(){this.logoutLoading=!0,await this.logout(),this.logoutLoading=!1},showAddEventDialog(){this.$q.dialog({parent:this,component:Oe}).onOk(e=>{!this.currentUser&&e.host?this.$router.push({name:"Login"}):e.host?this.$router.push({name:"AddEventHost"}):this.$router.push({name:"AddEventPublic"})})}},watch:{mobilePosterView(e,s){e?(this.compactView=!1,this.groupEventsByMonth=!1):(this.compactView=!0,this.groupEventsByMonth=!0)},route(){this.showAboutDialog=!1,this.showFeedbackDialog=!1}},computed:{darkMode(){return this.$q.dark.isActive},route(){return this.$route},...G(ce,["currentUser"]),...O(A,["compactView","groupEventsByMonth"]),...O(ee,["mapStyle"])},beforeMount(){!this.compactView&&!this.groupEventsByMonth&&(this.mobilePosterView=!0)}},oo=["src"],ro={class:"username inter bold text-large q-ml-md"};function lo(e,s,a,h,u,t){const n=P("FeedbackDialog"),i=P("AboutDialog");return r(),g("div",null,[e.currentUser&&e.$q.screen.lt.sm?(r(),b(N,{key:0,class:"q-mt-sm",clickable:"",onClick:s[0]||(s[0]=o=>e.$router.push({name:"UserPage",params:{id:e.currentUser.username}}))},{default:c(()=>{var o,d;return[l(ze,{size:"32px",color:"primary",icon:(d=(o=e.currentUser)==null?void 0:o.avatar)!=null&&d.thumb_url?void 0:"las la-user"},{default:c(()=>{var f,m;return[(m=(f=e.currentUser)==null?void 0:f.avatar)!=null&&m.thumb_url?(r(),g("img",{key:0,src:e.currentUser.avatar.thumb_url},null,8,oo)):y("",!0)]}),_:1},8,["icon"]),l(x,null,{default:c(()=>[v("div",ro,$(e.currentUser.username),1)]),_:1})]}),_:1})):y("",!0),e.currentUser&&e.$q.screen.lt.sm?(r(),b(ie,{key:1,inset:"",class:"q-mt-sm"})):y("",!0),e.currentUser?y("",!0):F((r(),b(N,{key:2,class:"q-mt-sm -item",onClick:s[1]||(s[1]=o=>e.$router.push({path:"/login",query:{from:e.$route.path}})),clickable:""},{default:c(()=>[l(x,{avatar:""},{default:c(()=>[l(E,{name:"las la-sign-in-alt"})]),_:1}),l(x,null,{default:c(()=>[l(T,null,{default:c(()=>[D($(e.$t("sidebar.login")),1)]),_:1})]),_:1})]),_:1})),[[ue]]),e.currentUser?F((r(),b(N,{key:3,class:"q-mt-sm",onClick:t.handleLogout,clickable:""},{default:c(()=>[l(x,{avatar:""},{default:c(()=>[u.logoutLoading?(r(),b(_e,{key:1,size:"1.5rem",color:e.$q.dark.isActive?"white":"black"},null,8,["color"])):(r(),b(E,{key:0,name:"mdi-logout-variant"}))]),_:1}),l(x,null,{default:c(()=>[l(T,null,{default:c(()=>[D($(e.$t("sidebar.logout")),1)]),_:1})]),_:1})]),_:1},8,["onClick"])),[[ue]]):y("",!0),e.currentUser&&e.currentUser.role>=20?F((r(),b(N,{key:4,onClick:s[2]||(s[2]=o=>e.$router.push({name:"AdminPage"})),clickable:""},{default:c(()=>[l(x,{avatar:""},{default:c(()=>[l(E,{name:"mdi-shield-account-outline"})]),_:1}),l(x,null,{default:c(()=>[l(T,null,{default:c(()=>[D("Administration")]),_:1})]),_:1})]),_:1})),[[ue]]):y("",!0),e.currentUser&&e.currentUser.role>=20?F((r(),b(N,{key:5,onClick:s[3]||(s[3]=o=>e.$router.push({name:"WorkQueuePage"})),clickable:""},{default:c(()=>[l(x,{avatar:""},{default:c(()=>[l(E,{name:"mdi-format-list-bulleted"})]),_:1}),l(x,null,{default:c(()=>[l(T,null,{default:c(()=>[D("Work Queue")]),_:1})]),_:1})]),_:1})),[[ue]]):y("",!0),e.currentUser?F((r(),b(N,{key:6,onClick:s[4]||(s[4]=o=>e.$router.push({name:"ManageAccount"})),clickable:""},{default:c(()=>[l(x,{avatar:""},{default:c(()=>[l(E,{name:"las la-cog"})]),_:1}),l(x,null,{default:c(()=>[l(T,null,{default:c(()=>[D($(e.$t("sidebar.my_account")),1)]),_:1})]),_:1})]),_:1})),[[ue]]):y("",!0),F((r(),b(N,{onClick:s[5]||(s[5]=o=>t.showAddEventDialog()),clickable:""},{default:c(()=>[l(x,{avatar:""},{default:c(()=>[l(E,{name:"mdi-shape-square-plus"})]),_:1}),l(x,null,{default:c(()=>[l(T,null,{default:c(()=>[D("Add event")]),_:1})]),_:1})]),_:1})),[[ue]]),l(ie,{inset:"",class:"q-my-sm"}),F((r(),b(N,{onClick:s[6]||(s[6]=o=>u.showAboutDialog=!0),clickable:""},{default:c(()=>[l(x,{avatar:""},{default:c(()=>[l(E,{name:"las la-hand-peace"})]),_:1}),l(x,null,{default:c(()=>[l(T,null,{default:c(()=>[D($(e.$t("sidebar.about")),1)]),_:1})]),_:1})]),_:1})),[[ue]]),F((r(),b(N,{onClick:s[7]||(s[7]=o=>u.showFeedbackDialog=!0),clickable:""},{default:c(()=>[l(x,{avatar:""},{default:c(()=>[l(E,{name:"las la-comment"})]),_:1}),l(x,null,{default:c(()=>[l(T,null,{default:c(()=>[D($(e.$t("feedback.give_feedback")),1)]),_:1})]),_:1})]),_:1})),[[ue]]),l(ie,{inset:"",class:"q-mt-sm q-mb-none"}),l(N,null,{default:c(()=>[l(Fe,{"model-value":t.darkMode,onClick:s[8]||(s[8]=o=>e.$q.dark.toggle()),label:"Dark Mode"},null,8,["model-value"])]),_:1}),e.$q.screen.lt.sm?(r(),b(N,{key:7},{default:c(()=>[l(Fe,{modelValue:u.mobilePosterView,"onUpdate:modelValue":s[9]||(s[9]=o=>u.mobilePosterView=o),label:"Grid View"},null,8,["modelValue"])]),_:1})):y("",!0),l(ie,{inset:"",class:"q-mb-xs"}),l(T,{header:"",class:"q-pb-none"},{default:c(()=>[D($(e.$t("top_controls.map_options")),1)]),_:1}),l(N,null,{default:c(()=>[l(Xe,{borderless:"",behavior:"menu",class:"flex grow",modelValue:e.mapStyle,"onUpdate:modelValue":s[10]||(s[10]=o=>e.mapStyle=o),options:u.mapStyleOptions,"emit-value":"",square:"","map-options":""},null,8,["modelValue","options"])]),_:1}),l(qe,{modelValue:u.showFeedbackDialog,"onUpdate:modelValue":s[12]||(s[12]=o=>u.showFeedbackDialog=o),"transition-show":"jump-up","transition-hide":"jump-down"},{default:c(()=>[l(n,{onCloseDialog:s[11]||(s[11]=o=>u.showFeedbackDialog=!1)})]),_:1},8,["modelValue"]),l(qe,{modelValue:u.showAboutDialog,"onUpdate:modelValue":s[13]||(s[13]=o=>u.showAboutDialog=o),"transition-show":"jump-up","transition-hide":"jump-down"},{default:c(()=>[l(i)]),_:1},8,["modelValue"])])}var uo=Z(ao,[["render",lo],["__scopeId","data-v-e8a63edc"]]);const ho={name:"MenuBarButtons",components:{TopControlsMenu:uo},props:{color:{type:String}},watch:{},data(){return{options:[],selectedOptions:null,settings:[{label:this.$t("nav.dark_mode"),value:"darkmode"},{label:this.$t("nav.watercolor"),value:"watercolor"}]}},methods:{showAddEventDialog(){this.$q.dialog({parent:this,component:Oe}).onOk(e=>{!this.currentUser&&e.host?this.$router.push({name:"Login"}):e.host?this.$router.push({name:"AddEventHost"}):this.$router.push({name:"AddEventPublic"})})}},computed:{...G(ce,["currentUser"]),...G(A,["menubarOpacity"]),...O(A,["sidebarPanel"]),transparentMenuBar(){return this.$q.screen.lt.sm&&(this.$route.name==="EventPage"||this.$route.name==="Explore")}}},co={class:"menubar-content flex row justify-end items-stretch no-wrap"},mo={class:"profile-button-inner flex row items-center"},po={key:0,class:"q-px-md q-pl-md"},fo={key:1,class:"q-px-md q-pl-md"};function go(e,s,a,h,u,t){const n=P("router-link"),i=P("TopControlsMenu");return r(),g("div",co,[(e.$q.screen.gt.xs,y("",!0)),e.$q.screen.gt.xs?(r(),b(n,{key:1,class:"flex link-hover",to:e.currentUser?{name:"UserPage",params:{username:e.currentUser.username}}:{path:"/login",query:{from:e.$route.path}}},{default:c(()=>[l(Y,{flat:"","no-caps":"",class:q(["profile-button t2",{"light-button":a.color==="white"}])},{default:c(()=>[v("div",mo,[e.currentUser?(r(),g("div",fo,"@"+$(e.currentUser.username),1)):(r(),g("div",po,"Sign in")),l(ze,{color:a.color,class:"o-080","text-color":a.color==="white"?"black":"white",icon:"mdi-account-circle","font-size":"14px",size:"36px"},null,8,["color","text-color"])])]),_:1},8,["class"])]),_:1},8,["to"])):y("",!0),l(Y,{class:q(["menubar-button",{"light-button":a.color==="white"}]),icon:"mdi-menu",flat:"",style:{position:"relative"}},{default:c(()=>[l(Be,{"transition-show":"jump-down","transition-hide":"jump-up",anchor:"bottom right",self:"top right",class:"main-menu","max-height":"100vh"},{default:c(()=>[l(i)]),_:1}),l(Je,{"content-class":e.$q.dark.isActive?"bg-black text-white":"bg-white text-black",offset:[10,10],"content-style":"font-size: 16px"},{default:c(()=>[D($(e.$t("sidebar.more")),1)]),_:1},8,["content-class"])]),_:1},8,["class"])])}var vo=Z(ho,[["render",go],["__scopeId","data-v-ec509016"]]),ve;(function(e){e.Dark="DARK",e.Light="LIGHT",e.Default="DEFAULT"})(ve||(ve={}));var Qe;(function(e){e.None="NONE",e.Slide="SLIDE",e.Fade="FADE"})(Qe||(Qe={}));const ge=et("StatusBar");const _o={name:"MenuBar",components:{MenuBarLogo:ut,MenuBarButtons:vo,NavigationBar:He},data(){return{}},watch:{iconColor(e,s){this.$q.platform.is.capacitor&&(e==="black"?ge.setStyle({style:ve.Light}):ge.setStyle({style:ve.Dark}))}},mounted(){this.$q.platform.is.ipad?ge.hide():this.$q.platform.is.capacitor&&(ge.setOverlaysWebView({overlay:!0}),this.iconColor==="black"?ge.setStyle({style:ve.Light}):ge.setStyle({style:ve.Dark}))},methods:{updateNav(e){e&&(this.sidebarPanel=e)},back(){this.$router.go(-1)},getPreviousRouteName(e){return this.$route.name==="Explore"||this.$route.name==="BrowsePage"||this.$route.name==="UserPage"||!e?null:e.name==="Explore"?this.sidebarPanel==="explore"||this.sidebarPanel==="search"?this.$q.screen.lt.md?"Back":"Back to results":this.sidebarPanel==="nearby"?this.$q.screen.lt.md?"Back":"Back home":this.sidebarPanel==="profile"?(this.$q.screen.lt.md,"Back"):"null":e.name==="EventPage"||e.name==="ArtistPage"?this.$q.screen.lt.md?"Back":"Back to "+e.query.name.replace(/_/g," "):e!=null&&e.meta.friendlyName?this.$q.screen.lt.md?"Back":e.meta.friendlyName:"Back"}},computed:{...G(A,["showSidebar","menubarOpacity","routerHistory"]),...O(A,["sidebarPanel","showPanel"]),...O(A,["routerHistory"]),previousRouteName(){var s;if(this.routerHistory.length==1)return null;const e=this.routerHistory[this.routerHistory.length-1];return e?(s=e.meta)!=null&&s.noBackNavigation?null:this.getPreviousRouteName(e):null},transparentMenuBar(){return this.$route.name==="EventPage"||this.$route.name==="ArtistPage"||this.$route.name==="Explore"||this.$route.meta.fullscreenLayout===!0&&this.$q.screen.gt.xs},computedStyle(){if(this.$route.name==="EventPage"||this.$route.name==="ArtistPage"){var e=this.menubarOpacity;return this.$q.screen.gt.xs?this.$q.dark.isActive?`opacity: ${e}; background: #181818!important; border-bottom: 1px solid rgba(255, 255, 255, 0.1);`:`opacity: ${e}; background: white!important; border-bottom: 1px solid rgba(0, 0, 0, 0.1);`:`opacity: ${e}; background: black!important;`}else return!this.$route.meta.mapOverlay||this.$q.screen.lt.sm&&this.$route.name!=="Explore"?"opacity: 1;  border: none!important":"opacity: 0"},leftIconColor(){return(this.$route.name==="EventPage"||this.$route.name==="ArtistPage")&&this.$q.screen.gt.xs&&this.menubarOpacity===1&&!this.$q.dark.isActive||this.$route.name==="Explore"&&!this.$q.dark.isActive&&this.$q.screen.gt.xs||this.$route.name==="Explore"&&!this.$q.dark.isActive&&this.$q.screen.lt.sm&&this.showPanel?"black":this.$q.dark.isActive||this.$route.name==="EventPage"||this.$route.name==="ArtistPage"||this.$route.name==="Explore"||this.$route.meta.mapOverlay===!0&&this.$q.screen.gt.xs?"white":"black"},iconColor(){return(this.$route.name==="EventPage"||this.$route.name==="ArtistPage")&&this.$q.screen.gt.xs&&this.menubarOpacity===1&&!this.$q.dark.isActive||this.$route.name==="Explore"&&!this.$q.dark.isActive&&this.$q.screen.gt.xs&&this.showPanel||this.$route.name==="Explore"&&!this.$q.dark.isActive&&this.$q.screen.lt.sm&&this.showPanel?"black":this.$q.dark.isActive||this.$route.name==="EventPage"||this.$route.name==="ArtistPage"||this.$route.name==="Explore"||this.$route.meta.mapOverlay===!0&&this.$q.screen.gt.xs?"white":"black"}}},yo={key:1,class:"tab-wrapper"},bo={key:0,class:"back-button-wrapper flex items-center no-wrap"},ko={key:0,class:"separator vertical"};function Lo(e,s,a,h,u,t){const n=P("MenuBarLogo"),i=P("NavigationBar"),o=P("MenuBarButtons");return r(),g("div",{class:q(["flex row menubar justify-between items-center",{iphone:e.$q.platform.is.iphone||e.$q.platform.is.ipod,ipad:e.$q.platform.is.ipad&&e.$q.platform.is.capacitor}])},[v("div",{class:"menubar-background",style:X(t.computedStyle)},null,4),t.previousRouteName?y("",!0):(r(),b(n,{key:0,class:"logo",color:t.leftIconColor},null,8,["color"])),!t.previousRouteName&&e.$q.screen.gt.sm?(r(),g("div",yo,[l(i,{color:t.leftIconColor},null,8,["color"])])):y("",!0),l(Q,{appear:"","enter-active-class":"animated fadeIn slow","leave-active-class":"animated fadeOut"},{default:c(()=>[t.previousRouteName&&this.$route.name!=="Explore"?(r(),g("div",bo,[e.$q.screen.gt.xs?(r(),g("div",ko)):y("",!0),l(Y,{class:"back-button",style:{cursor:"pointer"},ripple:!1,flat:"",icon:"mdi-chevron-left",label:t.previousRouteName,color:t.iconColor,"no-caps":"",onClick:s[0]||(s[0]=d=>t.back())},null,8,["label","color"])])):y("",!0)]),_:1}),l(Q,{appear:"","enter-active-class":"animated fadeIn","leave-active-class":"animated fadeOut"},{default:c(()=>[l(o,{color:t.iconColor,class:"right-buttons"},null,8,["color"])]),_:1})],2)}var wo=Z(_o,[["render",Lo],["__scopeId","data-v-8170a264"]]);class Co{async injectCSSVariables(){this.addStatusBarHeight(),this.addSafeAreaVariables()}async addStatusBarHeight(){const{height:s}=await De.getStatusBarHeight();document.documentElement.style.setProperty("--status-bar-height",`${s}px`)}async addSafeAreaVariables(){const s=await De.getSafeAreaInsets();for(const a in s){const h=document.documentElement.style;switch(It.getPlatform()){case"android":case"ios":h.setProperty(`--safe-area-inset-${a}`,`${s[a]}px`);break;default:h.setProperty(`--safe-area-inset-${a}`,"0px");break}}}}const De=et("SafeArea",{web:()=>At(()=>import("./web.5896e38c.js"),["assets/web.5896e38c.js","assets/index.458653eb.js","assets/index.481264f0.css"]).then(e=>new e.SafeAreaWeb)}),So=new Co;const qo={components:{MainMap:Qt,SideBar:Xa,MenuBar:wo,MenuBarLogo:ut,NavigationBar:He,SearchComponent:ot},data(){return{androidStatusbarHeight:0,insets:{}}},methods:{clickOverlay(){this.showPanel=!1,this.sidebarPanel="explore"}},async beforeMount(){So.injectCSSVariables();const{height:e}=await De.getStatusBarHeight();this.androidStatusbarHeight=e;const s=await De.getSafeAreaInsets();this.insets=s},beforeRouteUpdate(e,s,a){s.name==="Explore"&&(this.blockUpdates=!0),e.name==="Explore"&&setTimeout(()=>this.blockUpdates=!1,500),this.$nextTick(()=>{a()})},computed:{...O(ee,["blockUpdates"]),...O(A,["showSidebar","overlayOpacity","showPanel","sidebarPanel"]),computedOverlayStyle(){return this.$route.name==="EventPage"?this.$q.screen.lt.sm?this.$q.dark.isActive?`opacity: ${this.overlayOpacity}; background: linear-gradient(black, black 50%, #060606 50%, #060606 100%)!important`:`opacity: ${this.overlayOpacity}; background: linear-gradient(black, black 50%, #f5f5f5 50%, #f5f5f5 100%)!important`:this.$q.dark.isActive?`opacity: ${this.overlayOpacity}; background: black!important`:`opacity: ${this.overlayOpacity}; background: #f5f5f5!important`:this.$q.screen.lt.sm&&this.showPanel||this.$route.name!=="Explore"&&this.$route.meta.mapOverlay===!1&&this.$q.screen.gt.xs?"opacity: 1; pointer-events: all":"opacity: 0"}}},$o={class:"main-layout"},Po=v("div",{class:"default-overlay"},null,-1),Mo={class:"main-inner-layout"};function Do(e,s,a,h,u,t){const n=P("MainMap"),i=P("MenuBar"),o=P("SideBar"),d=P("SearchComponent"),f=P("router-view"),m=P("NavigationBar");return r(),g("div",$o,[l(n),Po,v("div",{class:"overlay",style:X(t.computedOverlayStyle),onClick:s[0]||(s[0]=p=>t.clickOverlay())},null,4),v("div",Mo,[l(i,{class:"menubar"}),l(Q,{appear:"","enter-active-class":e.$q.screen.gt.xs?"animated  slideInLeft":"animated fadeIn","leave-active-class":e.$q.screen.gt.xs?"animated slideOutLeft":void 0},{default:c(()=>[F(l(o,{class:q(["sidebar-component",{hide:e.$q.screen.lt.sm&&e.$route.name==="EventPage"}])},null,8,["class"]),[[Le,e.$q.screen.lt.sm||e.$q.screen.gt.xs&&e.$route.name=="Explore"]])]),_:1},8,["enter-active-class","leave-active-class"]),F(l(d,null,null,512),[[Le,e.$q.screen.lt.sm&&e.$route.name!=="EventPage"]]),l(f,{key:"1",name:"event",class:q(["main-layout-router event-router",{"mobile-map-view-router":e.$q.screen.lt.sm}])},{default:c(({Component:p})=>[l(Q,{"enter-active-class":"animated slideInUp","leave-active-class":"animated slideOutDown"},{default:c(()=>[(r(),b(Ge(p)))]),_:2},1024)]),_:1},8,["class"]),l(f,{key:"2",class:q(["main-layout-router",{"mobile-map-view-router":e.$q.screen.lt.sm}])},{default:c(({Component:p})=>[(r(),b(Ge(p)))]),_:1},8,["class"]),e.$q.screen.lt.sm?(r(),b(m,{key:0,class:"nav-bar",style:X(e.$route.name==="Explore"||e.$route.name==="UserPage"||e.$route.name==="BrowsePage"?"":"display: none")},null,8,["style"])):y("",!0)])])}var Bo=Z(qo,[["render",Do]]);export{Bo as default};
