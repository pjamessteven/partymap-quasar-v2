import{W as j}from"./index.458653eb.js";var x={exports:{}};/*!
  * $script.js JS loader & dependency manager
  * https://github.com/ded/script.js
  * (c) Dustin Diaz 2014 | License MIT
  */(function(y){(function(i,p){y.exports?y.exports=p():this[i]=p()})("$script",function(){var i=document,p=i.getElementsByTagName("head")[0],I=!1,m="push",S="readyState",A="onreadystatechange",s={},r={},d={},f,v;function g(e,t){for(var n=0,u=e.length;n<u;++n)if(!t(e[n]))return I;return 1}function h(e,t){g(e,function(n){return t(n),1})}function l(e,t,n){e=e[m]?e:[e];var u=t&&t.call,o=u?t:n,W=u?e.join(""):t,N=e.length;function w(c){return c.call?c():s[c]}function _(){if(!--N){s[W]=1,o&&o();for(var c in r)g(c.split("|"),w)&&!h(r[c],w)&&(r[c]=[])}}return setTimeout(function(){h(e,function c(a,U){if(a===null)return _();if(!U&&!/^https?:\/\//.test(a)&&f&&(a=a.indexOf(".js")===-1?f+a+".js":f+a),d[a])return d[a]==2?_():setTimeout(function(){c(a,!0)},0);d[a]=1,b(a,_)})},0),l}function b(e,t){var n=i.createElement("script"),u;n.onload=n.onerror=n[A]=function(){n[S]&&!/^c|loade/.test(n[S])||u||(n.onload=n[A]=null,u=1,d[e]=2,t())},n.async=1,n.src=v?e+(e.indexOf("?")===-1?"?":"&")+v:e,p.insertBefore(n,p.lastChild)}return l.get=b,l.order=function(e,t,n){(function u(o){o=e.shift(),e.length?l(o,u):l(o,t,n)})()},l.path=function(e){f=e},l.urlArgs=function(e){v=e},l.ready=function(e,t,n){e=e[m]?e:[e];var u=[];return!h(e,function(o){s[o]||u[m](o)})&&g(e,function(o){return s[o]})?t():function(o){r[o]=r[o]||[],r[o][m](t),n&&n(u)}(e.join("|")),l},l.done=function(e){l([null],e)},l})})(x);class L extends j{constructor(){super({name:"SignInWithApple",platforms:["web"]}),this.appleScriptUrl="https://appleid.cdn-apple.com/appleauth/static/jsapi/appleid/1/en_US/appleid.auth.js",this.isAppleScriptLoaded=!1}async authorize(i){return new Promise((p,I)=>{i?this.loadSignInWithAppleJS().then(m=>{var S,A,s;this.isAppleScriptLoaded=m,this.isAppleScriptLoaded?(AppleID.auth.init({clientId:i.clientId,redirectURI:i.redirectURI,scope:(S=i.scopes)!==null&&S!==void 0?S:void 0,state:(A=i.state)!==null&&A!==void 0?A:void 0,nonce:(s=i.nonce)!==null&&s!==void 0?s:void 0,usePopup:!0}),AppleID.auth.signIn().then(r=>{var d,f,v,g,h;const l={response:{user:null,email:(d=r.user)===null||d===void 0?void 0:d.email,givenName:(v=(f=r.user)===null||f===void 0?void 0:f.name)===null||v===void 0?void 0:v.firstName,familyName:(h=(g=r.user)===null||g===void 0?void 0:g.name)===null||h===void 0?void 0:h.lastName,identityToken:r.authorization.id_token,authorizationCode:r.authorization.code}};p(l)}).catch(r=>{I(r)})):I("Unable to load Sign in with Apple JS framework.")}):I("No options were provided.")})}loadSignInWithAppleJS(){return new Promise(i=>{this.isAppleScriptLoaded?i(!0):typeof window!==void 0?x.exports.get(this.appleScriptUrl,()=>i(!0)):i(!1)})}}export{L as SignInWithAppleWeb};
